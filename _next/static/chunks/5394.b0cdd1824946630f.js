(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5394],{34310:function(r,i,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var u=c(62140);function readInt16BE(r,i){return void 0===i&&(i=0),(r[i+0]<<8|r[i+1])<<16>>16}function readUint16BE(r,i){return void 0===i&&(i=0),(r[i+0]<<8|r[i+1])>>>0}function readInt16LE(r,i){return void 0===i&&(i=0),(r[i+1]<<8|r[i])<<16>>16}function readUint16LE(r,i){return void 0===i&&(i=0),(r[i+1]<<8|r[i])>>>0}function writeUint16BE(r,i,c){return void 0===i&&(i=new Uint8Array(2)),void 0===c&&(c=0),i[c+0]=r>>>8,i[c+1]=r>>>0,i}function writeUint16LE(r,i,c){return void 0===i&&(i=new Uint8Array(2)),void 0===c&&(c=0),i[c+0]=r>>>0,i[c+1]=r>>>8,i}function readInt32BE(r,i){return void 0===i&&(i=0),r[i]<<24|r[i+1]<<16|r[i+2]<<8|r[i+3]}function readUint32BE(r,i){return void 0===i&&(i=0),(r[i]<<24|r[i+1]<<16|r[i+2]<<8|r[i+3])>>>0}function readInt32LE(r,i){return void 0===i&&(i=0),r[i+3]<<24|r[i+2]<<16|r[i+1]<<8|r[i]}function readUint32LE(r,i){return void 0===i&&(i=0),(r[i+3]<<24|r[i+2]<<16|r[i+1]<<8|r[i])>>>0}function writeUint32BE(r,i,c){return void 0===i&&(i=new Uint8Array(4)),void 0===c&&(c=0),i[c+0]=r>>>24,i[c+1]=r>>>16,i[c+2]=r>>>8,i[c+3]=r>>>0,i}function writeUint32LE(r,i,c){return void 0===i&&(i=new Uint8Array(4)),void 0===c&&(c=0),i[c+0]=r>>>0,i[c+1]=r>>>8,i[c+2]=r>>>16,i[c+3]=r>>>24,i}function readInt64BE(r,i){void 0===i&&(i=0);var c=readInt32BE(r,i),u=readInt32BE(r,i+4);return 4294967296*c+u-(u>>31)*4294967296}function readUint64BE(r,i){return void 0===i&&(i=0),4294967296*readUint32BE(r,i)+readUint32BE(r,i+4)}function readInt64LE(r,i){void 0===i&&(i=0);var c=readInt32LE(r,i);return 4294967296*readInt32LE(r,i+4)+c-(c>>31)*4294967296}function readUint64LE(r,i){void 0===i&&(i=0);var c=readUint32LE(r,i);return 4294967296*readUint32LE(r,i+4)+c}function writeUint64BE(r,i,c){return void 0===i&&(i=new Uint8Array(8)),void 0===c&&(c=0),writeUint32BE(r/4294967296>>>0,i,c),writeUint32BE(r>>>0,i,c+4),i}function writeUint64LE(r,i,c){return void 0===i&&(i=new Uint8Array(8)),void 0===c&&(c=0),writeUint32LE(r>>>0,i,c),writeUint32LE(r/4294967296>>>0,i,c+4),i}function readUintBE(r,i,c){if(void 0===c&&(c=0),r%8!=0)throw Error("readUintBE supports only bitLengths divisible by 8");if(r/8>i.length-c)throw Error("readUintBE: array is too short for the given bitLength");for(var u=0,l=1,d=r/8+c-1;d>=c;d--)u+=i[d]*l,l*=256;return u}function readUintLE(r,i,c){if(void 0===c&&(c=0),r%8!=0)throw Error("readUintLE supports only bitLengths divisible by 8");if(r/8>i.length-c)throw Error("readUintLE: array is too short for the given bitLength");for(var u=0,l=1,d=c;d<c+r/8;d++)u+=i[d]*l,l*=256;return u}function writeUintBE(r,i,c,l){if(void 0===c&&(c=new Uint8Array(r/8)),void 0===l&&(l=0),r%8!=0)throw Error("writeUintBE supports only bitLengths divisible by 8");if(!u.isSafeInteger(i))throw Error("writeUintBE value must be an integer");for(var d=1,p=r/8+l-1;p>=l;p--)c[p]=i/d&255,d*=256;return c}function writeUintLE(r,i,c,l){if(void 0===c&&(c=new Uint8Array(r/8)),void 0===l&&(l=0),r%8!=0)throw Error("writeUintLE supports only bitLengths divisible by 8");if(!u.isSafeInteger(i))throw Error("writeUintLE value must be an integer");for(var d=1,p=l;p<l+r/8;p++)c[p]=i/d&255,d*=256;return c}function readFloat32BE(r,i){return void 0===i&&(i=0),new DataView(r.buffer,r.byteOffset,r.byteLength).getFloat32(i)}function readFloat32LE(r,i){return void 0===i&&(i=0),new DataView(r.buffer,r.byteOffset,r.byteLength).getFloat32(i,!0)}function readFloat64BE(r,i){return void 0===i&&(i=0),new DataView(r.buffer,r.byteOffset,r.byteLength).getFloat64(i)}function readFloat64LE(r,i){return void 0===i&&(i=0),new DataView(r.buffer,r.byteOffset,r.byteLength).getFloat64(i,!0)}function writeFloat32BE(r,i,c){return void 0===i&&(i=new Uint8Array(4)),void 0===c&&(c=0),new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat32(c,r),i}function writeFloat32LE(r,i,c){return void 0===i&&(i=new Uint8Array(4)),void 0===c&&(c=0),new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat32(c,r,!0),i}function writeFloat64BE(r,i,c){return void 0===i&&(i=new Uint8Array(8)),void 0===c&&(c=0),new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat64(c,r),i}function writeFloat64LE(r,i,c){return void 0===i&&(i=new Uint8Array(8)),void 0===c&&(c=0),new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat64(c,r,!0),i}i.readInt16BE=readInt16BE,i.readUint16BE=readUint16BE,i.readInt16LE=readInt16LE,i.readUint16LE=readUint16LE,i.writeUint16BE=writeUint16BE,i.writeInt16BE=writeUint16BE,i.writeUint16LE=writeUint16LE,i.writeInt16LE=writeUint16LE,i.readInt32BE=readInt32BE,i.readUint32BE=readUint32BE,i.readInt32LE=readInt32LE,i.readUint32LE=readUint32LE,i.writeUint32BE=writeUint32BE,i.writeInt32BE=writeUint32BE,i.writeUint32LE=writeUint32LE,i.writeInt32LE=writeUint32LE,i.readInt64BE=readInt64BE,i.readUint64BE=readUint64BE,i.readInt64LE=readInt64LE,i.readUint64LE=readUint64LE,i.writeUint64BE=writeUint64BE,i.writeInt64BE=writeUint64BE,i.writeUint64LE=writeUint64LE,i.writeInt64LE=writeUint64LE,i.readUintBE=readUintBE,i.readUintLE=readUintLE,i.writeUintBE=writeUintBE,i.writeUintLE=writeUintLE,i.readFloat32BE=readFloat32BE,i.readFloat32LE=readFloat32LE,i.readFloat64BE=readFloat64BE,i.readFloat64LE=readFloat64LE,i.writeFloat32BE=writeFloat32BE,i.writeFloat32LE=writeFloat32LE,i.writeFloat64BE=writeFloat64BE,i.writeFloat64LE=writeFloat64LE},51040:function(r,i,c){"use strict";var u=c(48733),l=c(66508),d=c(55277),p=c(34310),g=c(51448);i.Cv=32,i.WH=12,i.pg=16;var _=new Uint8Array(16),w=function(){function ChaCha20Poly1305(r){if(this.nonceLength=i.WH,this.tagLength=i.pg,r.length!==i.Cv)throw Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(r)}return ChaCha20Poly1305.prototype.seal=function(r,i,c,l){if(r.length>16)throw Error("ChaCha20Poly1305: incorrect nonce length");var p,g=new Uint8Array(16);g.set(r,g.length-r.length);var _=new Uint8Array(32);u.stream(this._key,g,_,4);var w=i.length+this.tagLength;if(l){if(l.length!==w)throw Error("ChaCha20Poly1305: incorrect destination length");p=l}else p=new Uint8Array(w);return u.streamXOR(this._key,g,i,p,4),this._authenticate(p.subarray(p.length-this.tagLength,p.length),_,p.subarray(0,p.length-this.tagLength),c),d.wipe(g),p},ChaCha20Poly1305.prototype.open=function(r,i,c,l){if(r.length>16)throw Error("ChaCha20Poly1305: incorrect nonce length");if(i.length<this.tagLength)return null;var p,_=new Uint8Array(16);_.set(r,_.length-r.length);var w=new Uint8Array(32);u.stream(this._key,_,w,4);var S=new Uint8Array(this.tagLength);if(this._authenticate(S,w,i.subarray(0,i.length-this.tagLength),c),!g.equal(S,i.subarray(i.length-this.tagLength,i.length)))return null;var P=i.length-this.tagLength;if(l){if(l.length!==P)throw Error("ChaCha20Poly1305: incorrect destination length");p=l}else p=new Uint8Array(P);return u.streamXOR(this._key,_,i.subarray(0,i.length-this.tagLength),p,4),d.wipe(_),p},ChaCha20Poly1305.prototype.clean=function(){return d.wipe(this._key),this},ChaCha20Poly1305.prototype._authenticate=function(r,i,c,u){var g=new l.Poly1305(i);u&&(g.update(u),u.length%16>0&&g.update(_.subarray(u.length%16))),g.update(c),c.length%16>0&&g.update(_.subarray(c.length%16));var w=new Uint8Array(8);u&&p.writeUint64LE(u.length,w),g.update(w),p.writeUint64LE(c.length,w),g.update(w);for(var S=g.digest(),P=0;P<S.length;P++)r[P]=S[P];g.clean(),d.wipe(S),d.wipe(w)},ChaCha20Poly1305}();i.OK=w},48733:function(r,i,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var u=c(34310),l=c(55277);function core(r,i,c){for(var l=c[3]<<24|c[2]<<16|c[1]<<8|c[0],d=c[7]<<24|c[6]<<16|c[5]<<8|c[4],p=c[11]<<24|c[10]<<16|c[9]<<8|c[8],g=c[15]<<24|c[14]<<16|c[13]<<8|c[12],_=c[19]<<24|c[18]<<16|c[17]<<8|c[16],w=c[23]<<24|c[22]<<16|c[21]<<8|c[20],S=c[27]<<24|c[26]<<16|c[25]<<8|c[24],P=c[31]<<24|c[30]<<16|c[29]<<8|c[28],C=i[3]<<24|i[2]<<16|i[1]<<8|i[0],L=i[7]<<24|i[6]<<16|i[5]<<8|i[4],k=i[11]<<24|i[10]<<16|i[9]<<8|i[8],q=i[15]<<24|i[14]<<16|i[13]<<8|i[12],z=1634760805,J=857760878,Q=2036477234,X=1797285236,et=l,eo=d,ep=p,e_=g,ey=_,em=w,eb=S,ew=P,eE=C,ex=L,eS=k,eD=q,eI=0;eI<20;eI+=2)eE^=z=z+et|0,et^=ey=ey+(eE=eE>>>16|eE<<16)|0,et=et>>>20|et<<12,ex^=J=J+eo|0,eo^=em=em+(ex=ex>>>16|ex<<16)|0,eo=eo>>>20|eo<<12,eS^=Q=Q+ep|0,ep^=eb=eb+(eS=eS>>>16|eS<<16)|0,ep=ep>>>20|ep<<12,eD^=X=X+e_|0,e_^=ew=ew+(eD=eD>>>16|eD<<16)|0,e_=e_>>>20|e_<<12,eS^=Q=Q+ep|0,ep^=eb=eb+(eS=eS>>>24|eS<<8)|0,ep=ep>>>25|ep<<7,eD^=X=X+e_|0,e_^=ew=ew+(eD=eD>>>24|eD<<8)|0,e_=e_>>>25|e_<<7,ex^=J=J+eo|0,eo^=em=em+(ex=ex>>>24|ex<<8)|0,eo=eo>>>25|eo<<7,eE^=z=z+et|0,et^=ey=ey+(eE=eE>>>24|eE<<8)|0,et=et>>>25|et<<7,eD^=z=z+eo|0,eo^=eb=eb+(eD=eD>>>16|eD<<16)|0,eo=eo>>>20|eo<<12,eE^=J=J+ep|0,ep^=ew=ew+(eE=eE>>>16|eE<<16)|0,ep=ep>>>20|ep<<12,ex^=Q=Q+e_|0,e_^=ey=ey+(ex=ex>>>16|ex<<16)|0,e_=e_>>>20|e_<<12,eS^=X=X+et|0,et^=em=em+(eS=eS>>>16|eS<<16)|0,et=et>>>20|et<<12,ex^=Q=Q+e_|0,e_^=ey=ey+(ex=ex>>>24|ex<<8)|0,e_=e_>>>25|e_<<7,eS^=X=X+et|0,et^=em=em+(eS=eS>>>24|eS<<8)|0,et=et>>>25|et<<7,eE^=J=J+ep|0,ep^=ew=ew+(eE=eE>>>24|eE<<8)|0,ep=ep>>>25|ep<<7,eD^=z=z+eo|0,eo^=eb=eb+(eD=eD>>>24|eD<<8)|0,eo=eo>>>25|eo<<7;u.writeUint32LE(z+1634760805|0,r,0),u.writeUint32LE(J+857760878|0,r,4),u.writeUint32LE(Q+2036477234|0,r,8),u.writeUint32LE(X+1797285236|0,r,12),u.writeUint32LE(et+l|0,r,16),u.writeUint32LE(eo+d|0,r,20),u.writeUint32LE(ep+p|0,r,24),u.writeUint32LE(e_+g|0,r,28),u.writeUint32LE(ey+_|0,r,32),u.writeUint32LE(em+w|0,r,36),u.writeUint32LE(eb+S|0,r,40),u.writeUint32LE(ew+P|0,r,44),u.writeUint32LE(eE+C|0,r,48),u.writeUint32LE(ex+L|0,r,52),u.writeUint32LE(eS+k|0,r,56),u.writeUint32LE(eD+q|0,r,60)}function streamXOR(r,i,c,u,d){if(void 0===d&&(d=0),32!==r.length)throw Error("ChaCha: key size must be 32 bytes");if(u.length<c.length)throw Error("ChaCha: destination is shorter than source");if(0===d){if(8!==i.length&&12!==i.length)throw Error("ChaCha nonce must be 8 or 12 bytes");g=(p=new Uint8Array(16)).length-i.length,p.set(i,g)}else{if(16!==i.length)throw Error("ChaCha nonce with counter must be 16 bytes");p=i,g=d}for(var p,g,_=new Uint8Array(64),w=0;w<c.length;w+=64){core(_,p,r);for(var S=w;S<w+64&&S<c.length;S++)u[S]=c[S]^_[S-w];incrementCounter(p,0,g)}return l.wipe(_),0===d&&l.wipe(p),u}function stream(r,i,c,u){return void 0===u&&(u=0),l.wipe(c),streamXOR(r,i,c,c,u)}function incrementCounter(r,i,c){for(var u=1;c--;)u=u+(255&r[i])|0,r[i]=255&u,u>>>=8,i++;if(u>0)throw Error("ChaCha: counter overflow")}i.streamXOR=streamXOR,i.stream=stream},51448:function(r,i){"use strict";function select(r,i,c){return~(r-1)&i|r-1&c}function lessOrEqual(r,i){return(0|r)-(0|i)-1>>>31&1}function compare(r,i){if(r.length!==i.length)return 0;for(var c=0,u=0;u<r.length;u++)c|=r[u]^i[u];return 1&c-1>>>8}function equal(r,i){return 0!==r.length&&0!==i.length&&0!==compare(r,i)}Object.defineProperty(i,"__esModule",{value:!0}),i.select=select,i.lessOrEqual=lessOrEqual,i.compare=compare,i.equal=equal},80237:function(r,i,c){"use strict";i.Xx=i._w=i.aP=i.KS=i.jQ=void 0,c(35077);let u=c(52564);function gf(r){let i=new Float64Array(16);if(r)for(let c=0;c<r.length;c++)i[c]=r[c];return i}c(55277),i.jQ=64,i.KS=64,i.aP=32;let l=new Uint8Array(32);l[0]=9;let d=gf(),p=gf([1]),g=gf([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),_=gf([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),w=gf([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),S=gf([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),P=gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function set25519(r,i){for(let c=0;c<16;c++)r[c]=0|i[c]}function car25519(r){let i=1;for(let c=0;c<16;c++){let u=r[c]+i+65535;i=Math.floor(u/65536),r[c]=u-65536*i}r[0]+=i-1+37*(i-1)}function sel25519(r,i,c){let u=~(c-1);for(let c=0;c<16;c++){let l=u&(r[c]^i[c]);r[c]^=l,i[c]^=l}}function pack25519(r,i){let c=gf(),u=gf();for(let r=0;r<16;r++)u[r]=i[r];car25519(u),car25519(u),car25519(u);for(let r=0;r<2;r++){c[0]=u[0]-65517;for(let r=1;r<15;r++)c[r]=u[r]-65535-(c[r-1]>>16&1),c[r-1]&=65535;c[15]=u[15]-32767-(c[14]>>16&1);let r=c[15]>>16&1;c[14]&=65535,sel25519(u,c,1-r)}for(let i=0;i<16;i++)r[2*i]=255&u[i],r[2*i+1]=u[i]>>8}function verify32(r,i){let c=0;for(let u=0;u<32;u++)c|=r[u]^i[u];return(1&c-1>>>8)-1}function neq25519(r,i){let c=new Uint8Array(32),u=new Uint8Array(32);return pack25519(c,r),pack25519(u,i),verify32(c,u)}function par25519(r){let i=new Uint8Array(32);return pack25519(i,r),1&i[0]}function unpack25519(r,i){for(let c=0;c<16;c++)r[c]=i[2*c]+(i[2*c+1]<<8);r[15]&=32767}function add(r,i,c){for(let u=0;u<16;u++)r[u]=i[u]+c[u]}function sub(r,i,c){for(let u=0;u<16;u++)r[u]=i[u]-c[u]}function mul(r,i,c){let u,l,d=0,p=0,g=0,_=0,w=0,S=0,P=0,C=0,L=0,k=0,q=0,z=0,J=0,Q=0,X=0,et=0,eo=0,ep=0,e_=0,ey=0,em=0,eb=0,ew=0,eE=0,ex=0,eS=0,eD=0,eI=0,eO=0,eP=0,eC=0,eA=c[0],eR=c[1],eN=c[2],eT=c[3],ej=c[4],eU=c[5],eL=c[6],ek=c[7],eM=c[8],ez=c[9],eH=c[10],e$=c[11],eB=c[12],eF=c[13],eK=c[14],eV=c[15];d+=(u=i[0])*eA,p+=u*eR,g+=u*eN,_+=u*eT,w+=u*ej,S+=u*eU,P+=u*eL,C+=u*ek,L+=u*eM,k+=u*ez,q+=u*eH,z+=u*e$,J+=u*eB,Q+=u*eF,X+=u*eK,et+=u*eV,p+=(u=i[1])*eA,g+=u*eR,_+=u*eN,w+=u*eT,S+=u*ej,P+=u*eU,C+=u*eL,L+=u*ek,k+=u*eM,q+=u*ez,z+=u*eH,J+=u*e$,Q+=u*eB,X+=u*eF,et+=u*eK,eo+=u*eV,g+=(u=i[2])*eA,_+=u*eR,w+=u*eN,S+=u*eT,P+=u*ej,C+=u*eU,L+=u*eL,k+=u*ek,q+=u*eM,z+=u*ez,J+=u*eH,Q+=u*e$,X+=u*eB,et+=u*eF,eo+=u*eK,ep+=u*eV,_+=(u=i[3])*eA,w+=u*eR,S+=u*eN,P+=u*eT,C+=u*ej,L+=u*eU,k+=u*eL,q+=u*ek,z+=u*eM,J+=u*ez,Q+=u*eH,X+=u*e$,et+=u*eB,eo+=u*eF,ep+=u*eK,e_+=u*eV,w+=(u=i[4])*eA,S+=u*eR,P+=u*eN,C+=u*eT,L+=u*ej,k+=u*eU,q+=u*eL,z+=u*ek,J+=u*eM,Q+=u*ez,X+=u*eH,et+=u*e$,eo+=u*eB,ep+=u*eF,e_+=u*eK,ey+=u*eV,S+=(u=i[5])*eA,P+=u*eR,C+=u*eN,L+=u*eT,k+=u*ej,q+=u*eU,z+=u*eL,J+=u*ek,Q+=u*eM,X+=u*ez,et+=u*eH,eo+=u*e$,ep+=u*eB,e_+=u*eF,ey+=u*eK,em+=u*eV,P+=(u=i[6])*eA,C+=u*eR,L+=u*eN,k+=u*eT,q+=u*ej,z+=u*eU,J+=u*eL,Q+=u*ek,X+=u*eM,et+=u*ez,eo+=u*eH,ep+=u*e$,e_+=u*eB,ey+=u*eF,em+=u*eK,eb+=u*eV,C+=(u=i[7])*eA,L+=u*eR,k+=u*eN,q+=u*eT,z+=u*ej,J+=u*eU,Q+=u*eL,X+=u*ek,et+=u*eM,eo+=u*ez,ep+=u*eH,e_+=u*e$,ey+=u*eB,em+=u*eF,eb+=u*eK,ew+=u*eV,L+=(u=i[8])*eA,k+=u*eR,q+=u*eN,z+=u*eT,J+=u*ej,Q+=u*eU,X+=u*eL,et+=u*ek,eo+=u*eM,ep+=u*ez,e_+=u*eH,ey+=u*e$,em+=u*eB,eb+=u*eF,ew+=u*eK,eE+=u*eV,k+=(u=i[9])*eA,q+=u*eR,z+=u*eN,J+=u*eT,Q+=u*ej,X+=u*eU,et+=u*eL,eo+=u*ek,ep+=u*eM,e_+=u*ez,ey+=u*eH,em+=u*e$,eb+=u*eB,ew+=u*eF,eE+=u*eK,ex+=u*eV,q+=(u=i[10])*eA,z+=u*eR,J+=u*eN,Q+=u*eT,X+=u*ej,et+=u*eU,eo+=u*eL,ep+=u*ek,e_+=u*eM,ey+=u*ez,em+=u*eH,eb+=u*e$,ew+=u*eB,eE+=u*eF,ex+=u*eK,eS+=u*eV,z+=(u=i[11])*eA,J+=u*eR,Q+=u*eN,X+=u*eT,et+=u*ej,eo+=u*eU,ep+=u*eL,e_+=u*ek,ey+=u*eM,em+=u*ez,eb+=u*eH,ew+=u*e$,eE+=u*eB,ex+=u*eF,eS+=u*eK,eD+=u*eV,J+=(u=i[12])*eA,Q+=u*eR,X+=u*eN,et+=u*eT,eo+=u*ej,ep+=u*eU,e_+=u*eL,ey+=u*ek,em+=u*eM,eb+=u*ez,ew+=u*eH,eE+=u*e$,ex+=u*eB,eS+=u*eF,eD+=u*eK,eI+=u*eV,Q+=(u=i[13])*eA,X+=u*eR,et+=u*eN,eo+=u*eT,ep+=u*ej,e_+=u*eU,ey+=u*eL,em+=u*ek,eb+=u*eM,ew+=u*ez,eE+=u*eH,ex+=u*e$,eS+=u*eB,eD+=u*eF,eI+=u*eK,eO+=u*eV,X+=(u=i[14])*eA,et+=u*eR,eo+=u*eN,ep+=u*eT,e_+=u*ej,ey+=u*eU,em+=u*eL,eb+=u*ek,ew+=u*eM,eE+=u*ez,ex+=u*eH,eS+=u*e$,eD+=u*eB,eI+=u*eF,eO+=u*eK,eP+=u*eV,et+=(u=i[15])*eA,eo+=u*eR,ep+=u*eN,e_+=u*eT,ey+=u*ej,em+=u*eU,eb+=u*eL,ew+=u*ek,eE+=u*eM,ex+=u*ez,eS+=u*eH,eD+=u*e$,eI+=u*eB,eO+=u*eF,eP+=u*eK,eC+=u*eV,d+=38*eo,p+=38*ep,g+=38*e_,_+=38*ey,w+=38*em,S+=38*eb,P+=38*ew,C+=38*eE,L+=38*ex,k+=38*eS,q+=38*eD,z+=38*eI,J+=38*eO,Q+=38*eP,X+=38*eC,l=Math.floor((u=d+(l=1)+65535)/65536),d=u-65536*l,l=Math.floor((u=p+l+65535)/65536),p=u-65536*l,l=Math.floor((u=g+l+65535)/65536),g=u-65536*l,l=Math.floor((u=_+l+65535)/65536),_=u-65536*l,l=Math.floor((u=w+l+65535)/65536),w=u-65536*l,l=Math.floor((u=S+l+65535)/65536),S=u-65536*l,l=Math.floor((u=P+l+65535)/65536),P=u-65536*l,l=Math.floor((u=C+l+65535)/65536),C=u-65536*l,l=Math.floor((u=L+l+65535)/65536),L=u-65536*l,l=Math.floor((u=k+l+65535)/65536),k=u-65536*l,l=Math.floor((u=q+l+65535)/65536),q=u-65536*l,l=Math.floor((u=z+l+65535)/65536),z=u-65536*l,l=Math.floor((u=J+l+65535)/65536),J=u-65536*l,l=Math.floor((u=Q+l+65535)/65536),Q=u-65536*l,l=Math.floor((u=X+l+65535)/65536),X=u-65536*l,l=Math.floor((u=et+l+65535)/65536),et=u-65536*l,d+=l-1+37*(l-1),l=Math.floor((u=d+(l=1)+65535)/65536),d=u-65536*l,l=Math.floor((u=p+l+65535)/65536),p=u-65536*l,l=Math.floor((u=g+l+65535)/65536),g=u-65536*l,l=Math.floor((u=_+l+65535)/65536),_=u-65536*l,l=Math.floor((u=w+l+65535)/65536),w=u-65536*l,l=Math.floor((u=S+l+65535)/65536),S=u-65536*l,l=Math.floor((u=P+l+65535)/65536),P=u-65536*l,l=Math.floor((u=C+l+65535)/65536),C=u-65536*l,l=Math.floor((u=L+l+65535)/65536),L=u-65536*l,l=Math.floor((u=k+l+65535)/65536),k=u-65536*l,l=Math.floor((u=q+l+65535)/65536),q=u-65536*l,l=Math.floor((u=z+l+65535)/65536),z=u-65536*l,l=Math.floor((u=J+l+65535)/65536),J=u-65536*l,l=Math.floor((u=Q+l+65535)/65536),Q=u-65536*l,l=Math.floor((u=X+l+65535)/65536),X=u-65536*l,l=Math.floor((u=et+l+65535)/65536),et=u-65536*l,d+=l-1+37*(l-1),r[0]=d,r[1]=p,r[2]=g,r[3]=_,r[4]=w,r[5]=S,r[6]=P,r[7]=C,r[8]=L,r[9]=k,r[10]=q,r[11]=z,r[12]=J,r[13]=Q,r[14]=X,r[15]=et}function inv25519(r,i){let c;let u=gf();for(c=0;c<16;c++)u[c]=i[c];for(c=253;c>=0;c--)mul(u,u,u),2!==c&&4!==c&&mul(u,u,i);for(c=0;c<16;c++)r[c]=u[c]}function pow2523(r,i){let c;let u=gf();for(c=0;c<16;c++)u[c]=i[c];for(c=250;c>=0;c--)mul(u,u,u),1!==c&&mul(u,u,i);for(c=0;c<16;c++)r[c]=u[c]}function edadd(r,i){let c=gf(),u=gf(),l=gf(),d=gf(),p=gf(),g=gf(),w=gf(),S=gf(),P=gf();sub(c,r[1],r[0]),sub(P,i[1],i[0]),mul(c,c,P),add(u,r[0],r[1]),add(P,i[0],i[1]),mul(u,u,P),mul(l,r[3],i[3]),mul(l,l,_),mul(d,r[2],i[2]),add(d,d,d),sub(p,u,c),sub(g,d,l),add(w,d,l),add(S,u,c),mul(r[0],p,g),mul(r[1],S,w),mul(r[2],w,g),mul(r[3],p,S)}function cswap(r,i,c){for(let u=0;u<4;u++)sel25519(r[u],i[u],c)}function pack(r,i){let c=gf(),u=gf(),l=gf();inv25519(l,i[2]),mul(c,i[0],l),mul(u,i[1],l),pack25519(r,u),r[31]^=par25519(c)<<7}function scalarmult(r,i,c){set25519(r[0],d),set25519(r[1],p),set25519(r[2],p),set25519(r[3],d);for(let u=255;u>=0;--u){let l=c[u/8|0]>>(7&u)&1;cswap(r,i,l),edadd(i,r),edadd(r,r),cswap(r,i,l)}}function scalarbase(r,i){let c=[gf(),gf(),gf(),gf()];set25519(c[0],w),set25519(c[1],S),set25519(c[2],p),mul(c[3],w,S),scalarmult(r,c,i)}function generateKeyPairFromSeed(r){if(r.length!==i.aP)throw Error(`ed25519: seed must be ${i.aP} bytes`);let c=(0,u.hash)(r);c[0]&=248,c[31]&=127,c[31]|=64;let l=new Uint8Array(32),d=[gf(),gf(),gf(),gf()];scalarbase(d,c),pack(l,d);let p=new Uint8Array(64);return p.set(r),p.set(l,32),{publicKey:l,secretKey:p}}i._w=generateKeyPairFromSeed;let C=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function modL(r,i){let c,u,l,d;for(u=63;u>=32;--u){for(c=0,l=u-32,d=u-12;l<d;++l)i[l]+=c-16*i[u]*C[l-(u-32)],c=Math.floor((i[l]+128)/256),i[l]-=256*c;i[l]+=c,i[u]=0}for(l=0,c=0;l<32;l++)i[l]+=c-(i[31]>>4)*C[l],c=i[l]>>8,i[l]&=255;for(l=0;l<32;l++)i[l]-=c*C[l];for(u=0;u<32;u++)i[u+1]+=i[u]>>8,r[u]=255&i[u]}function reduce(r){let i=new Float64Array(64);for(let c=0;c<64;c++)i[c]=r[c];for(let i=0;i<64;i++)r[i]=0;modL(r,i)}function sign(r,i){let c=new Float64Array(64),l=[gf(),gf(),gf(),gf()],d=(0,u.hash)(r.subarray(0,32));d[0]&=248,d[31]&=127,d[31]|=64;let p=new Uint8Array(64);p.set(d.subarray(32),32);let g=new u.SHA512;g.update(p.subarray(32)),g.update(i);let _=g.digest();g.clean(),reduce(_),scalarbase(l,_),pack(p,l),g.reset(),g.update(p.subarray(0,32)),g.update(r.subarray(32)),g.update(i);let w=g.digest();reduce(w);for(let r=0;r<32;r++)c[r]=_[r];for(let r=0;r<32;r++)for(let i=0;i<32;i++)c[r+i]+=w[r]*d[i];return modL(p.subarray(32),c),p}i.Xx=sign},12621:function(r,i){"use strict";function isSerializableHash(r){return void 0!==r.saveState&&void 0!==r.restoreState&&void 0!==r.cleanSavedState}Object.defineProperty(i,"__esModule",{value:!0}),i.isSerializableHash=isSerializableHash},20342:function(r,i,c){"use strict";var u=c(9922),l=c(55277),d=function(){function HKDF(r,i,c,l){void 0===c&&(c=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=r,this._info=l;var d=u.hmac(this._hash,c,i);this._hmac=new u.HMAC(r,d),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return HKDF.prototype._fillBuffer=function(){this._counter[0]++;var r=this._counter[0];if(0===r)throw Error("hkdf: cannot expand more");this._hmac.reset(),r>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},HKDF.prototype.expand=function(r){for(var i=new Uint8Array(r),c=0;c<i.length;c++)this._bufpos===this._buffer.length&&this._fillBuffer(),i[c]=this._buffer[this._bufpos++];return i},HKDF.prototype.clean=function(){this._hmac.clean(),l.wipe(this._buffer),l.wipe(this._counter),this._bufpos=0},HKDF}();i.t=d},9922:function(r,i,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var u=c(12621),l=c(51448),d=c(55277),p=function(){function HMAC(r,i){this._finished=!1,this._inner=new r,this._outer=new r,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var c=new Uint8Array(this.blockSize);i.length>this.blockSize?this._inner.update(i).finish(c).clean():c.set(i);for(var l=0;l<c.length;l++)c[l]^=54;this._inner.update(c);for(var l=0;l<c.length;l++)c[l]^=106;this._outer.update(c),u.isSerializableHash(this._inner)&&u.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),d.wipe(c)}return HMAC.prototype.reset=function(){if(!u.isSerializableHash(this._inner)||!u.isSerializableHash(this._outer))throw Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},HMAC.prototype.clean=function(){u.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),u.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},HMAC.prototype.update=function(r){return this._inner.update(r),this},HMAC.prototype.finish=function(r){return this._finished?this._outer.finish(r):(this._inner.finish(r),this._outer.update(r.subarray(0,this.digestLength)).finish(r),this._finished=!0),this},HMAC.prototype.digest=function(){var r=new Uint8Array(this.digestLength);return this.finish(r),r},HMAC.prototype.saveState=function(){if(!u.isSerializableHash(this._inner))throw Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},HMAC.prototype.restoreState=function(r){if(!u.isSerializableHash(this._inner)||!u.isSerializableHash(this._outer))throw Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(r),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},HMAC.prototype.cleanSavedState=function(r){if(!u.isSerializableHash(this._inner))throw Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(r)},HMAC}();function hmac(r,i,c){var u=new p(r,i);u.update(c);var l=u.digest();return u.clean(),l}i.HMAC=p,i.hmac=hmac,i.equal=l.equal},62140:function(r,i){"use strict";function imulShim(r,i){var c=65535&r,u=65535&i;return c*u+((r>>>16&65535)*u+c*(i>>>16&65535)<<16>>>0)|0}function add(r,i){return r+i|0}function sub(r,i){return r-i|0}function rotl(r,i){return r<<i|r>>>32-i}function rotr(r,i){return r<<32-i|r>>>i}function isIntegerShim(r){return"number"==typeof r&&isFinite(r)&&Math.floor(r)===r}Object.defineProperty(i,"__esModule",{value:!0}),i.mul=Math.imul||imulShim,i.add=add,i.sub=sub,i.rotl=rotl,i.rotr=rotr,i.isInteger=Number.isInteger||isIntegerShim,i.MAX_SAFE_INTEGER=9007199254740991,i.isSafeInteger=function(r){return i.isInteger(r)&&r>=-i.MAX_SAFE_INTEGER&&r<=i.MAX_SAFE_INTEGER}},66508:function(r,i,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var u=c(51448),l=c(55277);i.DIGEST_LENGTH=16;var d=function(){function Poly1305(r){this.digestLength=i.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var c=r[0]|r[1]<<8;this._r[0]=8191&c;var u=r[2]|r[3]<<8;this._r[1]=(c>>>13|u<<3)&8191;var l=r[4]|r[5]<<8;this._r[2]=(u>>>10|l<<6)&7939;var d=r[6]|r[7]<<8;this._r[3]=(l>>>7|d<<9)&8191;var p=r[8]|r[9]<<8;this._r[4]=(d>>>4|p<<12)&255,this._r[5]=p>>>1&8190;var g=r[10]|r[11]<<8;this._r[6]=(p>>>14|g<<2)&8191;var _=r[12]|r[13]<<8;this._r[7]=(g>>>11|_<<5)&8065;var w=r[14]|r[15]<<8;this._r[8]=(_>>>8|w<<8)&8191,this._r[9]=w>>>5&127,this._pad[0]=r[16]|r[17]<<8,this._pad[1]=r[18]|r[19]<<8,this._pad[2]=r[20]|r[21]<<8,this._pad[3]=r[22]|r[23]<<8,this._pad[4]=r[24]|r[25]<<8,this._pad[5]=r[26]|r[27]<<8,this._pad[6]=r[28]|r[29]<<8,this._pad[7]=r[30]|r[31]<<8}return Poly1305.prototype._blocks=function(r,i,c){for(var u=this._fin?0:2048,l=this._h[0],d=this._h[1],p=this._h[2],g=this._h[3],_=this._h[4],w=this._h[5],S=this._h[6],P=this._h[7],C=this._h[8],L=this._h[9],k=this._r[0],q=this._r[1],z=this._r[2],J=this._r[3],Q=this._r[4],X=this._r[5],et=this._r[6],eo=this._r[7],ep=this._r[8],e_=this._r[9];c>=16;){var ey,em=r[i+0]|r[i+1]<<8;l+=8191&em;var eb=r[i+2]|r[i+3]<<8;d+=(em>>>13|eb<<3)&8191;var ew=r[i+4]|r[i+5]<<8;p+=(eb>>>10|ew<<6)&8191;var eE=r[i+6]|r[i+7]<<8;g+=(ew>>>7|eE<<9)&8191;var ex=r[i+8]|r[i+9]<<8;_+=(eE>>>4|ex<<12)&8191,w+=ex>>>1&8191;var eS=r[i+10]|r[i+11]<<8;S+=(ex>>>14|eS<<2)&8191;var eD=r[i+12]|r[i+13]<<8;P+=(eS>>>11|eD<<5)&8191;var eI=r[i+14]|r[i+15]<<8;C+=(eD>>>8|eI<<8)&8191,L+=eI>>>5|u;var eO=0;eO=(ey=0+l*k+d*(5*e_)+p*(5*ep)+g*(5*eo)+_*(5*et))>>>13,ey&=8191,ey+=w*(5*X)+S*(5*Q)+P*(5*J)+C*(5*z)+L*(5*q),eO+=ey>>>13,ey&=8191;var eP=eO;eP+=l*q+d*k+p*(5*e_)+g*(5*ep)+_*(5*eo),eO=eP>>>13,eP&=8191,eP+=w*(5*et)+S*(5*X)+P*(5*Q)+C*(5*J)+L*(5*z),eO+=eP>>>13,eP&=8191;var eC=eO;eC+=l*z+d*q+p*k+g*(5*e_)+_*(5*ep),eO=eC>>>13,eC&=8191,eC+=w*(5*eo)+S*(5*et)+P*(5*X)+C*(5*Q)+L*(5*J),eO+=eC>>>13,eC&=8191;var eA=eO;eA+=l*J+d*z+p*q+g*k+_*(5*e_),eO=eA>>>13,eA&=8191,eA+=w*(5*ep)+S*(5*eo)+P*(5*et)+C*(5*X)+L*(5*Q),eO+=eA>>>13,eA&=8191;var eR=eO;eR+=l*Q+d*J+p*z+g*q+_*k,eO=eR>>>13,eR&=8191,eR+=w*(5*e_)+S*(5*ep)+P*(5*eo)+C*(5*et)+L*(5*X),eO+=eR>>>13,eR&=8191;var eN=eO;eN+=l*X+d*Q+p*J+g*z+_*q,eO=eN>>>13,eN&=8191,eN+=w*k+S*(5*e_)+P*(5*ep)+C*(5*eo)+L*(5*et),eO+=eN>>>13,eN&=8191;var eT=eO;eT+=l*et+d*X+p*Q+g*J+_*z,eO=eT>>>13,eT&=8191,eT+=w*q+S*k+P*(5*e_)+C*(5*ep)+L*(5*eo),eO+=eT>>>13,eT&=8191;var ej=eO;ej+=l*eo+d*et+p*X+g*Q+_*J,eO=ej>>>13,ej&=8191,ej+=w*z+S*q+P*k+C*(5*e_)+L*(5*ep),eO+=ej>>>13,ej&=8191;var eU=eO;eU+=l*ep+d*eo+p*et+g*X+_*Q,eO=eU>>>13,eU&=8191,eU+=w*J+S*z+P*q+C*k+L*(5*e_),eO+=eU>>>13,eU&=8191;var eL=eO;eL+=l*e_+d*ep+p*eo+g*et+_*X,eO=eL>>>13,eL&=8191,eL+=w*Q+S*J+P*z+C*q+L*k,eO+=eL>>>13,eL&=8191,ey=8191&(eO=(eO=(eO<<2)+eO|0)+ey|0),eO>>>=13,eP+=eO,l=ey,d=eP,p=eC,g=eA,_=eR,w=eN,S=eT,P=ej,C=eU,L=eL,i+=16,c-=16}this._h[0]=l,this._h[1]=d,this._h[2]=p,this._h[3]=g,this._h[4]=_,this._h[5]=w,this._h[6]=S,this._h[7]=P,this._h[8]=C,this._h[9]=L},Poly1305.prototype.finish=function(r,i){void 0===i&&(i=0);var c,u,l,d,p=new Uint16Array(10);if(this._leftover){for(d=this._leftover,this._buffer[d++]=1;d<16;d++)this._buffer[d]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(c=this._h[1]>>>13,this._h[1]&=8191,d=2;d<10;d++)this._h[d]+=c,c=this._h[d]>>>13,this._h[d]&=8191;for(this._h[0]+=5*c,c=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=c,c=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=c,p[0]=this._h[0]+5,c=p[0]>>>13,p[0]&=8191,d=1;d<10;d++)p[d]=this._h[d]+c,c=p[d]>>>13,p[d]&=8191;for(p[9]-=8192,u=(1^c)-1,d=0;d<10;d++)p[d]&=u;for(d=0,u=~u;d<10;d++)this._h[d]=this._h[d]&u|p[d];for(d=1,this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,l=this._h[0]+this._pad[0],this._h[0]=65535&l;d<8;d++)l=(this._h[d]+this._pad[d]|0)+(l>>>16)|0,this._h[d]=65535&l;return r[i+0]=this._h[0]>>>0,r[i+1]=this._h[0]>>>8,r[i+2]=this._h[1]>>>0,r[i+3]=this._h[1]>>>8,r[i+4]=this._h[2]>>>0,r[i+5]=this._h[2]>>>8,r[i+6]=this._h[3]>>>0,r[i+7]=this._h[3]>>>8,r[i+8]=this._h[4]>>>0,r[i+9]=this._h[4]>>>8,r[i+10]=this._h[5]>>>0,r[i+11]=this._h[5]>>>8,r[i+12]=this._h[6]>>>0,r[i+13]=this._h[6]>>>8,r[i+14]=this._h[7]>>>0,r[i+15]=this._h[7]>>>8,this._finished=!0,this},Poly1305.prototype.update=function(r){var i,c=0,u=r.length;if(this._leftover){(i=16-this._leftover)>u&&(i=u);for(var l=0;l<i;l++)this._buffer[this._leftover+l]=r[c+l];if(u-=i,c+=i,this._leftover+=i,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(u>=16&&(i=u-u%16,this._blocks(r,c,i),c+=i,u-=i),u){for(var l=0;l<u;l++)this._buffer[this._leftover+l]=r[c+l];this._leftover+=u}return this},Poly1305.prototype.digest=function(){if(this._finished)throw Error("Poly1305 was finished");var r=new Uint8Array(16);return this.finish(r),r},Poly1305.prototype.clean=function(){return l.wipe(this._buffer),l.wipe(this._r),l.wipe(this._h),l.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},Poly1305}();function oneTimeAuth(r,i){var c=new d(r);c.update(i);var u=c.digest();return c.clean(),u}function equal(r,c){return r.length===i.DIGEST_LENGTH&&c.length===i.DIGEST_LENGTH&&u.equal(r,c)}i.Poly1305=d,i.oneTimeAuth=oneTimeAuth,i.equal=equal},35077:function(r,i,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.randomStringForEntropy=i.randomString=i.randomUint32=i.randomBytes=i.defaultRandomSource=void 0;let u=c(62739),l=c(34310),d=c(55277);function randomBytes(r,c=i.defaultRandomSource){return c.randomBytes(r)}function randomUint32(r=i.defaultRandomSource){let c=randomBytes(4,r),u=(0,l.readUint32LE)(c);return(0,d.wipe)(c),u}i.defaultRandomSource=new u.SystemRandomSource,i.randomBytes=randomBytes,i.randomUint32=randomUint32;let p="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function randomString(r,c=p,u=i.defaultRandomSource){if(c.length<2)throw Error("randomString charset is too short");if(c.length>256)throw Error("randomString charset is too long");let l="",g=c.length,_=256-256%g;for(;r>0;){let i=randomBytes(Math.ceil(256*r/_),u);for(let u=0;u<i.length&&r>0;u++){let d=i[u];d<_&&(l+=c.charAt(d%g),r--)}(0,d.wipe)(i)}return l}function randomStringForEntropy(r,c=p,u=i.defaultRandomSource){let l=Math.ceil(r/(Math.log(c.length)/Math.LN2));return randomString(l,c,u)}i.randomString=randomString,i.randomStringForEntropy=randomStringForEntropy},85183:function(r,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.BrowserRandomSource=void 0;let BrowserRandomSource=class BrowserRandomSource{constructor(){this.isAvailable=!1,this.isInstantiated=!1;let r="undefined"!=typeof self?self.crypto||self.msCrypto:null;r&&void 0!==r.getRandomValues&&(this._crypto=r,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(r){if(!this.isAvailable||!this._crypto)throw Error("Browser random byte generator is not available.");let i=new Uint8Array(r);for(let r=0;r<i.length;r+=65536)this._crypto.getRandomValues(i.subarray(r,r+Math.min(i.length-r,65536)));return i}};i.BrowserRandomSource=BrowserRandomSource},32586:function(r,i,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.NodeRandomSource=void 0;let u=c(55277);let NodeRandomSource=class NodeRandomSource{constructor(){this.isAvailable=!1,this.isInstantiated=!1;{let r=c(35883);r&&r.randomBytes&&(this._crypto=r,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(r){if(!this.isAvailable||!this._crypto)throw Error("Node.js random byte generator is not available.");let i=this._crypto.randomBytes(r);if(i.length!==r)throw Error("NodeRandomSource: got fewer bytes than requested");let c=new Uint8Array(r);for(let r=0;r<c.length;r++)c[r]=i[r];return(0,u.wipe)(i),c}};i.NodeRandomSource=NodeRandomSource},62739:function(r,i,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.SystemRandomSource=void 0;let u=c(85183),l=c(32586);let SystemRandomSource=class SystemRandomSource{constructor(){if(this.isAvailable=!1,this.name="",this._source=new u.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new l.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(r){if(!this.isAvailable)throw Error("System random byte generator is not available.");return this._source.randomBytes(r)}};i.SystemRandomSource=SystemRandomSource},87853:function(r,i,c){"use strict";var u=c(34310),l=c(55277);i.k=32,i.cn=64;var d=function(){function SHA256(){this.digestLength=i.k,this.blockSize=i.cn,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return SHA256.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},SHA256.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},SHA256.prototype.clean=function(){l.wipe(this._buffer),l.wipe(this._temp),this.reset()},SHA256.prototype.update=function(r,i){if(void 0===i&&(i=r.length),this._finished)throw Error("SHA256: can't update because hash was finished.");var c=0;if(this._bytesHashed+=i,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&i>0;)this._buffer[this._bufferLength++]=r[c++],i--;this._bufferLength===this.blockSize&&(hashBlocks(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(i>=this.blockSize&&(c=hashBlocks(this._temp,this._state,r,c,i),i%=this.blockSize);i>0;)this._buffer[this._bufferLength++]=r[c++],i--;return this},SHA256.prototype.finish=function(r){if(!this._finished){var i=this._bytesHashed,c=this._bufferLength,l=i%64<56?64:128;this._buffer[c]=128;for(var d=c+1;d<l-8;d++)this._buffer[d]=0;u.writeUint32BE(i/536870912|0,this._buffer,l-8),u.writeUint32BE(i<<3,this._buffer,l-4),hashBlocks(this._temp,this._state,this._buffer,0,l),this._finished=!0}for(var d=0;d<this.digestLength/4;d++)u.writeUint32BE(this._state[d],r,4*d);return this},SHA256.prototype.digest=function(){var r=new Uint8Array(this.digestLength);return this.finish(r),r},SHA256.prototype.saveState=function(){if(this._finished)throw Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},SHA256.prototype.restoreState=function(r){return this._state.set(r.state),this._bufferLength=r.bufferLength,r.buffer&&this._buffer.set(r.buffer),this._bytesHashed=r.bytesHashed,this._finished=!1,this},SHA256.prototype.cleanSavedState=function(r){l.wipe(r.state),r.buffer&&l.wipe(r.buffer),r.bufferLength=0,r.bytesHashed=0},SHA256}();i.mE=d;var p=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function hashBlocks(r,i,c,l,d){for(;d>=64;){for(var g=i[0],_=i[1],w=i[2],S=i[3],P=i[4],C=i[5],L=i[6],k=i[7],q=0;q<16;q++){var z=l+4*q;r[q]=u.readUint32BE(c,z)}for(var q=16;q<64;q++){var J=r[q-2],Q=(J>>>17|J<<15)^(J>>>19|J<<13)^J>>>10,X=((J=r[q-15])>>>7|J<<25)^(J>>>18|J<<14)^J>>>3;r[q]=(Q+r[q-7]|0)+(X+r[q-16]|0)}for(var q=0;q<64;q++){var Q=(((P>>>6|P<<26)^(P>>>11|P<<21)^(P>>>25|P<<7))+(P&C^~P&L)|0)+(k+(p[q]+r[q]|0)|0)|0,X=((g>>>2|g<<30)^(g>>>13|g<<19)^(g>>>22|g<<10))+(g&_^g&w^_&w)|0;k=L,L=C,C=P,P=S+Q|0,S=w,w=_,_=g,g=Q+X|0}i[0]+=g,i[1]+=_,i[2]+=w,i[3]+=S,i[4]+=P,i[5]+=C,i[6]+=L,i[7]+=k,l+=64,d-=64}return l}function hash(r){var i=new d;i.update(r);var c=i.digest();return i.clean(),c}i.vp=hash},52564:function(r,i,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var u=c(34310),l=c(55277);i.DIGEST_LENGTH=64,i.BLOCK_SIZE=128;var d=function(){function SHA512(){this.digestLength=i.DIGEST_LENGTH,this.blockSize=i.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return SHA512.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},SHA512.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},SHA512.prototype.clean=function(){l.wipe(this._buffer),l.wipe(this._tempHi),l.wipe(this._tempLo),this.reset()},SHA512.prototype.update=function(r,c){if(void 0===c&&(c=r.length),this._finished)throw Error("SHA512: can't update because hash was finished.");var u=0;if(this._bytesHashed+=c,this._bufferLength>0){for(;this._bufferLength<i.BLOCK_SIZE&&c>0;)this._buffer[this._bufferLength++]=r[u++],c--;this._bufferLength===this.blockSize&&(hashBlocks(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(c>=this.blockSize&&(u=hashBlocks(this._tempHi,this._tempLo,this._stateHi,this._stateLo,r,u,c),c%=this.blockSize);c>0;)this._buffer[this._bufferLength++]=r[u++],c--;return this},SHA512.prototype.finish=function(r){if(!this._finished){var i=this._bytesHashed,c=this._bufferLength,l=i%128<112?128:256;this._buffer[c]=128;for(var d=c+1;d<l-8;d++)this._buffer[d]=0;u.writeUint32BE(i/536870912|0,this._buffer,l-8),u.writeUint32BE(i<<3,this._buffer,l-4),hashBlocks(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,l),this._finished=!0}for(var d=0;d<this.digestLength/8;d++)u.writeUint32BE(this._stateHi[d],r,8*d),u.writeUint32BE(this._stateLo[d],r,8*d+4);return this},SHA512.prototype.digest=function(){var r=new Uint8Array(this.digestLength);return this.finish(r),r},SHA512.prototype.saveState=function(){if(this._finished)throw Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},SHA512.prototype.restoreState=function(r){return this._stateHi.set(r.stateHi),this._stateLo.set(r.stateLo),this._bufferLength=r.bufferLength,r.buffer&&this._buffer.set(r.buffer),this._bytesHashed=r.bytesHashed,this._finished=!1,this},SHA512.prototype.cleanSavedState=function(r){l.wipe(r.stateHi),l.wipe(r.stateLo),r.buffer&&l.wipe(r.buffer),r.bufferLength=0,r.bytesHashed=0},SHA512}();i.SHA512=d;var p=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function hashBlocks(r,i,c,l,d,g,_){for(var w,S,P,C,L,k,q,z,J=c[0],Q=c[1],X=c[2],et=c[3],eo=c[4],ep=c[5],e_=c[6],ey=c[7],em=l[0],eb=l[1],ew=l[2],eE=l[3],ex=l[4],eS=l[5],eD=l[6],eI=l[7];_>=128;){for(var eO=0;eO<16;eO++){var eP=8*eO+g;r[eO]=u.readUint32BE(d,eP),i[eO]=u.readUint32BE(d,eP+4)}for(var eO=0;eO<80;eO++){var eC=J,eA=Q,eR=X,eN=et,eT=eo,ej=ep,eU=e_,eL=ey,ek=em,eM=eb,ez=ew,eH=eE,e$=ex,eB=eS,eF=eD,eK=eI;if(w=ey,L=65535&(S=eI),k=S>>>16,q=65535&w,z=w>>>16,w=(eo>>>14|ex<<18)^(eo>>>18|ex<<14)^(ex>>>9|eo<<23),L+=65535&(S=(ex>>>14|eo<<18)^(ex>>>18|eo<<14)^(eo>>>9|ex<<23)),k+=S>>>16,q+=65535&w,z+=w>>>16,w=eo&ep^~eo&e_,L+=65535&(S=ex&eS^~ex&eD),k+=S>>>16,q+=65535&w,z+=w>>>16,w=p[2*eO],L+=65535&(S=p[2*eO+1]),k+=S>>>16,q+=65535&w,z+=w>>>16,w=r[eO%16],L+=65535&(S=i[eO%16]),k+=S>>>16,q+=65535&w,z+=w>>>16,k+=L>>>16,q+=k>>>16,z+=q>>>16,P=65535&q|z<<16,C=65535&L|k<<16,w=P,L=65535&(S=C),k=S>>>16,q=65535&w,z=w>>>16,w=(J>>>28|em<<4)^(em>>>2|J<<30)^(em>>>7|J<<25),L+=65535&(S=(em>>>28|J<<4)^(J>>>2|em<<30)^(J>>>7|em<<25)),k+=S>>>16,q+=65535&w,z+=w>>>16,w=J&Q^J&X^Q&X,L+=65535&(S=em&eb^em&ew^eb&ew),k+=S>>>16,q+=65535&w,z+=w>>>16,k+=L>>>16,q+=k>>>16,z+=q>>>16,eL=65535&q|z<<16,eK=65535&L|k<<16,w=eN,L=65535&(S=eH),k=S>>>16,q=65535&w,z=w>>>16,w=P,L+=65535&(S=C),k+=S>>>16,q+=65535&w,z+=w>>>16,k+=L>>>16,q+=k>>>16,z+=q>>>16,eN=65535&q|z<<16,eH=65535&L|k<<16,Q=eC,X=eA,et=eR,eo=eN,ep=eT,e_=ej,ey=eU,J=eL,eb=ek,ew=eM,eE=ez,ex=eH,eS=e$,eD=eB,eI=eF,em=eK,eO%16==15)for(var eP=0;eP<16;eP++)w=r[eP],L=65535&(S=i[eP]),k=S>>>16,q=65535&w,z=w>>>16,w=r[(eP+9)%16],L+=65535&(S=i[(eP+9)%16]),k+=S>>>16,q+=65535&w,z+=w>>>16,w=((P=r[(eP+1)%16])>>>1|(C=i[(eP+1)%16])<<31)^(P>>>8|C<<24)^P>>>7,L+=65535&(S=(C>>>1|P<<31)^(C>>>8|P<<24)^(C>>>7|P<<25)),k+=S>>>16,q+=65535&w,z+=w>>>16,w=((P=r[(eP+14)%16])>>>19|(C=i[(eP+14)%16])<<13)^(C>>>29|P<<3)^P>>>6,L+=65535&(S=(C>>>19|P<<13)^(P>>>29|C<<3)^(C>>>6|P<<26)),k+=S>>>16,q+=65535&w,z+=w>>>16,k+=L>>>16,q+=k>>>16,z+=q>>>16,r[eP]=65535&q|z<<16,i[eP]=65535&L|k<<16}w=J,L=65535&(S=em),k=S>>>16,q=65535&w,z=w>>>16,w=c[0],L+=65535&(S=l[0]),k+=S>>>16,q+=65535&w,z+=w>>>16,k+=L>>>16,q+=k>>>16,z+=q>>>16,c[0]=J=65535&q|z<<16,l[0]=em=65535&L|k<<16,w=Q,L=65535&(S=eb),k=S>>>16,q=65535&w,z=w>>>16,w=c[1],L+=65535&(S=l[1]),k+=S>>>16,q+=65535&w,z+=w>>>16,k+=L>>>16,q+=k>>>16,z+=q>>>16,c[1]=Q=65535&q|z<<16,l[1]=eb=65535&L|k<<16,w=X,L=65535&(S=ew),k=S>>>16,q=65535&w,z=w>>>16,w=c[2],L+=65535&(S=l[2]),k+=S>>>16,q+=65535&w,z+=w>>>16,k+=L>>>16,q+=k>>>16,z+=q>>>16,c[2]=X=65535&q|z<<16,l[2]=ew=65535&L|k<<16,w=et,L=65535&(S=eE),k=S>>>16,q=65535&w,z=w>>>16,w=c[3],L+=65535&(S=l[3]),k+=S>>>16,q+=65535&w,z+=w>>>16,k+=L>>>16,q+=k>>>16,z+=q>>>16,c[3]=et=65535&q|z<<16,l[3]=eE=65535&L|k<<16,w=eo,L=65535&(S=ex),k=S>>>16,q=65535&w,z=w>>>16,w=c[4],L+=65535&(S=l[4]),k+=S>>>16,q+=65535&w,z+=w>>>16,k+=L>>>16,q+=k>>>16,z+=q>>>16,c[4]=eo=65535&q|z<<16,l[4]=ex=65535&L|k<<16,w=ep,L=65535&(S=eS),k=S>>>16,q=65535&w,z=w>>>16,w=c[5],L+=65535&(S=l[5]),k+=S>>>16,q+=65535&w,z+=w>>>16,k+=L>>>16,q+=k>>>16,z+=q>>>16,c[5]=ep=65535&q|z<<16,l[5]=eS=65535&L|k<<16,w=e_,L=65535&(S=eD),k=S>>>16,q=65535&w,z=w>>>16,w=c[6],L+=65535&(S=l[6]),k+=S>>>16,q+=65535&w,z+=w>>>16,k+=L>>>16,q+=k>>>16,z+=q>>>16,c[6]=e_=65535&q|z<<16,l[6]=eD=65535&L|k<<16,w=ey,L=65535&(S=eI),k=S>>>16,q=65535&w,z=w>>>16,w=c[7],L+=65535&(S=l[7]),k+=S>>>16,q+=65535&w,z+=w>>>16,k+=L>>>16,q+=k>>>16,z+=q>>>16,c[7]=ey=65535&q|z<<16,l[7]=eI=65535&L|k<<16,g+=128,_-=128}return g}function hash(r){var i=new d;i.update(r);var c=i.digest();return i.clean(),c}i.hash=hash},55277:function(r,i){"use strict";function wipe(r){for(var i=0;i<r.length;i++)r[i]=0;return r}Object.defineProperty(i,"__esModule",{value:!0}),i.wipe=wipe},38195:function(r,i,c){"use strict";i.gi=i.Au=i.KS=i.kz=void 0;let u=c(35077),l=c(55277);function gf(r){let i=new Float64Array(16);if(r)for(let c=0;c<r.length;c++)i[c]=r[c];return i}i.kz=32,i.KS=32;let d=new Uint8Array(32);d[0]=9;let p=gf([56129,1]);function car25519(r){let i=1;for(let c=0;c<16;c++){let u=r[c]+i+65535;i=Math.floor(u/65536),r[c]=u-65536*i}r[0]+=i-1+37*(i-1)}function sel25519(r,i,c){let u=~(c-1);for(let c=0;c<16;c++){let l=u&(r[c]^i[c]);r[c]^=l,i[c]^=l}}function pack25519(r,i){let c=gf(),u=gf();for(let r=0;r<16;r++)u[r]=i[r];car25519(u),car25519(u),car25519(u);for(let r=0;r<2;r++){c[0]=u[0]-65517;for(let r=1;r<15;r++)c[r]=u[r]-65535-(c[r-1]>>16&1),c[r-1]&=65535;c[15]=u[15]-32767-(c[14]>>16&1);let r=c[15]>>16&1;c[14]&=65535,sel25519(u,c,1-r)}for(let i=0;i<16;i++)r[2*i]=255&u[i],r[2*i+1]=u[i]>>8}function unpack25519(r,i){for(let c=0;c<16;c++)r[c]=i[2*c]+(i[2*c+1]<<8);r[15]&=32767}function add(r,i,c){for(let u=0;u<16;u++)r[u]=i[u]+c[u]}function sub(r,i,c){for(let u=0;u<16;u++)r[u]=i[u]-c[u]}function mul(r,i,c){let u,l,d=0,p=0,g=0,_=0,w=0,S=0,P=0,C=0,L=0,k=0,q=0,z=0,J=0,Q=0,X=0,et=0,eo=0,ep=0,e_=0,ey=0,em=0,eb=0,ew=0,eE=0,ex=0,eS=0,eD=0,eI=0,eO=0,eP=0,eC=0,eA=c[0],eR=c[1],eN=c[2],eT=c[3],ej=c[4],eU=c[5],eL=c[6],ek=c[7],eM=c[8],ez=c[9],eH=c[10],e$=c[11],eB=c[12],eF=c[13],eK=c[14],eV=c[15];d+=(u=i[0])*eA,p+=u*eR,g+=u*eN,_+=u*eT,w+=u*ej,S+=u*eU,P+=u*eL,C+=u*ek,L+=u*eM,k+=u*ez,q+=u*eH,z+=u*e$,J+=u*eB,Q+=u*eF,X+=u*eK,et+=u*eV,p+=(u=i[1])*eA,g+=u*eR,_+=u*eN,w+=u*eT,S+=u*ej,P+=u*eU,C+=u*eL,L+=u*ek,k+=u*eM,q+=u*ez,z+=u*eH,J+=u*e$,Q+=u*eB,X+=u*eF,et+=u*eK,eo+=u*eV,g+=(u=i[2])*eA,_+=u*eR,w+=u*eN,S+=u*eT,P+=u*ej,C+=u*eU,L+=u*eL,k+=u*ek,q+=u*eM,z+=u*ez,J+=u*eH,Q+=u*e$,X+=u*eB,et+=u*eF,eo+=u*eK,ep+=u*eV,_+=(u=i[3])*eA,w+=u*eR,S+=u*eN,P+=u*eT,C+=u*ej,L+=u*eU,k+=u*eL,q+=u*ek,z+=u*eM,J+=u*ez,Q+=u*eH,X+=u*e$,et+=u*eB,eo+=u*eF,ep+=u*eK,e_+=u*eV,w+=(u=i[4])*eA,S+=u*eR,P+=u*eN,C+=u*eT,L+=u*ej,k+=u*eU,q+=u*eL,z+=u*ek,J+=u*eM,Q+=u*ez,X+=u*eH,et+=u*e$,eo+=u*eB,ep+=u*eF,e_+=u*eK,ey+=u*eV,S+=(u=i[5])*eA,P+=u*eR,C+=u*eN,L+=u*eT,k+=u*ej,q+=u*eU,z+=u*eL,J+=u*ek,Q+=u*eM,X+=u*ez,et+=u*eH,eo+=u*e$,ep+=u*eB,e_+=u*eF,ey+=u*eK,em+=u*eV,P+=(u=i[6])*eA,C+=u*eR,L+=u*eN,k+=u*eT,q+=u*ej,z+=u*eU,J+=u*eL,Q+=u*ek,X+=u*eM,et+=u*ez,eo+=u*eH,ep+=u*e$,e_+=u*eB,ey+=u*eF,em+=u*eK,eb+=u*eV,C+=(u=i[7])*eA,L+=u*eR,k+=u*eN,q+=u*eT,z+=u*ej,J+=u*eU,Q+=u*eL,X+=u*ek,et+=u*eM,eo+=u*ez,ep+=u*eH,e_+=u*e$,ey+=u*eB,em+=u*eF,eb+=u*eK,ew+=u*eV,L+=(u=i[8])*eA,k+=u*eR,q+=u*eN,z+=u*eT,J+=u*ej,Q+=u*eU,X+=u*eL,et+=u*ek,eo+=u*eM,ep+=u*ez,e_+=u*eH,ey+=u*e$,em+=u*eB,eb+=u*eF,ew+=u*eK,eE+=u*eV,k+=(u=i[9])*eA,q+=u*eR,z+=u*eN,J+=u*eT,Q+=u*ej,X+=u*eU,et+=u*eL,eo+=u*ek,ep+=u*eM,e_+=u*ez,ey+=u*eH,em+=u*e$,eb+=u*eB,ew+=u*eF,eE+=u*eK,ex+=u*eV,q+=(u=i[10])*eA,z+=u*eR,J+=u*eN,Q+=u*eT,X+=u*ej,et+=u*eU,eo+=u*eL,ep+=u*ek,e_+=u*eM,ey+=u*ez,em+=u*eH,eb+=u*e$,ew+=u*eB,eE+=u*eF,ex+=u*eK,eS+=u*eV,z+=(u=i[11])*eA,J+=u*eR,Q+=u*eN,X+=u*eT,et+=u*ej,eo+=u*eU,ep+=u*eL,e_+=u*ek,ey+=u*eM,em+=u*ez,eb+=u*eH,ew+=u*e$,eE+=u*eB,ex+=u*eF,eS+=u*eK,eD+=u*eV,J+=(u=i[12])*eA,Q+=u*eR,X+=u*eN,et+=u*eT,eo+=u*ej,ep+=u*eU,e_+=u*eL,ey+=u*ek,em+=u*eM,eb+=u*ez,ew+=u*eH,eE+=u*e$,ex+=u*eB,eS+=u*eF,eD+=u*eK,eI+=u*eV,Q+=(u=i[13])*eA,X+=u*eR,et+=u*eN,eo+=u*eT,ep+=u*ej,e_+=u*eU,ey+=u*eL,em+=u*ek,eb+=u*eM,ew+=u*ez,eE+=u*eH,ex+=u*e$,eS+=u*eB,eD+=u*eF,eI+=u*eK,eO+=u*eV,X+=(u=i[14])*eA,et+=u*eR,eo+=u*eN,ep+=u*eT,e_+=u*ej,ey+=u*eU,em+=u*eL,eb+=u*ek,ew+=u*eM,eE+=u*ez,ex+=u*eH,eS+=u*e$,eD+=u*eB,eI+=u*eF,eO+=u*eK,eP+=u*eV,et+=(u=i[15])*eA,eo+=u*eR,ep+=u*eN,e_+=u*eT,ey+=u*ej,em+=u*eU,eb+=u*eL,ew+=u*ek,eE+=u*eM,ex+=u*ez,eS+=u*eH,eD+=u*e$,eI+=u*eB,eO+=u*eF,eP+=u*eK,eC+=u*eV,d+=38*eo,p+=38*ep,g+=38*e_,_+=38*ey,w+=38*em,S+=38*eb,P+=38*ew,C+=38*eE,L+=38*ex,k+=38*eS,q+=38*eD,z+=38*eI,J+=38*eO,Q+=38*eP,X+=38*eC,l=Math.floor((u=d+(l=1)+65535)/65536),d=u-65536*l,l=Math.floor((u=p+l+65535)/65536),p=u-65536*l,l=Math.floor((u=g+l+65535)/65536),g=u-65536*l,l=Math.floor((u=_+l+65535)/65536),_=u-65536*l,l=Math.floor((u=w+l+65535)/65536),w=u-65536*l,l=Math.floor((u=S+l+65535)/65536),S=u-65536*l,l=Math.floor((u=P+l+65535)/65536),P=u-65536*l,l=Math.floor((u=C+l+65535)/65536),C=u-65536*l,l=Math.floor((u=L+l+65535)/65536),L=u-65536*l,l=Math.floor((u=k+l+65535)/65536),k=u-65536*l,l=Math.floor((u=q+l+65535)/65536),q=u-65536*l,l=Math.floor((u=z+l+65535)/65536),z=u-65536*l,l=Math.floor((u=J+l+65535)/65536),J=u-65536*l,l=Math.floor((u=Q+l+65535)/65536),Q=u-65536*l,l=Math.floor((u=X+l+65535)/65536),X=u-65536*l,l=Math.floor((u=et+l+65535)/65536),et=u-65536*l,d+=l-1+37*(l-1),l=Math.floor((u=d+(l=1)+65535)/65536),d=u-65536*l,l=Math.floor((u=p+l+65535)/65536),p=u-65536*l,l=Math.floor((u=g+l+65535)/65536),g=u-65536*l,l=Math.floor((u=_+l+65535)/65536),_=u-65536*l,l=Math.floor((u=w+l+65535)/65536),w=u-65536*l,l=Math.floor((u=S+l+65535)/65536),S=u-65536*l,l=Math.floor((u=P+l+65535)/65536),P=u-65536*l,l=Math.floor((u=C+l+65535)/65536),C=u-65536*l,l=Math.floor((u=L+l+65535)/65536),L=u-65536*l,l=Math.floor((u=k+l+65535)/65536),k=u-65536*l,l=Math.floor((u=q+l+65535)/65536),q=u-65536*l,l=Math.floor((u=z+l+65535)/65536),z=u-65536*l,l=Math.floor((u=J+l+65535)/65536),J=u-65536*l,l=Math.floor((u=Q+l+65535)/65536),Q=u-65536*l,l=Math.floor((u=X+l+65535)/65536),X=u-65536*l,l=Math.floor((u=et+l+65535)/65536),et=u-65536*l,d+=l-1+37*(l-1),r[0]=d,r[1]=p,r[2]=g,r[3]=_,r[4]=w,r[5]=S,r[6]=P,r[7]=C,r[8]=L,r[9]=k,r[10]=q,r[11]=z,r[12]=J,r[13]=Q,r[14]=X,r[15]=et}function inv25519(r,i){let c=gf();for(let r=0;r<16;r++)c[r]=i[r];for(let r=253;r>=0;r--)mul(c,c,c),2!==r&&4!==r&&mul(c,c,i);for(let i=0;i<16;i++)r[i]=c[i]}function scalarMult(r,i){let c=new Uint8Array(32),u=new Float64Array(80),l=gf(),d=gf(),g=gf(),_=gf(),w=gf(),S=gf();for(let i=0;i<31;i++)c[i]=r[i];c[31]=127&r[31]|64,c[0]&=248,unpack25519(u,i);for(let r=0;r<16;r++)d[r]=u[r];l[0]=_[0]=1;for(let r=254;r>=0;--r){let i=c[r>>>3]>>>(7&r)&1;sel25519(l,d,i),sel25519(g,_,i),add(w,l,g),sub(l,l,g),add(g,d,_),sub(d,d,_),mul(_,w,w),mul(S,l,l),mul(l,g,l),mul(g,d,w),add(w,l,g),sub(l,l,g),mul(d,l,l),sub(g,_,S),mul(l,g,p),add(l,l,_),mul(g,g,l),mul(l,_,S),mul(_,d,u),mul(d,w,w),sel25519(l,d,i),sel25519(g,_,i)}for(let r=0;r<16;r++)u[r+16]=l[r],u[r+32]=g[r],u[r+48]=d[r],u[r+64]=_[r];let P=u.subarray(32),C=u.subarray(16);inv25519(P,P),mul(C,C,P);let L=new Uint8Array(32);return pack25519(L,C),L}function scalarMultBase(r){return scalarMult(r,d)}function generateKeyPairFromSeed(r){if(r.length!==i.KS)throw Error(`x25519: seed must be ${i.KS} bytes`);let c=new Uint8Array(r),u=scalarMultBase(c);return{publicKey:u,secretKey:c}}function generateKeyPair(r){let i=(0,u.randomBytes)(32,r),c=generateKeyPairFromSeed(i);return(0,l.wipe)(i),c}function sharedKey(r,c,u=!1){if(r.length!==i.kz)throw Error("X25519: incorrect secret key length");if(c.length!==i.kz)throw Error("X25519: incorrect public key length");let l=scalarMult(r,c);if(u){let r=0;for(let i=0;i<l.length;i++)r|=l[i];if(0===r)throw Error("X25519: invalid shared key")}return l}i.Au=generateKeyPair,i.gi=sharedKey},81431:function(r,i,c){"use strict";function getBrowerCrypto(){return(null===c.g||void 0===c.g?void 0:c.g.crypto)||(null===c.g||void 0===c.g?void 0:c.g.msCrypto)||{}}function getSubtleCrypto(){let r=getBrowerCrypto();return r.subtle||r.webkitSubtle}function isBrowserCryptoAvailable(){return!!getBrowerCrypto()&&!!getSubtleCrypto()}Object.defineProperty(i,"__esModule",{value:!0}),i.isBrowserCryptoAvailable=i.getSubtleCrypto=i.getBrowerCrypto=void 0,i.getBrowerCrypto=getBrowerCrypto,i.getSubtleCrypto=getSubtleCrypto,i.isBrowserCryptoAvailable=isBrowserCryptoAvailable},51164:function(r,i,c){"use strict";var u=c(25566);function isReactNative(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product}function isNode(){return void 0!==u&&void 0!==u.versions&&void 0!==u.versions.node}function isBrowser(){return!isReactNative()&&!isNode()}Object.defineProperty(i,"__esModule",{value:!0}),i.isBrowser=i.isNode=i.isReactNative=void 0,i.isReactNative=isReactNative,i.isNode=isNode,i.isBrowser=isBrowser},36014:function(r,i,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0});let u=c(75031);u.__exportStar(c(81431),i),u.__exportStar(c(51164),i)},75031:function(r,i,c){"use strict";c.r(i),c.d(i,{__assign:function(){return __assign},__asyncDelegator:function(){return __asyncDelegator},__asyncGenerator:function(){return __asyncGenerator},__asyncValues:function(){return __asyncValues},__await:function(){return __await},__awaiter:function(){return __awaiter},__classPrivateFieldGet:function(){return __classPrivateFieldGet},__classPrivateFieldSet:function(){return __classPrivateFieldSet},__createBinding:function(){return __createBinding},__decorate:function(){return __decorate},__exportStar:function(){return __exportStar},__extends:function(){return __extends},__generator:function(){return __generator},__importDefault:function(){return __importDefault},__importStar:function(){return __importStar},__makeTemplateObject:function(){return __makeTemplateObject},__metadata:function(){return __metadata},__param:function(){return __param},__read:function(){return __read},__rest:function(){return __rest},__spread:function(){return __spread},__spreadArrays:function(){return __spreadArrays},__values:function(){return __values}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(r,i){return(extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var c in i)i.hasOwnProperty(c)&&(r[c]=i[c])})(r,i)};function __extends(r,i){function __(){this.constructor=r}extendStatics(r,i),r.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function(r){for(var i,c=1,u=arguments.length;c<u;c++)for(var l in i=arguments[c])Object.prototype.hasOwnProperty.call(i,l)&&(r[l]=i[l]);return r}).apply(this,arguments)};function __rest(r,i){var c={};for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&0>i.indexOf(u)&&(c[u]=r[u]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,u=Object.getOwnPropertySymbols(r);l<u.length;l++)0>i.indexOf(u[l])&&Object.prototype.propertyIsEnumerable.call(r,u[l])&&(c[u[l]]=r[u[l]]);return c}function __decorate(r,i,c,u){var l,d=arguments.length,p=d<3?i:null===u?u=Object.getOwnPropertyDescriptor(i,c):u;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)p=Reflect.decorate(r,i,c,u);else for(var g=r.length-1;g>=0;g--)(l=r[g])&&(p=(d<3?l(p):d>3?l(i,c,p):l(i,c))||p);return d>3&&p&&Object.defineProperty(i,c,p),p}function __param(r,i){return function(c,u){i(c,u,r)}}function __metadata(r,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(r,i)}function __awaiter(r,i,c,u){function adopt(r){return r instanceof c?r:new c(function(i){i(r)})}return new(c||(c=Promise))(function(c,l){function fulfilled(r){try{step(u.next(r))}catch(r){l(r)}}function rejected(r){try{step(u.throw(r))}catch(r){l(r)}}function step(r){r.done?c(r.value):adopt(r.value).then(fulfilled,rejected)}step((u=u.apply(r,i||[])).next())})}function __generator(r,i){var c,u,l,d,p={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return d={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d;function verb(r){return function(i){return step([r,i])}}function step(d){if(c)throw TypeError("Generator is already executing.");for(;p;)try{if(c=1,u&&(l=2&d[0]?u.return:d[0]?u.throw||((l=u.return)&&l.call(u),0):u.next)&&!(l=l.call(u,d[1])).done)return l;switch(u=0,l&&(d=[2&d[0],l.value]),d[0]){case 0:case 1:l=d;break;case 4:return p.label++,{value:d[1],done:!1};case 5:p.label++,u=d[1],d=[0];continue;case 7:d=p.ops.pop(),p.trys.pop();continue;default:if(!(l=(l=p.trys).length>0&&l[l.length-1])&&(6===d[0]||2===d[0])){p=0;continue}if(3===d[0]&&(!l||d[1]>l[0]&&d[1]<l[3])){p.label=d[1];break}if(6===d[0]&&p.label<l[1]){p.label=l[1],l=d;break}if(l&&p.label<l[2]){p.label=l[2],p.ops.push(d);break}l[2]&&p.ops.pop(),p.trys.pop();continue}d=i.call(r,p)}catch(r){d=[6,r],u=0}finally{c=l=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function __createBinding(r,i,c,u){void 0===u&&(u=c),r[u]=i[c]}function __exportStar(r,i){for(var c in r)"default"===c||i.hasOwnProperty(c)||(i[c]=r[c])}function __values(r){var i="function"==typeof Symbol&&Symbol.iterator,c=i&&r[i],u=0;if(c)return c.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&u>=r.length&&(r=void 0),{value:r&&r[u++],done:!r}}};throw TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(r,i){var c="function"==typeof Symbol&&r[Symbol.iterator];if(!c)return r;var u,l,d=c.call(r),p=[];try{for(;(void 0===i||i-- >0)&&!(u=d.next()).done;)p.push(u.value)}catch(r){l={error:r}}finally{try{u&&!u.done&&(c=d.return)&&c.call(d)}finally{if(l)throw l.error}}return p}function __spread(){for(var r=[],i=0;i<arguments.length;i++)r=r.concat(__read(arguments[i]));return r}function __spreadArrays(){for(var r=0,i=0,c=arguments.length;i<c;i++)r+=arguments[i].length;for(var u=Array(r),l=0,i=0;i<c;i++)for(var d=arguments[i],p=0,g=d.length;p<g;p++,l++)u[l]=d[p];return u}function __await(r){return this instanceof __await?(this.v=r,this):new __await(r)}function __asyncGenerator(r,i,c){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var u,l=c.apply(r,i||[]),d=[];return u={},verb("next"),verb("throw"),verb("return"),u[Symbol.asyncIterator]=function(){return this},u;function verb(r){l[r]&&(u[r]=function(i){return new Promise(function(c,u){d.push([r,i,c,u])>1||resume(r,i)})})}function resume(r,i){try{step(l[r](i))}catch(r){settle(d[0][3],r)}}function step(r){r.value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):settle(d[0][2],r)}function fulfill(r){resume("next",r)}function reject(r){resume("throw",r)}function settle(r,i){r(i),d.shift(),d.length&&resume(d[0][0],d[0][1])}}function __asyncDelegator(r){var i,c;return i={},verb("next"),verb("throw",function(r){throw r}),verb("return"),i[Symbol.iterator]=function(){return this},i;function verb(u,l){i[u]=r[u]?function(i){return(c=!c)?{value:__await(r[u](i)),done:"return"===u}:l?l(i):i}:l}}function __asyncValues(r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,c=r[Symbol.asyncIterator];return c?c.call(r):(r=__values(r),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);function verb(c){i[c]=r[c]&&function(i){return new Promise(function(u,l){settle(u,l,(i=r[c](i)).done,i.value)})}}function settle(r,i,c,u){Promise.resolve(u).then(function(i){r({value:i,done:c})},i)}}function __makeTemplateObject(r,i){return Object.defineProperty?Object.defineProperty(r,"raw",{value:i}):r.raw=i,r}function __importStar(r){if(r&&r.__esModule)return r;var i={};if(null!=r)for(var c in r)Object.hasOwnProperty.call(r,c)&&(i[c]=r[c]);return i.default=r,i}function __importDefault(r){return r&&r.__esModule?r:{default:r}}function __classPrivateFieldGet(r,i){if(!i.has(r))throw TypeError("attempted to get private field on non-instance");return i.get(r)}function __classPrivateFieldSet(r,i,c){if(!i.has(r))throw TypeError("attempted to set private field on non-instance");return i.set(r,c),c}},45394:function(r,i,c){"use strict";let u;c.d(i,{EthereumProvider:function(){return n0}});var l={};c.r(l),c.d(l,{identity:function(){return em}});var d={};c.r(d),c.d(d,{base2:function(){return eb}});var p={};c.r(p),c.d(p,{base8:function(){return ew}});var g={};c.r(g),c.d(g,{base10:function(){return eE}});var _={};c.r(_),c.d(_,{base16:function(){return ex},base16upper:function(){return eS}});var w={};c.r(w),c.d(w,{base32:function(){return eD},base32hex:function(){return eC},base32hexpad:function(){return eR},base32hexpadupper:function(){return eN},base32hexupper:function(){return eA},base32pad:function(){return eO},base32padupper:function(){return eP},base32upper:function(){return eI},base32z:function(){return eT}});var S={};c.r(S),c.d(S,{base36:function(){return ej},base36upper:function(){return eU}});var P={};c.r(P),c.d(P,{base58btc:function(){return eL},base58flickr:function(){return ek}});var C={};c.r(C),c.d(C,{base64:function(){return eM},base64pad:function(){return ez},base64url:function(){return eH},base64urlpad:function(){return e$}});var L={};c.r(L),c.d(L,{base256emoji:function(){return eV}});var k={};c.r(k),c.d(k,{sha256:function(){return eG},sha512:function(){return eJ}});var q={};c.r(q),c.d(q,{identity:function(){return eY}});var z={};c.r(z),c.d(z,{code:function(){return eZ},decode:function(){return raw_decode},encode:function(){return raw_encode},name:function(){return eQ}});var J={};c.r(J),c.d(J,{code:function(){return e5},decode:function(){return json_decode},encode:function(){return json_encode},name:function(){return e1}});var Q=c(512),X=c.n(Q),et=c(51040),eo=c(20342),ep=c(35077),e_=c(87853),ey=c(38195);function as_uint8array_asUint8Array(r){return null!=globalThis.Buffer?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function allocUnsafe(r=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?as_uint8array_asUint8Array(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function concat(r,i){i||(i=r.reduce((r,i)=>r+i.length,0));let c=allocUnsafe(i),u=0;for(let i of r)c.set(i,u),u+=i.length;return as_uint8array_asUint8Array(c)}var src=function(r,i){if(r.length>=255)throw TypeError("Alphabet too long");for(var c=new Uint8Array(256),u=0;u<c.length;u++)c[u]=255;for(var l=0;l<r.length;l++){var d=r.charAt(l),p=d.charCodeAt(0);if(255!==c[p])throw TypeError(d+" is ambiguous");c[p]=l}var g=r.length,_=r.charAt(0),w=Math.log(g)/Math.log(256),S=Math.log(256)/Math.log(g);function decodeUnsafe(r){if("string"!=typeof r)throw TypeError("Expected String");if(0===r.length)return new Uint8Array;var i=0;if(" "!==r[0]){for(var u=0,l=0;r[i]===_;)u++,i++;for(var d=(r.length-i)*w+1>>>0,p=new Uint8Array(d);r[i];){var S=c[r.charCodeAt(i)];if(255===S)return;for(var P=0,C=d-1;(0!==S||P<l)&&-1!==C;C--,P++)S+=g*p[C]>>>0,p[C]=S%256>>>0,S=S/256>>>0;if(0!==S)throw Error("Non-zero carry");l=P,i++}if(" "!==r[i]){for(var L=d-l;L!==d&&0===p[L];)L++;for(var k=new Uint8Array(u+(d-L)),q=u;L!==d;)k[q++]=p[L++];return k}}}function decode(r){var c=decodeUnsafe(r);if(c)return c;throw Error(`Non-${i} character`)}return{encode:function(i){if(i instanceof Uint8Array||(ArrayBuffer.isView(i)?i=new Uint8Array(i.buffer,i.byteOffset,i.byteLength):Array.isArray(i)&&(i=Uint8Array.from(i))),!(i instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===i.length)return"";for(var c=0,u=0,l=0,d=i.length;l!==d&&0===i[l];)l++,c++;for(var p=(d-l)*S+1>>>0,w=new Uint8Array(p);l!==d;){for(var P=i[l],C=0,L=p-1;(0!==P||C<u)&&-1!==L;L--,C++)P+=256*w[L]>>>0,w[L]=P%g>>>0,P=P/g>>>0;if(0!==P)throw Error("Non-zero carry");u=C,l++}for(var k=p-u;k!==p&&0===w[k];)k++;for(var q=_.repeat(c);k<p;++k)q+=r.charAt(w[k]);return q},decodeUnsafe:decodeUnsafe,decode:decode}};new Uint8Array(0);let equals=(r,i)=>{if(r===i)return!0;if(r.byteLength!==i.byteLength)return!1;for(let c=0;c<r.byteLength;c++)if(r[c]!==i[c])return!1;return!0},coerce=r=>{if(r instanceof Uint8Array&&"Uint8Array"===r.constructor.name)return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw Error("Unknown type, must be binary type")},bytes_fromString=r=>new TextEncoder().encode(r),bytes_toString=r=>new TextDecoder().decode(r);let Encoder=class Encoder{constructor(r,i,c){this.name=r,this.prefix=i,this.baseEncode=c}encode(r){if(r instanceof Uint8Array)return`${this.prefix}${this.baseEncode(r)}`;throw Error("Unknown type, must be binary type")}};let Decoder=class Decoder{constructor(r,i,c){if(this.name=r,this.prefix=i,void 0===i.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=i.codePointAt(0),this.baseDecode=c}decode(r){if("string"==typeof r){if(r.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(r)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(r.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(r){return or(this,r)}};let ComposedDecoder=class ComposedDecoder{constructor(r){this.decoders=r}or(r){return or(this,r)}decode(r){let i=r[0],c=this.decoders[i];if(c)return c.decode(r);throw RangeError(`Unable to decode multibase string ${JSON.stringify(r)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};let or=(r,i)=>new ComposedDecoder({...r.decoders||{[r.prefix]:r},...i.decoders||{[i.prefix]:i}});let Codec=class Codec{constructor(r,i,c,u){this.name=r,this.prefix=i,this.baseEncode=c,this.baseDecode=u,this.encoder=new Encoder(r,i,c),this.decoder=new Decoder(r,i,u)}encode(r){return this.encoder.encode(r)}decode(r){return this.decoder.decode(r)}};let from=({name:r,prefix:i,encode:c,decode:u})=>new Codec(r,i,c,u),baseX=({prefix:r,name:i,alphabet:c})=>{let{encode:u,decode:l}=src(c,i);return from({prefix:r,name:i,encode:u,decode:r=>coerce(l(r))})},decode=(r,i,c,u)=>{let l={};for(let r=0;r<i.length;++r)l[i[r]]=r;let d=r.length;for(;"="===r[d-1];)--d;let p=new Uint8Array(d*c/8|0),g=0,_=0,w=0;for(let i=0;i<d;++i){let d=l[r[i]];if(void 0===d)throw SyntaxError(`Non-${u} character`);_=_<<c|d,(g+=c)>=8&&(g-=8,p[w++]=255&_>>g)}if(g>=c||255&_<<8-g)throw SyntaxError("Unexpected end of data");return p},encode=(r,i,c)=>{let u="="===i[i.length-1],l=(1<<c)-1,d="",p=0,g=0;for(let u=0;u<r.length;++u)for(g=g<<8|r[u],p+=8;p>c;)p-=c,d+=i[l&g>>p];if(p&&(d+=i[l&g<<c-p]),u)for(;d.length*c&7;)d+="=";return d},rfc4648=({name:r,prefix:i,bitsPerChar:c,alphabet:u})=>from({prefix:i,name:r,encode:r=>encode(r,u,c),decode:i=>decode(i,u,c,r)}),em=from({prefix:"\x00",name:"identity",encode:r=>bytes_toString(r),decode:r=>bytes_fromString(r)}),eb=rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),ew=rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),eE=baseX({prefix:"9",name:"base10",alphabet:"0123456789"}),ex=rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),eS=rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),eD=rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),eI=rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),eO=rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),eP=rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),eC=rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),eA=rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),eR=rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),eN=rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),eT=rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),ej=baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),eU=baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),eL=baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ek=baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),eM=rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ez=rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),eH=rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),e$=rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),eB=Array.from("\uD83D\uDE80\uD83E\uDE90☄\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09☀\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02❤\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09☺\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E✌✨\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D❣\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33✋\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13⭐✅\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6✔\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90☹\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20☝\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B⚽\uD83E\uDD19☕\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81⚡\uD83C\uDF1E\uD83C\uDF88❌✊\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C✈\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74▶➡❓\uD83D\uDC8E\uD83D\uDCB8⬇\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A⚠\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37☎\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51❄\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),eF=eB.reduce((r,i,c)=>(r[c]=i,r),[]),eK=eB.reduce((r,i,c)=>(r[i.codePointAt(0)]=c,r),[]);function base256emoji_encode(r){return r.reduce((r,i)=>r+=eF[i],"")}function base256emoji_decode(r){let i=[];for(let c of r){let r=eK[c.codePointAt(0)];if(void 0===r)throw Error(`Non-base256emoji character: ${c}`);i.push(r)}return new Uint8Array(i)}let eV=from({prefix:"\uD83D\uDE80",name:"base256emoji",encode:base256emoji_encode,decode:base256emoji_decode});function varint_encode(r,i,c){i=i||[];for(var u=c=c||0;r>=2147483648;)i[c++]=255&r|128,r/=128;for(;-128&r;)i[c++]=255&r|128,r>>>=7;return i[c]=0|r,varint_encode.bytes=c-u+1,i}function read(r,i){var c,u=0,i=i||0,l=0,d=i,p=r.length;do{if(d>=p)throw read.bytes=0,RangeError("Could not decode varint");c=r[d++],u+=l<28?(127&c)<<l:(127&c)*Math.pow(2,l),l+=7}while(c>=128);return read.bytes=d-i,u}var eW={encode:varint_encode,decode:read,encodingLength:function(r){return r<128?1:r<16384?2:r<2097152?3:r<268435456?4:r<34359738368?5:r<4398046511104?6:r<562949953421312?7:r<72057594037927940?8:r<0x7fffffffffffffff?9:10}};let src_varint_decode=(r,i=0)=>{let c=eW.decode(r,i);return[c,eW.decode.bytes]},encodeTo=(r,i,c=0)=>(eW.encode(r,i,c),i),encodingLength=r=>eW.encodingLength(r),create=(r,i)=>{let c=i.byteLength,u=encodingLength(r),l=u+encodingLength(c),d=new Uint8Array(l+c);return encodeTo(r,d,0),encodeTo(c,d,u),d.set(i,l),new Digest(r,c,i,d)},digest_decode=r=>{let i=coerce(r),[c,u]=src_varint_decode(i),[l,d]=src_varint_decode(i.subarray(u)),p=i.subarray(u+d);if(p.byteLength!==l)throw Error("Incorrect length");return new Digest(c,l,p,i)},digest_equals=(r,i)=>r===i||r.code===i.code&&r.size===i.size&&equals(r.bytes,i.bytes);let Digest=class Digest{constructor(r,i,c,u){this.code=r,this.size=i,this.digest=c,this.bytes=u}};let hasher_from=({name:r,code:i,encode:c})=>new Hasher(r,i,c);let Hasher=class Hasher{constructor(r,i,c){this.name=r,this.code=i,this.encode=c}digest(r){if(r instanceof Uint8Array){let i=this.encode(r);return i instanceof Uint8Array?create(this.code,i):i.then(r=>create(this.code,r))}throw Error("Unknown type, must be binary type")}};let sha=r=>async i=>new Uint8Array(await crypto.subtle.digest(r,i)),eG=hasher_from({name:"sha2-256",code:18,encode:sha("SHA-256")}),eJ=hasher_from({name:"sha2-512",code:19,encode:sha("SHA-512")}),eY={code:0,name:"identity",encode:coerce,digest:r=>create(0,coerce(r))},eQ="raw",eZ=85,raw_encode=r=>coerce(r),raw_decode=r=>coerce(r),eX=new TextEncoder,e0=new TextDecoder,e1="json",e5=512,json_encode=r=>eX.encode(JSON.stringify(r)),json_decode=r=>JSON.parse(e0.decode(r));let CID=class CID{constructor(r,i,c,u){this.code=i,this.version=r,this.multihash=c,this.bytes=u,this.byteOffset=u.byteOffset,this.byteLength=u.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:e4,byteLength:e4,code:e8,version:e8,multihash:e8,bytes:e8,_baseCache:e4,asCID:e4})}toV0(){if(0===this.version)return this;{let{code:r,multihash:i}=this;if(r!==e3)throw Error("Cannot convert a non dag-pb CID to CIDv0");if(i.code!==e2)throw Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID.createV0(i)}}toV1(){switch(this.version){case 0:{let{code:r,digest:i}=this.multihash,c=create(r,i);return CID.createV1(this.code,c)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(r){return r&&this.code===r.code&&this.version===r.version&&digest_equals(this.multihash,r.multihash)}toString(r){let{bytes:i,version:c,_baseCache:u}=this;return 0===c?toStringV0(i,u,r||eL.encoder):toStringV1(i,u,r||eD.encoder)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(r){return deprecate(/^0\.0/,e9),!!(r&&(r[e6]||r.asCID===r))}get toBaseEncodedString(){throw Error("Deprecated, use .toString()")}get codec(){throw Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw Error('"multibaseName" property is deprecated')}get prefix(){throw Error('"prefix" property is deprecated')}static asCID(r){if(r instanceof CID)return r;if(null!=r&&r.asCID===r){let{version:i,code:c,multihash:u,bytes:l}=r;return new CID(i,c,u,l||encodeCID(i,c,u.bytes))}if(null==r||!0!==r[e6])return null;{let{version:i,multihash:c,code:u}=r,l=digest_decode(c);return CID.create(i,u,l)}}static create(r,i,c){if("number"!=typeof i)throw Error("String codecs are no longer supported");switch(r){case 0:if(i===e3)return new CID(r,i,c,c.bytes);throw Error(`Version 0 CID must use dag-pb (code: ${e3}) block encoding`);case 1:{let u=encodeCID(r,i,c.bytes);return new CID(r,i,c,u)}default:throw Error("Invalid version")}}static createV0(r){return CID.create(0,e3,r)}static createV1(r,i){return CID.create(1,r,i)}static decode(r){let[i,c]=CID.decodeFirst(r);if(c.length)throw Error("Incorrect length");return i}static decodeFirst(r){let i=CID.inspectBytes(r),c=i.size-i.multihashSize,u=coerce(r.subarray(c,c+i.multihashSize));if(u.byteLength!==i.multihashSize)throw Error("Incorrect length");let l=u.subarray(i.multihashSize-i.digestSize),d=new Digest(i.multihashCode,i.digestSize,l,u),p=0===i.version?CID.createV0(d):CID.createV1(i.codec,d);return[p,r.subarray(i.size)]}static inspectBytes(r){let i=0,next=()=>{let[c,u]=src_varint_decode(r.subarray(i));return i+=u,c},c=next(),u=e3;if(18===c?(c=0,i=0):1===c&&(u=next()),0!==c&&1!==c)throw RangeError(`Invalid CID version ${c}`);let l=i,d=next(),p=next(),g=i+p;return{version:c,codec:u,multihashCode:d,digestSize:p,multihashSize:g-l,size:g}}static parse(r,i){let[c,u]=parseCIDtoBytes(r,i),l=CID.decode(u);return l._baseCache.set(c,r),l}};let parseCIDtoBytes=(r,i)=>{switch(r[0]){case"Q":return[eL.prefix,(i||eL).decode(`${eL.prefix}${r}`)];case eL.prefix:return[eL.prefix,(i||eL).decode(r)];case eD.prefix:return[eD.prefix,(i||eD).decode(r)];default:if(null==i)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],i.decode(r)]}},toStringV0=(r,i,c)=>{let{prefix:u}=c;if(u!==eL.prefix)throw Error(`Cannot string encode V0 in ${c.name} encoding`);let l=i.get(u);if(null!=l)return l;{let l=c.encode(r).slice(1);return i.set(u,l),l}},toStringV1=(r,i,c)=>{let{prefix:u}=c,l=i.get(u);if(null!=l)return l;{let l=c.encode(r);return i.set(u,l),l}},e3=112,e2=18,encodeCID=(r,i,c)=>{let u=encodingLength(r),l=u+encodingLength(i),d=new Uint8Array(l+c.byteLength);return encodeTo(r,d,0),encodeTo(i,d,u),d.set(c,l),d},e6=Symbol.for("@ipld/js-cid/CID"),e8={writable:!1,configurable:!1,enumerable:!0},e4={writable:!1,enumerable:!1,configurable:!1},deprecate=(r,i)=>{if(r.test("0.0.0-dev"))console.warn(i);else throw Error(i)},e9=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`,e7={...l,...d,...p,...g,..._,...w,...S,...P,...C,...L};function createCodec(r,i,c,u){return{name:r,prefix:i,encoder:{name:r,prefix:i,encode:c},decoder:{decode:u}}}({...k,...q});let tn=createCodec("utf8","u",r=>{let i=new TextDecoder("utf8");return"u"+i.decode(r)},r=>{let i=new TextEncoder;return i.encode(r.substring(1))}),to=createCodec("ascii","a",r=>{let i="a";for(let c=0;c<r.length;c++)i+=String.fromCharCode(r[c]);return i},r=>{r=r.substring(1);let i=allocUnsafe(r.length);for(let c=0;c<r.length;c++)i[c]=r.charCodeAt(c);return i}),ta={utf8:tn,"utf-8":tn,hex:e7.base16,latin1:to,ascii:to,binary:to,...e7};function from_string_fromString(r,i="utf8"){let c=ta[i];if(!c)throw Error(`Unsupported encoding "${i}"`);return("utf8"===i||"utf-8"===i)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?as_uint8array_asUint8Array(globalThis.Buffer.from(r,"utf-8")):c.decoder.decode(`${c.prefix}${r}`)}function to_string_toString(r,i="utf8"){let c=ta[i];if(!c)throw Error(`Unsupported encoding "${i}"`);return("utf8"===i||"utf-8"===i)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):c.encoder.encode(r).substring(1)}var td=c(25566),__spreadArray=function(r,i,c){if(c||2==arguments.length)for(var u,l=0,d=i.length;l<d;l++)!u&&l in i||(u||(u=Array.prototype.slice.call(i,0,l)),u[l]=i[l]);return r.concat(u||Array.prototype.slice.call(i))},BrowserInfo=function(r,i,c){this.name=r,this.version=i,this.os=c,this.type="browser"},NodeInfo=function(r){this.version=r,this.type="node",this.name="node",this.os=td.platform},SearchBotDeviceInfo=function(r,i,c,u){this.name=r,this.version=i,this.os=c,this.bot=u,this.type="bot-device"},BotInfo=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},ReactNativeInfo=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},tf=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,t_=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],ty=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function detect(r){return r?parseUserAgent(r):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new ReactNativeInfo:"undefined"!=typeof navigator?parseUserAgent(navigator.userAgent):getNodeVersion()}function matchUserAgent(r){return""!==r&&t_.reduce(function(i,c){var u=c[0],l=c[1];if(i)return i;var d=l.exec(r);return!!d&&[u,d]},!1)}function parseUserAgent(r){var i=matchUserAgent(r);if(!i)return null;var c=i[0],u=i[1];if("searchbot"===c)return new BotInfo;var l=u[1]&&u[1].split(".").join("_").split("_").slice(0,3);l?l.length<3&&(l=__spreadArray(__spreadArray([],l,!0),createVersionParts(3-l.length),!0)):l=[];var d=l.join("."),p=detectOS(r),g=tf.exec(r);return g&&g[1]?new SearchBotDeviceInfo(c,d,p,g[1]):new BrowserInfo(c,d,p)}function detectOS(r){for(var i=0,c=ty.length;i<c;i++){var u=ty[i],l=u[0];if(u[1].exec(r))return l}return null}function getNodeVersion(){return void 0!==td&&td.version?new NodeInfo(td.version.slice(1)):null}function createVersionParts(r){for(var i=[],c=0;c<r;c++)i.push("0");return i}var tm=c(58619),tb=c(849),tw=c(36073),tE=c(89291);let tx={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var tS=c(25566);function ve(r){let[i,c]=r.split(":");return{namespace:i,reference:c}}function Un(r,i=[]){let c=[];return Object.keys(r).forEach(u=>{if(i.length&&!i.includes(u))return;let l=r[u];c.push(...l.accounts)}),c}function index_es_L(r,i){return r.includes(":")?[r]:i.chains||[]}let tD="base10",tI="base16",tO="base64pad",tP="utf8";function kn(){let r=ey.Au();return{privateKey:to_string_toString(r.secretKey,tI),publicKey:to_string_toString(r.publicKey,tI)}}function Vn(){let r=(0,ep.randomBytes)(32);return to_string_toString(r,tI)}function Mn(r,i){let c=ey.gi(from_string_fromString(r,tI),from_string_fromString(i,tI),!0),u=new eo.t(e_.mE,c).expand(32);return to_string_toString(u,tI)}function Kn(r){let i=(0,e_.vp)(from_string_fromString(r,tI));return to_string_toString(i,tI)}function Ln(r){let i=(0,e_.vp)(from_string_fromString(r,tP));return to_string_toString(i,tI)}function Pe(r){return from_string_fromString(`${r}`,tD)}function j(r){return Number(to_string_toString(r,tD))}function xn(r){let i=Pe("u">typeof r.type?r.type:0);if(1===j(i)&&typeof r.senderPublicKey>"u")throw Error("Missing sender public key for type 1 envelope");let c="u">typeof r.senderPublicKey?from_string_fromString(r.senderPublicKey,tI):void 0,u="u">typeof r.iv?from_string_fromString(r.iv,tI):(0,ep.randomBytes)(12),l=new et.OK(from_string_fromString(r.symKey,tI)).seal(u,from_string_fromString(r.message,tP));return Re({type:i,sealed:l,iv:u,senderPublicKey:c})}function Fn(r){let i=new et.OK(from_string_fromString(r.symKey,tI)),{sealed:c,iv:u}=ee(r.encoded),l=i.open(u,c);if(null===l)throw Error("Failed to decrypt");return to_string_toString(l,tP)}function Re(r){if(1===j(r.type)){if(typeof r.senderPublicKey>"u")throw Error("Missing sender public key for type 1 envelope");return to_string_toString(concat([r.type,r.senderPublicKey,r.iv,r.sealed]),tO)}return to_string_toString(concat([r.type,r.iv,r.sealed]),tO)}function ee(r){let i=from_string_fromString(r,tO),c=i.slice(0,1);if(1===j(c)){let r=i.slice(1,33),u=i.slice(33,45),l=i.slice(45);return{type:c,sealed:l,iv:u,senderPublicKey:r}}let u=i.slice(1,13),l=i.slice(13);return{type:c,sealed:l,iv:u}}function Hn(r,i){let c=ee(r);return Ae({type:j(c.type),senderPublicKey:"u">typeof c.senderPublicKey?to_string_toString(c.senderPublicKey,tI):void 0,receiverPublicKey:i?.receiverPublicKey})}function Ae(r){let i=r?.type||0;if(1===i){if(typeof r?.senderPublicKey>"u")throw Error("missing sender public key");if(typeof r?.receiverPublicKey>"u")throw Error("missing receiver public key")}return{type:i,senderPublicKey:r?.senderPublicKey,receiverPublicKey:r?.receiverPublicKey}}function qn(r){return 1===r.type&&"string"==typeof r.senderPublicKey&&"string"==typeof r.receiverPublicKey}var tC=Object.defineProperty,tA=Object.getOwnPropertySymbols,tR=Object.prototype.hasOwnProperty,tN=Object.prototype.propertyIsEnumerable,_e=(r,i,c)=>i in r?tC(r,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):r[i]=c,$e=(r,i)=>{for(var c in i||(i={}))tR.call(i,c)&&_e(r,c,i[c]);if(tA)for(var c of tA(i))tN.call(i,c)&&_e(r,c,i[c]);return r};let tT={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"};function te(){return"u">typeof tS&&"u">typeof tS.versions&&"u">typeof tS.versions.node}function $(){return!(0,tb.getDocument)()&&!!(0,tb.getNavigator)()&&"ReactNative"===navigator.product}function D(){return!te()&&!!(0,tb.getNavigator)()&&!!(0,tb.getDocument)()}function index_es_R(){return $()?tT.reactNative:te()?tT.node:D()?tT.browser:tT.unknown}function Jn(){var r;try{return $()&&"u">typeof c.g&&"u">typeof(null==c.g?void 0:c.g.Application)?null==(r=c.g.Application)?void 0:r.applicationId:void 0}catch{return}}function ke(r,i){let c=tE.parse(r);return c=$e($e({},c),i),r=tE.stringify(c)}function Qn(){return(0,tw.D)()||{name:"",description:"",url:"",icons:[""]}}function Ve(){if(index_es_R()===tT.reactNative&&"u">typeof c.g&&"u">typeof(null==c.g?void 0:c.g.Platform)){let{OS:r,Version:i}=c.g.Platform;return[r,i].join("-")}let r=detect();if(null===r)return"unknown";let i=r.os?r.os.replace(" ","").toLowerCase():"unknown";return"browser"===r.type?[i,r.name,r.version].join("-"):[i,r.version].join("-")}function Me(){var r;let i=index_es_R();return i===tT.browser?[i,(null==(r=(0,tb.getLocation)())?void 0:r.host)||"unknown"].join(":"):i}function Ke(r,i,c){let u=Ve(),l=Me();return[[r,i].join("-"),["js",c].join("-"),u,l].join("/")}function Xn({protocol:r,version:i,relayUrl:c,sdkVersion:u,auth:l,projectId:d,useOnCloseEvent:p,bundleId:g}){let _=c.split("?"),w=Ke(r,i,u),S=ke(_[1]||"",{auth:l,ua:w,projectId:d,useOnCloseEvent:p||void 0,origin:g||void 0});return _[0]+"?"+S}function O(r,i){return r.filter(r=>i.includes(r)).length===r.length}function rt(r){return Object.fromEntries(r.entries())}function ot(r){return new Map(Object.entries(r))}function at(r=tm.FIVE_MINUTES,i){let c,u,l;let d=(0,tm.toMiliseconds)(r||tm.FIVE_MINUTES);return{resolve:r=>{l&&c&&(clearTimeout(l),c(r))},reject:r=>{l&&u&&(clearTimeout(l),u(r))},done:()=>new Promise((r,p)=>{l=setTimeout(()=>{p(Error(i))},d),c=r,u=p})}}function ut(r,i,c){return new Promise(async(u,l)=>{let d=setTimeout(()=>l(Error(c)),i);try{let i=await r;u(i)}catch(r){l(r)}clearTimeout(d)})}function re(r,i){if("string"==typeof i&&i.startsWith(`${r}:`))return i;if("topic"===r.toLowerCase()){if("string"!=typeof i)throw Error('Value must be "string" for expirer target type: topic');return`topic:${i}`}if("id"===r.toLowerCase()){if("number"!=typeof i)throw Error('Value must be "number" for expirer target type: id');return`id:${i}`}throw Error(`Unknown expirer target type: ${r}`)}function lt(r){return re("topic",r)}function dt(r){return re("id",r)}function ft(r){let[i,c]=r.split(":"),u={id:void 0,topic:void 0};if("topic"===i&&"string"==typeof c)u.topic=c;else if("id"===i&&Number.isInteger(Number(c)))u.id=Number(c);else throw Error(`Invalid target, expected id:number or topic:string, got ${i}:${c}`);return u}function pt(r,i){return(0,tm.fromMiliseconds)((i||Date.now())+(0,tm.toMiliseconds)(r))}function mt(r){return Date.now()>=(0,tm.toMiliseconds)(r)}function yt(r,i){return`${r}${i?`:${i}`:""}`}function index_es_S(r=[],i=[]){return[...new Set([...r,...i])]}async function gt({id:r,topic:i,wcDeepLink:u}){try{if(!u)return;let l="string"==typeof u?JSON.parse(u):u,d=l?.href;if("string"!=typeof d)return;d.endsWith("/")&&(d=d.slice(0,-1));let p=`${d}/wc?requestId=${r}&sessionTopic=${i}`,g=index_es_R();g===tT.browser?p.startsWith("https://")?window.open(p,"_blank","noreferrer noopener"):window.open(p,"_self","noreferrer noopener"):g===tT.reactNative&&"u">typeof(null==c.g?void 0:c.g.Linking)&&await c.g.Linking.openURL(p)}catch(r){console.error(r)}}async function ht(r,i){try{return await r.getItem(i)||(D()?localStorage.getItem(i):void 0)}catch(r){console.error(r)}}function vt(r){return r?.relay||{protocol:"irn"}}function Et(r){let i=tx[r];if(typeof i>"u")throw Error(`Relay Protocol not supported: ${r}`);return i}var tj=Object.defineProperty,tU=Object.defineProperties,tL=Object.getOwnPropertyDescriptors,tk=Object.getOwnPropertySymbols,tM=Object.prototype.hasOwnProperty,tq=Object.prototype.propertyIsEnumerable,Be=(r,i,c)=>i in r?tj(r,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):r[i]=c,It=(r,i)=>{for(var c in i||(i={}))tM.call(i,c)&&Be(r,c,i[c]);if(tk)for(var c of tk(i))tq.call(i,c)&&Be(r,c,i[c]);return r},Tt=(r,i)=>tU(r,tL(i));function Ge(r,i="-"){let c={},u="relay"+i;return Object.keys(r).forEach(i=>{if(i.startsWith(u)){let l=i.replace(u,""),d=r[i];c[l]=d}}),c}function Pt(r){r=(r=r.includes("wc://")?r.replace("wc://",""):r).includes("wc:")?r.replace("wc:",""):r;let i=r.indexOf(":"),c=-1!==r.indexOf("?")?r.indexOf("?"):void 0,u=r.substring(0,i),l=r.substring(i+1,c).split("@"),d="u">typeof c?r.substring(c):"",p=tE.parse(d);return{protocol:u,topic:We(l[0]),version:parseInt(l[1],10),symKey:p.symKey,relay:Ge(p),expiryTimestamp:p.expiryTimestamp?parseInt(p.expiryTimestamp,10):void 0}}function We(r){return r.startsWith("//")?r.substring(2):r}function ze(r,i="-"){let c={};return Object.keys(r).forEach(u=>{r[u]&&(c["relay"+i+u]=r[u])}),c}function Rt(r){return`${r.protocol}:${r.topic}@${r.version}?`+tE.stringify(Tt(It({symKey:r.symKey},ze(r.relay)),{expiryTimestamp:r.expiryTimestamp}))}function A(r){let i=[];return r.forEach(r=>{let[c,u]=r.split(":");i.push(`${c}:${u}`)}),i}function Qe(r){let i=[];return Object.values(r).forEach(r=>{i.push(...A(r.accounts))}),i}function Ze(r,i){let c=[];return Object.values(r).forEach(r=>{A(r.accounts).includes(i)&&c.push(...r.methods)}),c}function Xe(r,i){let c=[];return Object.values(r).forEach(r=>{A(r.accounts).includes(i)&&c.push(...r.events)}),c}function oe(r){return r.includes(":")}function en(r){return oe(r)?r.split(":")[0]:r}Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;let tz={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},tH={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function index_es_N(r,i){let{message:c,code:u}=tH[r];return{message:i?`${c} ${i}`:c,code:u}}function U(r,i){let{message:c,code:u}=tz[r];return{message:i?`${c} ${i}`:c,code:u}}function index_es_k(r,i){return!!Array.isArray(r)&&(!("u">typeof i)||!r.length||r.every(i))}function B(r){return Object.getPrototypeOf(r)===Object.prototype&&Object.keys(r).length}function index_es_w(r){return typeof r>"u"}function index_es_g(r,i){return!!(i&&index_es_w(r))||"string"==typeof r&&!!r.trim().length}function G(r,i){return!!(i&&index_es_w(r))||"number"==typeof r&&!isNaN(r)}function Mt(r,i){let{requiredNamespaces:c}=i,u=Object.keys(r.namespaces),l=Object.keys(c),d=!0;return!!O(l,u)&&(u.forEach(i=>{let{accounts:u,methods:l,events:p}=r.namespaces[i],g=A(u),_=c[i];O(index_es_L(i,_),g)&&O(_.methods,l)&&O(_.events,p)||(d=!1)}),d)}function V(r){return!!(index_es_g(r,!1)&&r.includes(":"))&&2===r.split(":").length}function rn(r){if(index_es_g(r,!1)&&r.includes(":")){let i=r.split(":");if(3===i.length){let r=i[0]+":"+i[1];return!!i[2]&&V(r)}}return!1}function Kt(r){if(index_es_g(r,!1))try{return"u">typeof new URL(r)}catch{}return!1}function Lt(r){var i;return null==(i=r?.proposer)?void 0:i.publicKey}function xt(r){return r?.topic}function Ft(r,i){let c=null;return index_es_g(r?.publicKey,!1)||(c=index_es_N("MISSING_OR_INVALID",`${i} controller public key should be a string`)),c}function ie(r){let i=!0;return index_es_k(r)?r.length&&(i=r.every(r=>index_es_g(r,!1))):i=!1,i}function on(r,i,c){let u=null;return index_es_k(i)&&i.length?i.forEach(r=>{u||V(r)||(u=U("UNSUPPORTED_CHAINS",`${c}, chain ${r} should be a string and conform to "namespace:chainId" format`))}):V(r)||(u=U("UNSUPPORTED_CHAINS",`${c}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),u}function sn(r,i,c){let u=null;return Object.entries(r).forEach(([r,l])=>{if(u)return;let d=on(r,index_es_L(r,l),`${i} ${c}`);d&&(u=d)}),u}function cn(r,i){let c=null;return index_es_k(r)?r.forEach(r=>{c||rn(r)||(c=U("UNSUPPORTED_ACCOUNTS",`${i}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):c=U("UNSUPPORTED_ACCOUNTS",`${i}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),c}function an(r,i){let c=null;return Object.values(r).forEach(r=>{if(c)return;let u=cn(r?.accounts,`${i} namespace`);u&&(c=u)}),c}function un(r,i){let c=null;return ie(r?.methods)?ie(r?.events)||(c=U("UNSUPPORTED_EVENTS",`${i}, events should be an array of strings or empty array for no events`)):c=U("UNSUPPORTED_METHODS",`${i}, methods should be an array of strings or empty array for no methods`),c}function ce(r,i){let c=null;return Object.values(r).forEach(r=>{if(c)return;let u=un(r,`${i}, namespace`);u&&(c=u)}),c}function Ht(r,i,c){let u=null;if(r&&B(r)){let l=ce(r,i);l&&(u=l);let d=sn(r,i,c);d&&(u=d)}else u=index_es_N("MISSING_OR_INVALID",`${i}, ${c} should be an object with data`);return u}function ln(r,i){let c=null;if(r&&B(r)){let u=ce(r,i);u&&(c=u);let l=an(r,i);l&&(c=l)}else c=index_es_N("MISSING_OR_INVALID",`${i}, namespaces should be an object with data`);return c}function dn(r){return index_es_g(r.protocol,!0)}function qt(r,i){let c=!1;return i&&!r?c=!0:r&&index_es_k(r)&&r.length&&r.forEach(r=>{c=dn(r)}),c}function Bt(r){return"number"==typeof r}function Gt(r){return"u">typeof r}function Wt(r){return!(!r||"object"!=typeof r||!r.code||!G(r.code,!1)||!r.message||!index_es_g(r.message,!1))}function zt(r){return!(index_es_w(r)||!index_es_g(r.method,!1))}function Yt(r){return!(index_es_w(r)||index_es_w(r.result)&&index_es_w(r.error)||!G(r.id,!1)||!index_es_g(r.jsonrpc,!1))}function Jt(r){return!(index_es_w(r)||!index_es_g(r.name,!1))}function Qt(r,i){return!(!V(i)||!Qe(r).includes(i))}function Zt(r,i,c){return!!index_es_g(c,!1)&&Ze(r,i).includes(c)}function Xt(r,i,c){return!!index_es_g(c,!1)&&Xe(r,i).includes(c)}function fn(r,i,c){let u=null,l=er(r),d=nr(i),p=Object.keys(l),g=Object.keys(d),_=pn(Object.keys(r)),w=pn(Object.keys(i)),S=_.filter(r=>!w.includes(r));return S.length&&(u=index_es_N("NON_CONFORMING_NAMESPACES",`${c} namespaces keys don't satisfy requiredNamespaces.
      Required: ${S.toString()}
      Received: ${Object.keys(i).toString()}`)),O(p,g)||(u=index_es_N("NON_CONFORMING_NAMESPACES",`${c} namespaces chains don't satisfy required namespaces.
      Required: ${p.toString()}
      Approved: ${g.toString()}`)),Object.keys(i).forEach(r=>{if(!r.includes(":")||u)return;let l=A(i[r].accounts);l.includes(r)||(u=index_es_N("NON_CONFORMING_NAMESPACES",`${c} namespaces accounts don't satisfy namespace accounts for ${r}
        Required: ${r}
        Approved: ${l.toString()}`))}),p.forEach(r=>{u||(O(l[r].methods,d[r].methods)?O(l[r].events,d[r].events)||(u=index_es_N("NON_CONFORMING_NAMESPACES",`${c} namespaces events don't satisfy namespace events for ${r}`)):u=index_es_N("NON_CONFORMING_NAMESPACES",`${c} namespaces methods don't satisfy namespace methods for ${r}`))}),u}function er(r){let i={};return Object.keys(r).forEach(c=>{var u;c.includes(":")?i[c]=r[c]:null==(u=r[c].chains)||u.forEach(u=>{i[u]={methods:r[c].methods,events:r[c].events}})}),i}function pn(r){return[...new Set(r.map(r=>r.includes(":")?r.split(":")[0]:r))]}function nr(r){let i={};return Object.keys(r).forEach(c=>{if(c.includes(":"))i[c]=r[c];else{let u=A(r[c].accounts);u?.forEach(u=>{i[u]={accounts:r[c].accounts.filter(r=>r.includes(`${u}:`)),methods:r[c].methods,events:r[c].events}})}}),i}function tr(r,i){return G(r,!1)&&r<=i.max&&r>=i.min}function rr(){let r=index_es_R();return new Promise(i=>{switch(r){case tT.browser:i(mn());break;case tT.reactNative:i(yn());break;case tT.node:i(gn());break;default:i(!0)}})}function mn(){return D()&&navigator?.onLine}async function yn(){if($()&&"u">typeof c.g&&null!=c.g&&c.g.NetInfo){let r=await (null==c.g?void 0:c.g.NetInfo.fetch());return r?.isConnected}return!0}function gn(){return!0}function index_es_or(r){switch(index_es_R()){case tT.browser:hn(r);break;case tT.reactNative:vn(r);case tT.node:}}function hn(r){!$()&&D()&&(window.addEventListener("online",()=>r(!0)),window.addEventListener("offline",()=>r(!1)))}function vn(r){$()&&"u">typeof c.g&&null!=c.g&&c.g.NetInfo&&c.g?.NetInfo.addEventListener(i=>r(i?.isConnected))}let t$={};let sr=class sr{static get(r){return t$[r]}static set(r,i){t$[r]=i}static delete(r){delete t$[r]}};let tB=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,tF=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,tK=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function jsonParseTransform(r,i){if("__proto__"===r||"constructor"===r&&i&&"object"==typeof i&&"prototype"in i){warnKeyDropped(r);return}return i}function warnKeyDropped(r){console.warn(`[destr] Dropping "${r}" key to prevent prototype pollution.`)}function destr(r,i={}){if("string"!=typeof r)return r;let c=r.trim();if('"'===r[0]&&r.endsWith('"')&&!r.includes("\\"))return c.slice(1,-1);if(c.length<=9){let r=c.toLowerCase();if("true"===r)return!0;if("false"===r)return!1;if("undefined"===r)return;if("null"===r)return null;if("nan"===r)return Number.NaN;if("infinity"===r)return Number.POSITIVE_INFINITY;if("-infinity"===r)return Number.NEGATIVE_INFINITY}if(!tK.test(r)){if(i.strict)throw SyntaxError("[destr] Invalid JSON");return r}try{if(tB.test(r)||tF.test(r)){if(i.strict)throw Error("[destr] Possible prototype pollution");return JSON.parse(r,jsonParseTransform)}return JSON.parse(r)}catch(c){if(i.strict)throw c;return r}}var tV=c(67133).Buffer;function wrapToPromise(r){return r&&"function"==typeof r.then?r:Promise.resolve(r)}function asyncCall(r,...i){try{return wrapToPromise(r(...i))}catch(r){return Promise.reject(r)}}function isPrimitive(r){let i=typeof r;return null===r||"object"!==i&&"function"!==i}function isPureObject(r){let i=Object.getPrototypeOf(r);return!i||i.isPrototypeOf(Object)}function stringify(r){if(isPrimitive(r))return String(r);if(isPureObject(r)||Array.isArray(r))return JSON.stringify(r);if("function"==typeof r.toJSON)return stringify(r.toJSON());throw Error("[unstorage] Cannot stringify value!")}let tW="base64:";function serializeRaw(r){if("string"==typeof r)return r;let i=tV.from(r).toString("base64");return tW+i}function deserializeRaw(r){return"string"==typeof r&&r.startsWith(tW)?tV.from(r.slice(tW.length),"base64"):r}function normalizeKey(r){return r?r.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function joinKeys(...r){return normalizeKey(r.join(":"))}function unstorage_8581f561_normalizeBaseKey(r){return(r=normalizeKey(r))?r+":":""}function defineDriver(r){return r}let tG=defineDriver(()=>{let r=new Map;return{name:"memory",options:{},hasItem:i=>r.has(i),getItem:i=>r.get(i)??null,getItemRaw:i=>r.get(i)??null,setItem(i,c){r.set(i,c)},setItemRaw(i,c){r.set(i,c)},removeItem(i){r.delete(i)},getKeys:()=>Array.from(r.keys()),clear(){r.clear()},dispose(){r.clear()}}});function createStorage(r={}){let i={mounts:{"":r.driver||tG()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},getMount=r=>{for(let c of i.mountpoints)if(r.startsWith(c))return{base:c,relativeKey:r.slice(c.length),driver:i.mounts[c]};return{base:"",relativeKey:r,driver:i.mounts[""]}},getMounts=(r,c)=>i.mountpoints.filter(i=>i.startsWith(r)||c&&r.startsWith(i)).map(c=>({relativeBase:r.length>c.length?r.slice(c.length):void 0,mountpoint:c,driver:i.mounts[c]})),onChange=(r,c)=>{if(i.watching)for(let u of(c=normalizeKey(c),i.watchListeners))u(r,c)},startWatch=async()=>{if(!i.watching)for(let r in i.watching=!0,i.mounts)i.unwatch[r]=await watch(i.mounts[r],onChange,r)},stopWatch=async()=>{if(i.watching){for(let r in i.unwatch)await i.unwatch[r]();i.unwatch={},i.watching=!1}},runBatch=(r,i,c)=>{let u=new Map,getBatch=r=>{let i=u.get(r.base);return i||(i={driver:r.driver,base:r.base,items:[]},u.set(r.base,i)),i};for(let c of r){let r="string"==typeof c,u=normalizeKey(r?c:c.key),l=r?void 0:c.value,d=r||!c.options?i:{...i,...c.options},p=getMount(u);getBatch(p).items.push({key:u,value:l,relativeKey:p.relativeKey,options:d})}return Promise.all([...u.values()].map(r=>c(r))).then(r=>r.flat())},c={hasItem(r,i={}){r=normalizeKey(r);let{relativeKey:c,driver:u}=getMount(r);return asyncCall(u.hasItem,c,i)},getItem(r,i={}){r=normalizeKey(r);let{relativeKey:c,driver:u}=getMount(r);return asyncCall(u.getItem,c,i).then(r=>destr(r))},getItems:(r,i)=>runBatch(r,i,r=>r.driver.getItems?asyncCall(r.driver.getItems,r.items.map(r=>({key:r.relativeKey,options:r.options})),i).then(i=>i.map(i=>({key:joinKeys(r.base,i.key),value:destr(i.value)}))):Promise.all(r.items.map(i=>asyncCall(r.driver.getItem,i.relativeKey,i.options).then(r=>({key:i.key,value:destr(r)}))))),getItemRaw(r,i={}){r=normalizeKey(r);let{relativeKey:c,driver:u}=getMount(r);return u.getItemRaw?asyncCall(u.getItemRaw,c,i):asyncCall(u.getItem,c,i).then(r=>deserializeRaw(r))},async setItem(r,i,u={}){if(void 0===i)return c.removeItem(r);r=normalizeKey(r);let{relativeKey:l,driver:d}=getMount(r);d.setItem&&(await asyncCall(d.setItem,l,stringify(i),u),d.watch||onChange("update",r))},async setItems(r,i){await runBatch(r,i,async r=>{if(r.driver.setItems)return asyncCall(r.driver.setItems,r.items.map(r=>({key:r.relativeKey,value:stringify(r.value),options:r.options})),i);r.driver.setItem&&await Promise.all(r.items.map(i=>asyncCall(r.driver.setItem,i.relativeKey,stringify(i.value),i.options)))})},async setItemRaw(r,i,u={}){if(void 0===i)return c.removeItem(r,u);r=normalizeKey(r);let{relativeKey:l,driver:d}=getMount(r);if(d.setItemRaw)await asyncCall(d.setItemRaw,l,i,u);else{if(!d.setItem)return;await asyncCall(d.setItem,l,serializeRaw(i),u)}d.watch||onChange("update",r)},async removeItem(r,i={}){"boolean"==typeof i&&(i={removeMeta:i}),r=normalizeKey(r);let{relativeKey:c,driver:u}=getMount(r);u.removeItem&&(await asyncCall(u.removeItem,c,i),(i.removeMeta||i.removeMata)&&await asyncCall(u.removeItem,c+"$",i),u.watch||onChange("remove",r))},async getMeta(r,i={}){"boolean"==typeof i&&(i={nativeOnly:i}),r=normalizeKey(r);let{relativeKey:c,driver:u}=getMount(r),l=Object.create(null);if(u.getMeta&&Object.assign(l,await asyncCall(u.getMeta,c,i)),!i.nativeOnly){let r=await asyncCall(u.getItem,c+"$",i).then(r=>destr(r));r&&"object"==typeof r&&("string"==typeof r.atime&&(r.atime=new Date(r.atime)),"string"==typeof r.mtime&&(r.mtime=new Date(r.mtime)),Object.assign(l,r))}return l},setMeta(r,i,c={}){return this.setItem(r+"$",i,c)},removeMeta(r,i={}){return this.removeItem(r+"$",i)},async getKeys(r,i={}){r=unstorage_8581f561_normalizeBaseKey(r);let c=getMounts(r,!0),u=[],l=[];for(let r of c){let c=await asyncCall(r.driver.getKeys,r.relativeBase,i),d=c.map(i=>r.mountpoint+normalizeKey(i)).filter(r=>!u.some(i=>r.startsWith(i)));l.push(...d),u=[r.mountpoint,...u.filter(i=>!i.startsWith(r.mountpoint))]}return r?l.filter(i=>i.startsWith(r)&&!i.endsWith("$")):l.filter(r=>!r.endsWith("$"))},async clear(r,i={}){r=unstorage_8581f561_normalizeBaseKey(r),await Promise.all(getMounts(r,!1).map(async r=>{if(r.driver.clear)return asyncCall(r.driver.clear,r.relativeBase,i);if(r.driver.removeItem){let c=await r.driver.getKeys(r.relativeBase||"",i);return Promise.all(c.map(c=>r.driver.removeItem(c,i)))}}))},async dispose(){await Promise.all(Object.values(i.mounts).map(r=>dispose(r)))},watch:async r=>(await startWatch(),i.watchListeners.push(r),async()=>{i.watchListeners=i.watchListeners.filter(i=>i!==r),0===i.watchListeners.length&&await stopWatch()}),async unwatch(){i.watchListeners=[],await stopWatch()},mount(r,u){if((r=unstorage_8581f561_normalizeBaseKey(r))&&i.mounts[r])throw Error(`already mounted at ${r}`);return r&&(i.mountpoints.push(r),i.mountpoints.sort((r,i)=>i.length-r.length)),i.mounts[r]=u,i.watching&&Promise.resolve(watch(u,onChange,r)).then(c=>{i.unwatch[r]=c}).catch(console.error),c},async unmount(r,c=!0){(r=unstorage_8581f561_normalizeBaseKey(r))&&i.mounts[r]&&(i.watching&&r in i.unwatch&&(i.unwatch[r](),delete i.unwatch[r]),c&&await dispose(i.mounts[r]),i.mountpoints=i.mountpoints.filter(i=>i!==r),delete i.mounts[r])},getMount(r=""){r=normalizeKey(r)+":";let i=getMount(r);return{driver:i.driver,base:i.base}},getMounts(r="",i={}){r=normalizeKey(r);let c=getMounts(r,i.parents);return c.map(r=>({driver:r.driver,base:r.mountpoint}))}};return c}function watch(r,i,c){return r.watch?r.watch((r,u)=>i(r,c+u)):()=>{}}async function dispose(r){"function"==typeof r.dispose&&await asyncCall(r.dispose)}function promisifyRequest(r){return new Promise((i,c)=>{r.oncomplete=r.onsuccess=()=>i(r.result),r.onabort=r.onerror=()=>c(r.error)})}function createStore(r,i){let c=indexedDB.open(r);c.onupgradeneeded=()=>c.result.createObjectStore(i);let u=promisifyRequest(c);return(r,c)=>u.then(u=>c(u.transaction(i,r).objectStore(i)))}function defaultGetStore(){return u||(u=createStore("keyval-store","keyval")),u}function get(r,i=defaultGetStore()){return i("readonly",i=>promisifyRequest(i.get(r)))}function set(r,i,c=defaultGetStore()){return c("readwrite",c=>(c.put(i,r),promisifyRequest(c.transaction)))}function del(r,i=defaultGetStore()){return i("readwrite",i=>(i.delete(r),promisifyRequest(i.transaction)))}function clear(r=defaultGetStore()){return r("readwrite",r=>(r.clear(),promisifyRequest(r.transaction)))}function eachCursor(r,i){return r.openCursor().onsuccess=function(){this.result&&(i(this.result),this.result.continue())},promisifyRequest(r.transaction)}function keys(r=defaultGetStore()){return r("readonly",r=>{if(r.getAllKeys)return promisifyRequest(r.getAllKeys());let i=[];return eachCursor(r,r=>i.push(r.key)).then(()=>i)})}let JSONStringify=r=>JSON.stringify(r,(r,i)=>"bigint"==typeof i?i.toString()+"n":i),JSONParse=r=>{let i=r.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3');return JSON.parse(i,(r,i)=>{let c="string"==typeof i&&i.match(/^\d+n$/);return c?BigInt(i.substring(0,i.length-1)):i})};function esm_safeJsonParse(r){if("string"!=typeof r)throw Error(`Cannot safe json parse value of type ${typeof r}`);try{return JSONParse(r)}catch(i){return r}}function safeJsonStringify(r){return"string"==typeof r?r:JSONStringify(r)||""}var index_es_z=(r={})=>{let i;let c=r.base&&r.base.length>0?`${r.base}:`:"",e=r=>c+r;return r.dbName&&r.storeName&&(i=createStore(r.dbName,r.storeName)),{name:"idb-keyval",options:r,hasItem:async r=>!(typeof await get(e(r),i)>"u"),getItem:async r=>await get(e(r),i)??null,setItem:(r,c)=>set(e(r),c,i),removeItem:r=>del(e(r),i),getKeys:()=>keys(i),clear:()=>clear(i)}};let dist_index_es_=class dist_index_es_{constructor(){this.indexedDb=createStorage({driver:index_es_z({dbName:"WALLET_CONNECT_V2_INDEXED_DB",storeName:"keyvaluestorage"})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(r=>[r.key,r.value])}async getItem(r){let i=await this.indexedDb.getItem(r);if(null!==i)return i}async setItem(r,i){await this.indexedDb.setItem(r,safeJsonStringify(i))}async removeItem(r){await this.indexedDb.removeItem(r)}};var tJ="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof c.g?c.g:"u">typeof self?self:{},tY={exports:{}};function dist_index_es_k(r){var i;return[r[0],esm_safeJsonParse(null!=(i=r[1])?i:"")]}!function(){let r;function t(){}(r=t).prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},r.prototype.setItem=function(r,i){this[r]=String(i)},r.prototype.removeItem=function(r){delete this[r]},r.prototype.clear=function(){let r=this;Object.keys(r).forEach(function(i){r[i]=void 0,delete r[i]})},r.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},r.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),"u">typeof tJ&&tJ.localStorage?tY.exports=tJ.localStorage:"u">typeof window&&window.localStorage?tY.exports=window.localStorage:tY.exports=new t}();let index_es_K=class index_es_K{constructor(){this.localStorage=tY.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(dist_index_es_k)}async getItem(r){let i=this.localStorage.getItem(r);if(null!==i)return esm_safeJsonParse(i)}async setItem(r,i){this.localStorage.setItem(r,safeJsonStringify(i))}async removeItem(r){this.localStorage.removeItem(r)}};let index_es_O=async(r,i,c)=>{let u="wc_storage_version",l=await i.getItem(u);if(l&&l>=1){c(i);return}let d=await r.getKeys();if(!d.length){c(i);return}let p=[];for(;d.length;){let c=d.shift();if(!c)continue;let u=c.toLowerCase();if(u.includes("wc@")||u.includes("walletconnect")||u.includes("wc_")||u.includes("wallet_connect")){let u=await r.getItem(c);await i.setItem(c,u),p.push(c)}}await i.setItem(u,1),c(i),index_es_j(r,p)},index_es_j=async(r,i)=>{i.length&&i.forEach(async i=>{await r.removeItem(i)})};let dist_index_es_h=class dist_index_es_h{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};let r=new index_es_K;this.storage=r;try{let i=new dist_index_es_;index_es_O(r,i,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(r){return await this.initialize(),this.storage.getItem(r)}async setItem(r,i){return await this.initialize(),this.storage.setItem(r,i)}async removeItem(r){return await this.initialize(),this.storage.removeItem(r)}async initialize(){this.initialized||await new Promise(r=>{let i=setInterval(()=>{this.initialized&&(clearInterval(i),r())},20)})}};var tQ=c(63943),tZ=c(90440),tX=c.n(tZ);let t0={level:"info"},t1="custom_context";var t5=Object.defineProperty,t3=Object.defineProperties,t2=Object.getOwnPropertyDescriptors,t6=Object.getOwnPropertySymbols,t8=Object.prototype.hasOwnProperty,t4=Object.prototype.propertyIsEnumerable,index_es_f=(r,i,c)=>i in r?t5(r,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):r[i]=c,index_es_i=(r,i)=>{for(var c in i||(i={}))t8.call(i,c)&&index_es_f(r,c,i[c]);if(t6)for(var c of t6(i))t4.call(i,c)&&index_es_f(r,c,i[c]);return r},dist_index_es_g=(r,i)=>t3(r,t2(i));function logger_dist_index_es_k(r){return dist_index_es_g(index_es_i({},r),{level:r?.level||t0.level})}function v(r,i=t1){return r[i]||""}function index_es_b(r,i,c=t1){return r[c]=i,r}function index_es_y(r,i=t1){return typeof r.bindings>"u"?v(r,i):r.bindings().context||""}function dist_index_es_w(r,i,c=t1){let u=index_es_y(r,c);return u.trim()?`${u}/${i}`:i}function dist_index_es_E(r,i,c=t1){let u=dist_index_es_w(r,i,c),l=r.child({context:u});return index_es_b(l,u,c)}var t9=c(95097);let dist_index_es_n=class dist_index_es_n extends t9.q{constructor(r){super(),this.opts=r,this.protocol="wc",this.version=2}};let types_dist_index_es_h=class types_dist_index_es_h extends t9.q{constructor(r,i){super(),this.core=r,this.logger=i,this.records=new Map}};let index_es_a=class index_es_a{constructor(r,i){this.logger=r,this.core=i}};let dist_index_es_u=class dist_index_es_u extends t9.q{constructor(r,i){super(),this.relayer=r,this.logger=i}};let types_dist_index_es_g=class types_dist_index_es_g extends t9.q{constructor(r){super()}};let types_dist_index_es_p=class types_dist_index_es_p{constructor(r,i,c,u){this.core=r,this.logger=i,this.name=c}};let dist_index_es_d=class dist_index_es_d extends t9.q{constructor(r,i){super(),this.relayer=r,this.logger=i}};let types_dist_index_es_E=class types_dist_index_es_E extends t9.q{constructor(r,i){super(),this.core=r,this.logger=i}};let dist_index_es_y=class dist_index_es_y{constructor(r,i){this.projectId=r,this.logger=i}};let index_es_v=class index_es_v{constructor(r,i){this.projectId=r,this.logger=i}};let dist_index_es_b=class dist_index_es_b{constructor(r){this.opts=r,this.protocol="wc",this.version=2}};let types_dist_index_es_w=class types_dist_index_es_w{constructor(r){this.client=r}};var t7=c(80237);let ro="base64url",ra="base58btc";function encodeJSON(r){return to_string_toString(from_string_fromString(safeJsonStringify(r),"utf8"),ro)}function encodeIss(r){let i=from_string_fromString("K36",ra),c="z"+to_string_toString(concat([i,r]),ra);return["did","key",c].join(":")}function encodeSig(r){return to_string_toString(r,ro)}function encodeData(r){return from_string_fromString([encodeJSON(r.header),encodeJSON(r.payload)].join("."),"utf8")}function encodeJWT(r){return[encodeJSON(r.header),encodeJSON(r.payload),encodeSig(r.signature)].join(".")}function generateKeyPair(r=(0,ep.randomBytes)(32)){return t7._w(r)}async function signJWT(r,i,c,u,l=(0,tm.fromMiliseconds)(Date.now())){let d={alg:"EdDSA",typ:"JWT"},p=encodeIss(u.publicKey),g=l+c,_={iss:p,sub:r,aud:i,iat:l,exp:g},w=encodeData({header:d,payload:_}),S=t7.Xx(u.secretKey,w);return encodeJWT({header:d,payload:_,signature:S})}c(69859);let rp="INTERNAL_ERROR",rg="SERVER_ERROR",r_=[-32700,-32600,-32601,-32602,-32603],ry={PARSE_ERROR:{code:-32700,message:"Parse error"},INVALID_REQUEST:{code:-32600,message:"Invalid Request"},METHOD_NOT_FOUND:{code:-32601,message:"Method not found"},INVALID_PARAMS:{code:-32602,message:"Invalid params"},[rp]:{code:-32603,message:"Internal error"},[rg]:{code:-32e3,message:"Server error"}};function isReservedErrorCode(r){return r_.includes(r)}function getError(r){return Object.keys(ry).includes(r)?ry[r]:ry[rg]}function getErrorByCode(r){let i=Object.values(ry).find(i=>i.code===r);return i||ry[rg]}function parseConnectionError(r,i,c){return r.message.includes("getaddrinfo ENOTFOUND")||r.message.includes("connect ECONNREFUSED")?Error(`Unavailable ${c} RPC url at ${i}`):r}var rm=c(36014);function payloadId(r=3){let i=Date.now()*Math.pow(10,r);return i+Math.floor(Math.random()*Math.pow(10,r))}function getBigIntRpcId(r=6){return BigInt(payloadId(r))}function formatJsonRpcRequest(r,i,c){return{id:c||payloadId(),jsonrpc:"2.0",method:r,params:i}}function formatJsonRpcResult(r,i){return{id:r,jsonrpc:"2.0",result:i}}function formatJsonRpcError(r,i,c){return{id:r,jsonrpc:"2.0",error:formatErrorMessage(i,c)}}function formatErrorMessage(r,i){return void 0===r?getError(rp):("string"==typeof r&&(r=Object.assign(Object.assign({},getError(rg)),{message:r})),void 0!==i&&(r.data=i),isReservedErrorCode(r.code)&&(r=getErrorByCode(r.code)),r)}let misc_IEvents=class misc_IEvents{};let IBaseJsonRpcProvider=class IBaseJsonRpcProvider extends misc_IEvents{constructor(){super()}};let IJsonRpcProvider=class IJsonRpcProvider extends IBaseJsonRpcProvider{constructor(r){super()}};function getUrlProtocol(r){let i=r.match(RegExp(/^\w+:/,"gi"));if(i&&i.length)return i[0]}function matchRegexProtocol(r,i){let c=getUrlProtocol(r);return void 0!==c&&new RegExp(i).test(c)}function isHttpUrl(r){return matchRegexProtocol(r,"^https?:")}function isWsUrl(r){return matchRegexProtocol(r,"^wss?:")}function isLocalhostUrl(r){return RegExp("wss?://localhost(:d{2,5})?").test(r)}function isJsonRpcPayload(r){return"object"==typeof r&&"id"in r&&"jsonrpc"in r&&"2.0"===r.jsonrpc}function isJsonRpcRequest(r){return isJsonRpcPayload(r)&&"method"in r}function isJsonRpcResponse(r){return isJsonRpcPayload(r)&&(isJsonRpcResult(r)||isJsonRpcError(r))}function isJsonRpcResult(r){return"result"in r}function isJsonRpcError(r){return"error"in r}let JsonRpcProvider=class JsonRpcProvider extends IJsonRpcProvider{constructor(r){super(r),this.events=new Q.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(r),this.connection.connected&&this.registerEventListeners()}async connect(r=this.connection){await this.open(r)}async disconnect(){await this.close()}on(r,i){this.events.on(r,i)}once(r,i){this.events.once(r,i)}off(r,i){this.events.off(r,i)}removeListener(r,i){this.events.removeListener(r,i)}async request(r,i){return this.requestStrict(formatJsonRpcRequest(r.method,r.params||[],r.id||getBigIntRpcId().toString()),i)}async requestStrict(r,i){return new Promise(async(c,u)=>{if(!this.connection.connected)try{await this.open()}catch(r){u(r)}this.events.on(`${r.id}`,r=>{isJsonRpcError(r)?u(r.error):c(r.result)});try{await this.connection.send(r,i)}catch(r){u(r)}})}setConnection(r=this.connection){return r}onPayload(r){this.events.emit("payload",r),isJsonRpcResponse(r)?this.events.emit(`${r.id}`,r):this.events.emit("message",{type:r.method,data:r.params})}onClose(r){r&&3e3===r.code&&this.events.emit("error",Error(`WebSocket connection closed abnormally with code: ${r.code} ${r.reason?`(${r.reason})`:""}`)),this.events.emit("disconnect")}async open(r=this.connection){this.connection===r&&this.connection.connected||(this.connection.connected&&this.close(),"string"==typeof r&&(await this.connection.open(r),r=this.connection),this.connection=this.setConnection(r),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",r=>this.onPayload(r)),this.connection.on("close",r=>this.onClose(r)),this.connection.on("error",r=>this.events.emit("error",r)),this.connection.on("register_error",r=>this.onClose()),this.hasRegisteredEventListeners=!0)}};let jsonrpc_ws_connection_dist_index_es_b=()=>"u">typeof WebSocket||"u">typeof c.g&&"u">typeof c.g.WebSocket||"u">typeof window&&"u">typeof window.WebSocket||"u">typeof self&&"u">typeof self.WebSocket,dist_index_es_a=r=>r.split("?")[0],rb="u">typeof WebSocket?WebSocket:"u">typeof c.g&&"u">typeof c.g.WebSocket?c.g.WebSocket:"u">typeof window&&"u">typeof window.WebSocket?window.WebSocket:"u">typeof self&&"u">typeof self.WebSocket?self.WebSocket:c(44623);let dist_index_es_f=class dist_index_es_f{constructor(r){if(this.url=r,this.events=new Q.EventEmitter,this.registering=!1,!isWsUrl(r))throw Error(`Provided URL is not compatible with WebSocket connection: ${r}`);this.url=r}get connected(){return"u">typeof this.socket}get connecting(){return this.registering}on(r,i){this.events.on(r,i)}once(r,i){this.events.once(r,i)}off(r,i){this.events.off(r,i)}removeListener(r,i){this.events.removeListener(r,i)}async open(r=this.url){await this.register(r)}async close(){return new Promise((r,i)=>{if(typeof this.socket>"u"){i(Error("Connection already closed"));return}this.socket.onclose=i=>{this.onClose(i),r()},this.socket.close()})}async send(r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(safeJsonStringify(r))}catch(i){this.onError(r.id,i)}}register(r=this.url){if(!isWsUrl(r))throw Error(`Provided URL is not compatible with WebSocket connection: ${r}`);if(this.registering){let r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((r,i)=>{this.events.once("register_error",r=>{this.resetMaxListeners(),i(r)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=r,this.registering=!0,new Promise((i,c)=>{let u=new URLSearchParams(r).get("origin"),l=(0,rm.isReactNative)()?{headers:{origin:u}}:{rejectUnauthorized:!isLocalhostUrl(r)},d=new rb(r,[],l);jsonrpc_ws_connection_dist_index_es_b()?d.onerror=r=>{c(this.emitError(r.error))}:d.on("error",r=>{c(this.emitError(r))}),d.onopen=()=>{this.onOpen(d),i(d)}})}onOpen(r){r.onmessage=r=>this.onPayload(r),r.onclose=r=>this.onClose(r),this.socket=r,this.registering=!1,this.events.emit("open")}onClose(r){this.socket=void 0,this.registering=!1,this.events.emit("close",r)}onPayload(r){if(typeof r.data>"u")return;let i="string"==typeof r.data?esm_safeJsonParse(r.data):r.data;this.events.emit("payload",i)}onError(r,i){let c=this.parseError(i),u=c.message||c.toString(),l=formatJsonRpcError(r,u);this.events.emit("payload",l)}parseError(r,i=this.url){return parseConnectionError(r,dist_index_es_a(i),"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(r){let i=this.parseError(Error(r?.message||`WebSocket connection failed for host: ${dist_index_es_a(this.url)}`));return this.events.emit("register_error",i),i}};var rw=c(99780),rE=c.n(rw),rx=c(31935),rS=c.n(rx),rD=c(25566),Ji=function(r,i){if(r.length>=255)throw TypeError("Alphabet too long");for(var c=new Uint8Array(256),u=0;u<c.length;u++)c[u]=255;for(var l=0;l<r.length;l++){var d=r.charAt(l),p=d.charCodeAt(0);if(255!==c[p])throw TypeError(d+" is ambiguous");c[p]=l}var g=r.length,_=r.charAt(0),w=Math.log(g)/Math.log(256),S=Math.log(256)/Math.log(g);function y(r){if("string"!=typeof r)throw TypeError("Expected String");if(0===r.length)return new Uint8Array;var i=0;if(" "!==r[0]){for(var u=0,l=0;r[i]===_;)u++,i++;for(var d=(r.length-i)*w+1>>>0,p=new Uint8Array(d);r[i];){var S=c[r.charCodeAt(i)];if(255===S)return;for(var P=0,C=d-1;(0!==S||P<l)&&-1!==C;C--,P++)S+=g*p[C]>>>0,p[C]=S%256>>>0,S=S/256>>>0;if(0!==S)throw Error("Non-zero carry");l=P,i++}if(" "!==r[i]){for(var L=d-l;L!==d&&0===p[L];)L++;for(var k=new Uint8Array(u+(d-L)),q=u;L!==d;)k[q++]=p[L++];return k}}}function M(r){var c=y(r);if(c)return c;throw Error(`Non-${i} character`)}return{encode:function(i){if(i instanceof Uint8Array||(ArrayBuffer.isView(i)?i=new Uint8Array(i.buffer,i.byteOffset,i.byteLength):Array.isArray(i)&&(i=Uint8Array.from(i))),!(i instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===i.length)return"";for(var c=0,u=0,l=0,d=i.length;l!==d&&0===i[l];)l++,c++;for(var p=(d-l)*S+1>>>0,w=new Uint8Array(p);l!==d;){for(var P=i[l],C=0,L=p-1;(0!==P||C<u)&&-1!==L;L--,C++)P+=256*w[L]>>>0,w[L]=P%g>>>0,P=P/g>>>0;if(0!==P)throw Error("Non-zero carry");u=C,l++}for(var k=p-u;k!==p&&0===w[k];)k++;for(var q=_.repeat(c);k<p;++k)q+=r.charAt(w[k]);return q},decodeUnsafe:y,decode:M}};let index_es_Ne=r=>{if(r instanceof Uint8Array&&"Uint8Array"===r.constructor.name)return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw Error("Unknown type, must be binary type")},Wi=r=>new TextEncoder().encode(r),Qi=r=>new TextDecoder().decode(r);let Zi=class Zi{constructor(r,i,c){this.name=r,this.prefix=i,this.baseEncode=c}encode(r){if(r instanceof Uint8Array)return`${this.prefix}${this.baseEncode(r)}`;throw Error("Unknown type, must be binary type")}};let es=class es{constructor(r,i,c){if(this.name=r,this.prefix=i,void 0===i.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=i.codePointAt(0),this.baseDecode=c}decode(r){if("string"==typeof r){if(r.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(r)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(r.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(r){return index_es_Ue(this,r)}};let ts=class ts{constructor(r){this.decoders=r}or(r){return index_es_Ue(this,r)}decode(r){let i=r[0],c=this.decoders[i];if(c)return c.decode(r);throw RangeError(`Unable to decode multibase string ${JSON.stringify(r)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};let index_es_Ue=(r,i)=>new ts({...r.decoders||{[r.prefix]:r},...i.decoders||{[i.prefix]:i}});let is=class is{constructor(r,i,c,u){this.name=r,this.prefix=i,this.baseEncode=c,this.baseDecode=u,this.encoder=new Zi(r,i,c),this.decoder=new es(r,i,u)}encode(r){return this.encoder.encode(r)}decode(r){return this.decoder.decode(r)}};let W=({name:r,prefix:i,encode:c,decode:u})=>new is(r,i,c,u),dist_index_es_B=({prefix:r,name:i,alphabet:c})=>{let{encode:u,decode:l}=Ji(c,i);return W({prefix:r,name:i,encode:u,decode:r=>index_es_Ne(l(r))})},ss=(r,i,c,u)=>{let l={};for(let r=0;r<i.length;++r)l[i[r]]=r;let d=r.length;for(;"="===r[d-1];)--d;let p=new Uint8Array(d*c/8|0),g=0,_=0,w=0;for(let i=0;i<d;++i){let d=l[r[i]];if(void 0===d)throw SyntaxError(`Non-${u} character`);_=_<<c|d,(g+=c)>=8&&(g-=8,p[w++]=255&_>>g)}if(g>=c||255&_<<8-g)throw SyntaxError("Unexpected end of data");return p},rs=(r,i,c)=>{let u="="===i[i.length-1],l=(1<<c)-1,d="",p=0,g=0;for(let u=0;u<r.length;++u)for(g=g<<8|r[u],p+=8;p>c;)p-=c,d+=i[l&g>>p];if(p&&(d+=i[l&g<<c-p]),u)for(;d.length*c&7;)d+="=";return d},core_dist_index_es_g=({name:r,prefix:i,bitsPerChar:c,alphabet:u})=>W({prefix:i,name:r,encode:r=>rs(r,u,c),decode:i=>ss(i,u,c,r)}),rI=W({prefix:"\x00",name:"identity",encode:r=>Qi(r),decode:r=>Wi(r)});var rO=Object.freeze({__proto__:null,identity:rI});let rP=core_dist_index_es_g({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var rC=Object.freeze({__proto__:null,base2:rP});let rA=core_dist_index_es_g({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var rR=Object.freeze({__proto__:null,base8:rA});let rN=dist_index_es_B({prefix:"9",name:"base10",alphabet:"0123456789"});var rT=Object.freeze({__proto__:null,base10:rN});let rj=core_dist_index_es_g({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),rU=core_dist_index_es_g({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var rL=Object.freeze({__proto__:null,base16:rj,base16upper:rU});let rk=core_dist_index_es_g({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),rM=core_dist_index_es_g({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),rq=core_dist_index_es_g({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),rz=core_dist_index_es_g({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),rH=core_dist_index_es_g({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),r$=core_dist_index_es_g({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),rB=core_dist_index_es_g({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),rF=core_dist_index_es_g({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),rK=core_dist_index_es_g({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var rV=Object.freeze({__proto__:null,base32:rk,base32upper:rM,base32pad:rq,base32padupper:rz,base32hex:rH,base32hexupper:r$,base32hexpad:rB,base32hexpadupper:rF,base32z:rK});let rW=dist_index_es_B({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),rG=dist_index_es_B({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var rJ=Object.freeze({__proto__:null,base36:rW,base36upper:rG});let rY=dist_index_es_B({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),rQ=dist_index_es_B({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var rZ=Object.freeze({__proto__:null,base58btc:rY,base58flickr:rQ});let rX=core_dist_index_es_g({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),r0=core_dist_index_es_g({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),r1=core_dist_index_es_g({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),r5=core_dist_index_es_g({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var r3=Object.freeze({__proto__:null,base64:rX,base64pad:r0,base64url:r1,base64urlpad:r5});let r2=Array.from("\uD83D\uDE80\uD83E\uDE90☄\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09☀\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02❤\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09☺\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E✌✨\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D❣\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33✋\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13⭐✅\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6✔\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90☹\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20☝\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B⚽\uD83E\uDD19☕\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81⚡\uD83C\uDF1E\uD83C\uDF88❌✊\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C✈\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74▶➡❓\uD83D\uDC8E\uD83D\uDCB8⬇\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A⚠\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37☎\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51❄\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),r6=r2.reduce((r,i,c)=>(r[c]=i,r),[]),r8=r2.reduce((r,i,c)=>(r[i.codePointAt(0)]=c,r),[]);function Ms(r){return r.reduce((r,i)=>r+=r6[i],"")}function ks(r){let i=[];for(let c of r){let r=r8[c.codePointAt(0)];if(void 0===r)throw Error(`Non-base256emoji character: ${c}`);i.push(r)}return new Uint8Array(i)}let r4=W({prefix:"\uD83D\uDE80",name:"base256emoji",encode:Ms,decode:ks});var r9=Object.freeze({__proto__:null,base256emoji:r4});function dist_index_es_Fe(r,i,c){i=i||[],c=c||0;for(var u=c;r>=2147483648;)i[c++]=255&r|128,r/=128;for(;-128&r;)i[c++]=255&r|128,r>>>=7;return i[c]=0|r,dist_index_es_Fe.bytes=c-u+1,i}function index_es_he(r,i){var c,u=0,i=i||0,l=0,d=i,p=r.length;do{if(d>=p)throw index_es_he.bytes=0,RangeError("Could not decode varint");c=r[d++],u+=l<28?(127&c)<<l:(127&c)*Math.pow(2,l),l+=7}while(c>=128);return index_es_he.bytes=d-i,u}var r7={encode:dist_index_es_Fe,decode:index_es_he,encodingLength:function(r){return r<128?1:r<16384?2:r<2097152?3:r<268435456?4:r<34359738368?5:r<4398046511104?6:r<562949953421312?7:r<72057594037927940?8:r<0x7fffffffffffffff?9:10}};let index_es_Ke=(r,i,c=0)=>(r7.encode(r,i,c),i),index_es_Be=r=>r7.encodingLength(r),index_es_ce=(r,i)=>{let c=i.byteLength,u=index_es_Be(r),l=u+index_es_Be(c),d=new Uint8Array(l+c);return index_es_Ke(r,d,0),index_es_Ke(c,d,u),d.set(i,l),new dist_index_es_or(r,c,i,d)};let dist_index_es_or=class dist_index_es_or{constructor(r,i,c,u){this.code=r,this.size=i,this.digest=c,this.bytes=u}};let index_es_Ve=({name:r,code:i,encode:c})=>new ar(r,i,c);let ar=class ar{constructor(r,i,c){this.name=r,this.code=i,this.encode=c}digest(r){if(r instanceof Uint8Array){let i=this.encode(r);return i instanceof Uint8Array?index_es_ce(this.code,i):i.then(r=>index_es_ce(this.code,r))}throw Error("Unknown type, must be binary type")}};let index_es_qe=r=>async i=>new Uint8Array(await crypto.subtle.digest(r,i)),ir=index_es_Ve({name:"sha2-256",code:18,encode:index_es_qe("SHA-256")}),io=index_es_Ve({name:"sha2-512",code:19,encode:index_es_qe("SHA-512")});var iu=Object.freeze({__proto__:null,sha256:ir,sha512:io}),id=Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:index_es_Ne,digest:r=>index_es_ce(0,index_es_Ne(r))}});new TextEncoder,new TextDecoder;let ig={...rO,...rC,...rR,...rT,...rL,...rV,...rJ,...rZ,...r3,...r9};function index_es_He(r){return null!=globalThis.Buffer?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function Dr(r=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?index_es_He(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function index_es_Je(r,i,c,u){return{name:r,prefix:i,encoder:{name:r,prefix:i,encode:c},decoder:{decode:u}}}({...iu,...id});let i_=index_es_Je("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),iy=index_es_Je("ascii","a",r=>{let i="a";for(let c=0;c<r.length;c++)i+=String.fromCharCode(r[c]);return i},r=>{r=r.substring(1);let i=Dr(r.length);for(let c=0;c<r.length;c++)i[c]=r.charCodeAt(c);return i}),im={utf8:i_,"utf-8":i_,hex:ig.base16,latin1:iy,ascii:iy,binary:iy,...ig};function mr(r,i="utf8"){let c=im[i];if(!c)throw Error(`Unsupported encoding "${i}"`);return("utf8"===i||"utf-8"===i)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?index_es_He(globalThis.Buffer.from(r,"utf-8")):c.decoder.decode(`${c.prefix}${r}`)}let ib="core",iw=`wc@2:${ib}:`,iE={logger:"error"},ix={database:":memory:"},iS="client_ed25519_seed",iD=tm.ONE_DAY,iI=tm.SIX_HOURS,iO="wss://relay.walletconnect.com",iP="wss://relay.walletconnect.org",iC={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",publish:"relayer_publish"},iA={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},iR=tm.ONE_SECOND,iN={created:"subscription_created",deleted:"subscription_deleted",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},iT=1e3*tm.FIVE_SECONDS,ij={wc_pairingDelete:{req:{ttl:tm.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:tm.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:tm.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:tm.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:tm.ONE_DAY,prompt:!1,tag:0},res:{ttl:tm.ONE_DAY,prompt:!1,tag:0}}},iU={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},iL={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},ik={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},iM="verify-api",iq="https://verify.walletconnect.com",iz="https://verify.walletconnect.org",iH=[iq,iz];let index_es_Pt=class index_es_Pt{constructor(r,i){this.core=r,this.logger=i,this.keychain=new Map,this.name="keychain",this.version="0.3",this.initialized=!1,this.storagePrefix=iw,this.init=async()=>{if(!this.initialized){let r=await this.getKeyChain();"u">typeof r&&(this.keychain=r),this.initialized=!0}},this.has=r=>(this.isInitialized(),this.keychain.has(r)),this.set=async(r,i)=>{this.isInitialized(),this.keychain.set(r,i),await this.persist()},this.get=r=>{this.isInitialized();let i=this.keychain.get(r);if(typeof i>"u"){let{message:i}=index_es_N("NO_MATCHING_KEY",`${this.name}: ${r}`);throw Error(i)}return i},this.del=async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()},this.core=r,this.logger=dist_index_es_E(i,this.name)}get context(){return index_es_y(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(r){await this.core.storage.setItem(this.storageKey,rt(r))}async getKeyChain(){let r=await this.core.storage.getItem(this.storageKey);return"u">typeof r?ot(r):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){let{message:r}=index_es_N("NOT_INITIALIZED",this.name);throw Error(r)}}};let index_es_xt=class index_es_xt{constructor(r,i,c){this.core=r,this.logger=i,this.name="crypto",this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=r=>(this.isInitialized(),this.keychain.has(r)),this.getClientId=async()=>{this.isInitialized();let r=await this.getClientSeed(),i=generateKeyPair(r);return encodeIss(i.publicKey)},this.generateKeyPair=()=>{this.isInitialized();let r=kn();return this.setPrivateKey(r.publicKey,r.privateKey)},this.signJWT=async r=>{this.isInitialized();let i=await this.getClientSeed(),c=generateKeyPair(i),u=Vn();return await signJWT(u,r,iD,c)},this.generateSharedKey=(r,i,c)=>{this.isInitialized();let u=this.getPrivateKey(r),l=Mn(u,i);return this.setSymKey(l,c)},this.setSymKey=async(r,i)=>{this.isInitialized();let c=i||Kn(r);return await this.keychain.set(c,r),c},this.deleteKeyPair=async r=>{this.isInitialized(),await this.keychain.del(r)},this.deleteSymKey=async r=>{this.isInitialized(),await this.keychain.del(r)},this.encode=async(r,i,c)=>{this.isInitialized();let u=Ae(c),l=safeJsonStringify(i);if(qn(u)){let i=u.senderPublicKey,c=u.receiverPublicKey;r=await this.generateSharedKey(i,c)}let d=this.getSymKey(r),{type:p,senderPublicKey:g}=u;return xn({type:p,symKey:d,message:l,senderPublicKey:g})},this.decode=async(r,i,c)=>{this.isInitialized();let u=Hn(i,c);if(qn(u)){let i=u.receiverPublicKey,c=u.senderPublicKey;r=await this.generateSharedKey(i,c)}try{let c=this.getSymKey(r),u=Fn({symKey:c,encoded:i});return esm_safeJsonParse(u)}catch(i){this.logger.error(`Failed to decode message from topic: '${r}', clientId: '${await this.getClientId()}'`),this.logger.error(i)}},this.getPayloadType=r=>{let i=ee(r);return j(i.type)},this.getPayloadSenderPublicKey=r=>{let i=ee(r);return i.senderPublicKey?to_string_toString(i.senderPublicKey,tI):void 0},this.core=r,this.logger=dist_index_es_E(i,this.name),this.keychain=c||new index_es_Pt(this.core,this.logger)}get context(){return index_es_y(this.logger)}async setPrivateKey(r,i){return await this.keychain.set(r,i),r}getPrivateKey(r){return this.keychain.get(r)}async getClientSeed(){let r="";try{r=this.keychain.get(iS)}catch{r=Vn(),await this.keychain.set(iS,r)}return mr(r,"base16")}getSymKey(r){return this.keychain.get(r)}isInitialized(){if(!this.initialized){let{message:r}=index_es_N("NOT_INITIALIZED",this.name);throw Error(r)}}};let index_es_Ot=class index_es_Ot extends index_es_a{constructor(r,i){super(r,i),this.logger=r,this.core=i,this.messages=new Map,this.name="messages",this.version="0.3",this.initialized=!1,this.storagePrefix=iw,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{let r=await this.getRelayerMessages();"u">typeof r&&(this.messages=r),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}},this.set=async(r,i)=>{this.isInitialized();let c=Ln(i),u=this.messages.get(r);return typeof u>"u"&&(u={}),"u">typeof u[c]||(u[c]=i,this.messages.set(r,u),await this.persist()),c},this.get=r=>{this.isInitialized();let i=this.messages.get(r);return typeof i>"u"&&(i={}),i},this.has=(r,i)=>{this.isInitialized();let c=this.get(r),u=Ln(i);return"u">typeof c[u]},this.del=async r=>{this.isInitialized(),this.messages.delete(r),await this.persist()},this.logger=dist_index_es_E(r,this.name),this.core=i}get context(){return index_es_y(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(r){await this.core.storage.setItem(this.storageKey,rt(r))}async getRelayerMessages(){let r=await this.core.storage.getItem(this.storageKey);return"u">typeof r?ot(r):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){let{message:r}=index_es_N("NOT_INITIALIZED",this.name);throw Error(r)}}};let vr=class vr extends dist_index_es_u{constructor(r,i){super(r,i),this.relayer=r,this.logger=i,this.events=new Q.EventEmitter,this.name="publisher",this.queue=new Map,this.publishTimeout=(0,tm.toMiliseconds)(2*tm.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(r,i,c)=>{var u;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:i,opts:c}});try{let l=c?.ttl||iI,d=vt(c),p=c?.prompt||!1,g=c?.tag||0,_=c?.id||getBigIntRpcId().toString(),w={topic:r,message:i,opts:{ttl:l,relay:d,prompt:p,tag:g,id:_}},S=setTimeout(()=>this.queue.set(_,w),this.publishTimeout);try{await await ut(this.rpcPublish(r,i,l,d,p,g,_),this.publishTimeout,`Failed to publish payload, please try again. id:${_} tag:${g}`),this.removeRequestFromQueue(_),this.relayer.events.emit(iC.publish,w)}catch(r){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,null!=(u=c?.internal)&&u.throwOnFailedPublish)throw this.removeRequestFromQueue(_),r;return}finally{clearTimeout(S)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:i,opts:c}})}catch(r){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(r),r}},this.on=(r,i)=>{this.events.on(r,i)},this.once=(r,i)=>{this.events.once(r,i)},this.off=(r,i)=>{this.events.off(r,i)},this.removeListener=(r,i)=>{this.events.removeListener(r,i)},this.relayer=r,this.logger=dist_index_es_E(i,this.name),this.registerEventListeners()}get context(){return index_es_y(this.logger)}rpcPublish(r,i,c,u,l,d,p){var g,_,w,S;let P={method:Et(u.protocol).publish,params:{topic:r,message:i,ttl:c,prompt:l,tag:d},id:p};return index_es_w(null==(g=P.params)?void 0:g.prompt)&&(null==(_=P.params)||delete _.prompt),index_es_w(null==(w=P.params)?void 0:w.tag)&&(null==(S=P.params)||delete S.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:P}),this.relayer.request(P)}removeRequestFromQueue(r){this.queue.delete(r)}checkQueue(){this.queue.forEach(async r=>{let{topic:i,message:c,opts:u}=r;await this.publish(i,c,u)})}registerEventListeners(){this.relayer.core.heartbeat.on(tQ.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(iC.connection_stalled);return}this.checkQueue()}),this.relayer.on(iC.message_ack,r=>{this.removeRequestFromQueue(r.id.toString())})}};let Ir=class Ir{constructor(){this.map=new Map,this.set=(r,i)=>{let c=this.get(r);this.exists(r,i)||this.map.set(r,[...c,i])},this.get=r=>this.map.get(r)||[],this.exists=(r,i)=>this.get(r).includes(i),this.delete=(r,i)=>{if(typeof i>"u"){this.map.delete(r);return}if(!this.map.has(r))return;let c=this.get(r);if(!this.exists(r,i))return;let u=c.filter(r=>r!==i);if(!u.length){this.map.delete(r);return}this.map.set(r,u)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}};var i$=Object.defineProperty,iB=Object.defineProperties,iF=Object.getOwnPropertyDescriptors,iK=Object.getOwnPropertySymbols,iV=Object.prototype.hasOwnProperty,iW=Object.prototype.propertyIsEnumerable,index_es_zt=(r,i,c)=>i in r?i$(r,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):r[i]=c,dist_index_es_q=(r,i)=>{for(var c in i||(i={}))iV.call(i,c)&&index_es_zt(r,c,i[c]);if(iK)for(var c of iK(i))iW.call(i,c)&&index_es_zt(r,c,i[c]);return r},index_es_De=(r,i)=>iB(r,iF(i));let index_es_Nt=class index_es_Nt extends dist_index_es_d{constructor(r,i){super(r,i),this.relayer=r,this.logger=i,this.subscriptions=new Map,this.topicMap=new Ir,this.events=new Q.EventEmitter,this.name="subscription",this.version="0.3",this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=iw,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(r,i)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:i}});try{let c=vt(i),u={topic:r,relay:c};this.pending.set(r,u);let l=await this.rpcSubscribe(r,c);return this.onSubscribe(l,u),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:i}}),l}catch(r){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(r),r}},this.unsubscribe=async(r,i)=>{await this.restartToComplete(),this.isInitialized(),"u">typeof i?.id?await this.unsubscribeById(r,i.id,i):await this.unsubscribeByTopic(r,i)},this.isSubscribed=async r=>{if(this.topics.includes(r))return!0;let i=`${this.pendingSubscriptionWatchLabel}_${r}`;return await new Promise((c,u)=>{let l=new tm.Watch;l.start(i);let d=setInterval(()=>{!this.pending.has(r)&&this.topics.includes(r)&&(clearInterval(d),l.stop(i),c(!0)),l.elapsed(i)>=iT&&(clearInterval(d),l.stop(i),u(Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)},this.on=(r,i)=>{this.events.on(r,i)},this.once=(r,i)=>{this.events.once(r,i)},this.off=(r,i)=>{this.events.off(r,i)},this.removeListener=(r,i)=>{this.events.removeListener(r,i)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=r,this.logger=dist_index_es_E(i,this.name),this.clientId=""}get context(){return index_es_y(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(r,i){let c=!1;try{c=this.getSubscription(r).topic===i}catch{}return c}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(r,i){let c=this.topicMap.get(r);await Promise.all(c.map(async c=>await this.unsubscribeById(r,c,i)))}async unsubscribeById(r,i,c){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:r,id:i,opts:c}});try{let u=vt(c);await this.rpcUnsubscribe(r,i,u);let l=U("USER_DISCONNECTED",`${this.name}, ${r}`);await this.onUnsubscribe(r,i,l),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:r,id:i,opts:c}})}catch(r){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(r),r}}async rpcSubscribe(r,i){let c={method:Et(i.protocol).subscribe,params:{topic:r}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:c});try{await await ut(this.relayer.request(c),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(iC.connection_stalled)}return Ln(r+this.clientId)}async rpcBatchSubscribe(r){if(!r.length)return;let i=r[0].relay,c={method:Et(i.protocol).batchSubscribe,params:{topics:r.map(r=>r.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:c});try{return await await ut(this.relayer.request(c),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(iC.connection_stalled)}}rpcUnsubscribe(r,i,c){let u={method:Et(c.protocol).unsubscribe,params:{topic:r,id:i}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:u}),this.relayer.request(u)}onSubscribe(r,i){this.setSubscription(r,index_es_De(dist_index_es_q({},i),{id:r})),this.pending.delete(i.topic)}onBatchSubscribe(r){r.length&&r.forEach(r=>{this.setSubscription(r.id,dist_index_es_q({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(r,i,c){this.events.removeAllListeners(i),this.hasSubscription(i,r)&&this.deleteSubscription(i,c),await this.relayer.messages.del(r)}async setRelayerSubscriptions(r){await this.relayer.core.storage.setItem(this.storageKey,r)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(r,i){this.subscriptions.has(r)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:r,subscription:i}),this.addSubscription(r,i))}addSubscription(r,i){this.subscriptions.set(r,dist_index_es_q({},i)),this.topicMap.set(i.topic,r),this.events.emit(iN.created,i)}getSubscription(r){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:r});let i=this.subscriptions.get(r);if(!i){let{message:i}=index_es_N("NO_MATCHING_KEY",`${this.name}: ${r}`);throw Error(i)}return i}deleteSubscription(r,i){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:r,reason:i});let c=this.getSubscription(r);this.subscriptions.delete(r),this.topicMap.delete(c.topic,r),this.events.emit(iN.deleted,index_es_De(dist_index_es_q({},c),{reason:i}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(iN.sync)}async reset(){if(this.cached.length){let r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let i=0;i<r;i++){let r=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(r)}}this.events.emit(iN.resubscribed)}async restore(){try{let r=await this.getRelayerSubscriptions();if(typeof r>"u"||!r.length)return;if(this.subscriptions.size){let{message:r}=index_es_N("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),Error(r)}this.cached=r,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(r){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(r)}}async batchSubscribe(r){if(!r.length)return;let i=await this.rpcBatchSubscribe(r);index_es_k(i)&&this.onBatchSubscribe(i.map((i,c)=>index_es_De(dist_index_es_q({},r[c]),{id:i})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;let r=[];this.pending.forEach(i=>{r.push(i)}),await this.batchSubscribe(r)}registerEventListeners(){this.relayer.core.heartbeat.on(tQ.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(iC.connect,async()=>{await this.onConnect()}),this.relayer.on(iC.disconnect,()=>{this.onDisconnect()}),this.events.on(iN.created,async r=>{let i=iN.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),await this.persist()}),this.events.on(iN.deleted,async r=>{let i=iN.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),await this.persist()})}isInitialized(){if(!this.initialized){let{message:r}=index_es_N("NOT_INITIALIZED",this.name);throw Error(r)}}async restartToComplete(){this.restartInProgress&&await new Promise(r=>{let i=setInterval(()=>{this.restartInProgress||(clearInterval(i),r())},this.pollingInterval)})}};var iG=Object.defineProperty,iJ=Object.getOwnPropertySymbols,iY=Object.prototype.hasOwnProperty,iQ=Object.prototype.propertyIsEnumerable,index_es_Lt=(r,i,c)=>i in r?iG(r,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):r[i]=c,Ar=(r,i)=>{for(var c in i||(i={}))iY.call(i,c)&&index_es_Lt(r,c,i[c]);if(iJ)for(var c of iJ(i))iQ.call(i,c)&&index_es_Lt(r,c,i[c]);return r};let index_es_$t=class index_es_$t extends types_dist_index_es_g{constructor(r){super(r),this.protocol="wc",this.version=2,this.events=new Q.EventEmitter,this.name="relayer",this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.requestsInFlight=new Map,this.request=async r=>{this.logger.debug("Publishing Request Payload");let i=r.id;try{await this.toEstablishConnection();let c=this.provider.request(r);return this.requestsInFlight.set(i,{promise:c,request:r}),await c}catch(r){throw this.logger.debug("Failed to Publish Request"),this.logger.error(r),r}finally{this.requestsInFlight.delete(i)}},this.onPayloadHandler=r=>{this.onProviderPayload(r)},this.onConnectHandler=()=>{this.events.emit(iC.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.error(r),this.events.emit(iC.error,r),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(iA.payload,this.onPayloadHandler),this.provider.on(iA.connect,this.onConnectHandler),this.provider.on(iA.disconnect,this.onDisconnectHandler),this.provider.on(iA.error,this.onProviderErrorHandler)},this.core=r.core,this.logger="u">typeof r.logger&&"string"!=typeof r.logger?dist_index_es_E(r.logger,this.name):tX()(logger_dist_index_es_k({level:r.logger||"error"})),this.messages=new index_es_Ot(this.logger,r.core),this.subscriber=new index_es_Nt(this,this.logger),this.publisher=new vr(this,this.logger),this.relayUrl=r?.relayUrl||iO,this.projectId=r.projectId,this.bundleId=Jn(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${iP}...`),await this.restartTransport(iP)}this.initialized=!0,setTimeout(async()=>{0===this.subscriber.topics.length&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},1e4)}get context(){return index_es_y(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(r,i,c){this.isInitialized(),await this.publisher.publish(r,i,c),await this.recordMessageEvent({topic:r,message:i,publishedAt:Date.now()})}async subscribe(r,i){var c;let u;this.isInitialized();let l=(null==(c=this.subscriber.topicMap.get(r))?void 0:c[0])||"";if(l)return l;let o=i=>{i.topic===r&&(this.subscriber.off(iN.created,o),u())};return await Promise.all([new Promise(r=>{u=r,this.subscriber.on(iN.created,o)}),new Promise(async c=>{l=await this.subscriber.subscribe(r,i),c()})]),l}async unsubscribe(r,i){this.isInitialized(),await this.subscriber.unsubscribe(r,i)}on(r,i){this.events.on(r,i)}once(r,i){this.events.once(r,i)}off(r,i){this.events.off(r,i)}removeListener(r,i){this.events.removeListener(r,i)}async transportClose(){this.requestsInFlight.size>0&&(this.logger.debug("Waiting for all in-flight requests to finish before closing transport..."),this.requestsInFlight.forEach(async r=>{await r.promise})),this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await ut(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(r){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){r&&r!==this.relayUrl&&(this.relayUrl=r,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(r=>{if(!this.initialized)return r();this.subscriber.once(iN.resubscribed,()=>{r()})}),new Promise(async(r,i)=>{try{await ut(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(r){i(r);return}r()})])}catch(r){if(this.logger.error(r),!this.isConnectionStalled(r.message))throw r;this.provider.events.emit(iA.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(r){await this.confirmOnlineStateOrThrow(),this.connectionAttemptInProgress||(this.relayUrl=r||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await rr())throw Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(r){return this.staleConnectionErrors.some(i=>r.includes(i))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();let r=await this.core.crypto.signJWT(this.relayUrl);this.provider=new JsonRpcProvider(new dist_index_es_f(Xn({sdkVersion:"2.11.2",protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:r,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(r){let{topic:i,message:c}=r;await this.messages.set(i,c)}async shouldIgnoreMessageEvent(r){let{topic:i,message:c}=r;if(!c||0===c.length)return this.logger.debug(`Ignoring invalid/empty message: ${c}`),!0;if(!await this.subscriber.isSubscribed(i))return this.logger.debug(`Ignoring message for non-subscribed topic ${i}`),!0;let u=this.messages.has(i,c);return u&&this.logger.debug(`Ignoring duplicate message: ${c}`),u}async onProviderPayload(r){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:r}),isJsonRpcRequest(r)){if(!r.method.endsWith("_subscription"))return;let i=r.params,{topic:c,message:u,publishedAt:l}=i.data,d={topic:c,message:u,publishedAt:l};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Ar({type:"event",event:i.id},d)),this.events.emit(i.id,d),await this.acknowledgePayload(r),await this.onMessageEvent(d)}else isJsonRpcResponse(r)&&this.events.emit(iC.message_ack,r)}async onMessageEvent(r){await this.shouldIgnoreMessageEvent(r)||(this.events.emit(iC.message,r),await this.recordMessageEvent(r))}async acknowledgePayload(r){let i=formatJsonRpcResult(r.id,!0);await this.provider.connection.send(i)}unregisterProviderListeners(){this.provider.off(iA.payload,this.onPayloadHandler),this.provider.off(iA.connect,this.onConnectHandler),this.provider.off(iA.disconnect,this.onDisconnectHandler),this.provider.off(iA.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(iC.connection_stalled,()=>{this.restartTransport().catch(r=>this.logger.error(r))});let r=await rr();index_es_or(async i=>{this.initialized&&r!==i&&(r=i,i?await this.restartTransport().catch(r=>this.logger.error(r)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(r=>this.logger.error(r))))})}onProviderDisconnect(){this.events.emit(iC.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(r=>this.logger.error(r))},(0,tm.toMiliseconds)(iR)))}isInitialized(){if(!this.initialized){let{message:r}=index_es_N("NOT_INITIALIZED",this.name);throw Error(r)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(r=>{let i=setInterval(()=>{this.connected&&(clearInterval(i),r())},this.connectionStatusPollingInterval)});await this.restartTransport()}}};var iZ=Object.defineProperty,iX=Object.getOwnPropertySymbols,i0=Object.prototype.hasOwnProperty,i1=Object.prototype.propertyIsEnumerable,index_es_Mt=(r,i,c)=>i in r?iZ(r,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):r[i]=c,index_es_kt=(r,i)=>{for(var c in i||(i={}))i0.call(i,c)&&index_es_Mt(r,c,i[c]);if(iX)for(var c of iX(i))i1.call(i,c)&&index_es_Mt(r,c,i[c]);return r};let index_es_Kt=class index_es_Kt extends types_dist_index_es_p{constructor(r,i,c,u=iw,l){super(r,i,c,u),this.core=r,this.logger=i,this.name=c,this.map=new Map,this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=iw,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>{this.getKey&&null!==r&&!index_es_w(r)?this.map.set(this.getKey(r),r):Lt(r)?this.map.set(r.id,r):xt(r)&&this.map.set(r.topic,r)}),this.cached=[],this.initialized=!0)},this.set=async(r,i)=>{this.isInitialized(),this.map.has(r)?await this.update(r,i):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:r,value:i}),this.map.set(r,i),await this.persist())},this.get=r=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:r}),this.getData(r)),this.getAll=r=>(this.isInitialized(),r?this.values.filter(i=>Object.keys(r).every(c=>rE()(i[c],r[c]))):this.values),this.update=async(r,i)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:r,update:i});let c=index_es_kt(index_es_kt({},this.getData(r)),i);this.map.set(r,c),await this.persist()},this.delete=async(r,i)=>{this.isInitialized(),this.map.has(r)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:r,reason:i}),this.map.delete(r),await this.persist())},this.logger=dist_index_es_E(i,this.name),this.storagePrefix=u,this.getKey=l}get context(){return index_es_y(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(r){await this.core.storage.setItem(this.storageKey,r)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(r){let i=this.map.get(r);if(!i){let{message:i}=index_es_N("NO_MATCHING_KEY",`${this.name}: ${r}`);throw this.logger.error(i),Error(i)}return i}async persist(){await this.setDataStore(this.values)}async restore(){try{let r=await this.getDataStore();if(typeof r>"u"||!r.length)return;if(this.map.size){let{message:r}=index_es_N("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),Error(r)}this.cached=r,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(r){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(r)}}isInitialized(){if(!this.initialized){let{message:r}=index_es_N("NOT_INITIALIZED",this.name);throw Error(r)}}};let index_es_Bt=class index_es_Bt{constructor(r,i){this.core=r,this.logger=i,this.name="pairing",this.version="0.3",this.events=new(X()),this.initialized=!1,this.storagePrefix=iw,this.ignoredPayloadTypes=[1],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]},this.create=async()=>{this.isInitialized();let r=Vn(),i=await this.core.crypto.setSymKey(r),c=pt(tm.FIVE_MINUTES),u={protocol:"irn"},l=Rt({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:r,relay:u,expiryTimestamp:c});return await this.pairings.set(i,{topic:i,expiry:c,relay:u,active:!1}),await this.core.relayer.subscribe(i),this.core.expirer.set(i,c),{topic:i,uri:l}},this.pair=async r=>{this.isInitialized(),this.isValidPair(r);let{topic:i,symKey:c,relay:u,expiryTimestamp:l}=Pt(r.uri);if(this.pairings.keys.includes(i)&&this.pairings.get(i).active)throw Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);let d=l||pt(tm.FIVE_MINUTES),p={topic:i,relay:u,expiry:d,active:!1};return await this.pairings.set(i,p),this.core.expirer.set(i,d),r.activatePairing&&await this.activate({topic:i}),this.events.emit(iU.create,p),this.core.crypto.keychain.has(i)||(await this.core.crypto.setSymKey(c,i),await this.core.relayer.subscribe(i,{relay:u})),p},this.activate=async({topic:r})=>{this.isInitialized();let i=pt(tm.THIRTY_DAYS);await this.pairings.update(r,{active:!0,expiry:i}),this.core.expirer.set(r,i)},this.ping=async r=>{this.isInitialized(),await this.isValidPing(r);let{topic:i}=r;if(this.pairings.keys.includes(i)){let r=await this.sendRequest(i,"wc_pairingPing",{}),{done:c,resolve:u,reject:l}=at();this.events.once(yt("pairing_ping",r),({error:r})=>{r?l(r):u()}),await c()}},this.updateExpiry=async({topic:r,expiry:i})=>{this.isInitialized(),await this.pairings.update(r,{expiry:i})},this.updateMetadata=async({topic:r,metadata:i})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:i})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async r=>{this.isInitialized(),await this.isValidDisconnect(r);let{topic:i}=r;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",U("USER_DISCONNECTED")),await this.deletePairing(i))},this.sendRequest=async(r,i,c)=>{let u=formatJsonRpcRequest(i,c),l=await this.core.crypto.encode(r,u),d=ij[i].req;return this.core.history.set(r,u),this.core.relayer.publish(r,l,d),u.id},this.sendResult=async(r,i,c)=>{let u=formatJsonRpcResult(r,c),l=await this.core.crypto.encode(i,u),d=await this.core.history.get(i,r),p=ij[d.request.method].res;await this.core.relayer.publish(i,l,p),await this.core.history.resolve(u)},this.sendError=async(r,i,c)=>{let u=formatJsonRpcError(r,c),l=await this.core.crypto.encode(i,u),d=await this.core.history.get(i,r),p=ij[d.request.method]?ij[d.request.method].res:ij.unregistered_method.res;await this.core.relayer.publish(i,l,p),await this.core.history.resolve(u)},this.deletePairing=async(r,i)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,U("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),i?Promise.resolve():this.core.expirer.del(r)])},this.cleanup=async()=>{let r=this.pairings.getAll().filter(r=>mt(r.expiry));await Promise.all(r.map(r=>this.deletePairing(r.topic)))},this.onRelayEventRequest=r=>{let{topic:i,payload:c}=r;switch(c.method){case"wc_pairingPing":return this.onPairingPingRequest(i,c);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,c);default:return this.onUnknownRpcMethodRequest(i,c)}},this.onRelayEventResponse=async r=>{let{topic:i,payload:c}=r,u=(await this.core.history.get(i,c.id)).request.method;return"wc_pairingPing"===u?this.onPairingPingResponse(i,c):this.onUnknownRpcMethodResponse(u)},this.onPairingPingRequest=async(r,i)=>{let{id:c}=i;try{this.isValidPing({topic:r}),await this.sendResult(c,r,!0),this.events.emit(iU.ping,{id:c,topic:r})}catch(i){await this.sendError(c,r,i),this.logger.error(i)}},this.onPairingPingResponse=(r,i)=>{let{id:c}=i;setTimeout(()=>{isJsonRpcResult(i)?this.events.emit(yt("pairing_ping",c),{}):isJsonRpcError(i)&&this.events.emit(yt("pairing_ping",c),{error:i.error})},500)},this.onPairingDeleteRequest=async(r,i)=>{let{id:c}=i;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(iU.delete,{id:c,topic:r})}catch(i){await this.sendError(c,r,i),this.logger.error(i)}},this.onUnknownRpcMethodRequest=async(r,i)=>{let{id:c,method:u}=i;try{if(this.registeredMethods.includes(u))return;let i=U("WC_METHOD_UNSUPPORTED",u);await this.sendError(c,r,i),this.logger.error(i)}catch(i){await this.sendError(c,r,i),this.logger.error(i)}},this.onUnknownRpcMethodResponse=r=>{this.registeredMethods.includes(r)||this.logger.error(U("WC_METHOD_UNSUPPORTED",r))},this.isValidPair=r=>{var i;if(!Gt(r)){let{message:i}=index_es_N("MISSING_OR_INVALID",`pair() params: ${r}`);throw Error(i)}if(!Kt(r.uri)){let{message:i}=index_es_N("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw Error(i)}let c=Pt(r.uri);if(!(null!=(i=c?.relay)&&i.protocol)){let{message:r}=index_es_N("MISSING_OR_INVALID","pair() uri#relay-protocol");throw Error(r)}if(!(null!=c&&c.symKey)){let{message:r}=index_es_N("MISSING_OR_INVALID","pair() uri#symKey");throw Error(r)}if(null!=c&&c.expiryTimestamp&&(0,tm.toMiliseconds)(c?.expiryTimestamp)<Date.now()){let{message:r}=index_es_N("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw Error(r)}},this.isValidPing=async r=>{if(!Gt(r)){let{message:i}=index_es_N("MISSING_OR_INVALID",`ping() params: ${r}`);throw Error(i)}let{topic:i}=r;await this.isValidPairingTopic(i)},this.isValidDisconnect=async r=>{if(!Gt(r)){let{message:i}=index_es_N("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw Error(i)}let{topic:i}=r;await this.isValidPairingTopic(i)},this.isValidPairingTopic=async r=>{if(!index_es_g(r,!1)){let{message:i}=index_es_N("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw Error(i)}if(!this.pairings.keys.includes(r)){let{message:i}=index_es_N("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw Error(i)}if(mt(this.pairings.get(r).expiry)){await this.deletePairing(r);let{message:i}=index_es_N("EXPIRED",`pairing topic: ${r}`);throw Error(i)}},this.core=r,this.logger=dist_index_es_E(i,this.name),this.pairings=new index_es_Kt(this.core,this.logger,this.name,this.storagePrefix)}get context(){return index_es_y(this.logger)}isInitialized(){if(!this.initialized){let{message:r}=index_es_N("NOT_INITIALIZED",this.name);throw Error(r)}}registerRelayerEvents(){this.core.relayer.on(iC.message,async r=>{let{topic:i,message:c}=r;if(!this.pairings.keys.includes(i)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(c)))return;let u=await this.core.crypto.decode(i,c);try{isJsonRpcRequest(u)?(this.core.history.set(i,u),this.onRelayEventRequest({topic:i,payload:u})):isJsonRpcResponse(u)&&(await this.core.history.resolve(u),await this.onRelayEventResponse({topic:i,payload:u}),this.core.history.delete(i,u.id))}catch(r){this.logger.error(r)}})}registerExpirerEvents(){this.core.expirer.on(ik.expired,async r=>{let{topic:i}=ft(r.target);i&&this.pairings.keys.includes(i)&&(await this.deletePairing(i,!0),this.events.emit(iU.expire,{topic:i}))})}};let index_es_Vt=class index_es_Vt extends types_dist_index_es_h{constructor(r,i){super(r,i),this.core=r,this.logger=i,this.records=new Map,this.events=new Q.EventEmitter,this.name="history",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=iw,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(r,i,c)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:i,chainId:c}),this.records.has(i.id))return;let u={id:i.id,topic:r,request:{method:i.method,params:i.params||null},chainId:c,expiry:pt(tm.THIRTY_DAYS)};this.records.set(u.id,u),this.events.emit(iL.created,u)},this.resolve=async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;let i=await this.getRecord(r.id);typeof i.response>"u"&&(i.response=isJsonRpcError(r)?{error:r.error}:{result:r.result},this.records.set(i.id,i),this.events.emit(iL.updated,i))},this.get=async(r,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:i}),await this.getRecord(i)),this.delete=(r,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(c=>{c.topic!==r||"u">typeof i&&c.id!==i||(this.records.delete(c.id),this.events.emit(iL.deleted,c))})},this.exists=async(r,i)=>(this.isInitialized(),!!this.records.has(i)&&(await this.getRecord(i)).topic===r),this.on=(r,i)=>{this.events.on(r,i)},this.once=(r,i)=>{this.events.once(r,i)},this.off=(r,i)=>{this.events.off(r,i)},this.removeListener=(r,i)=>{this.events.removeListener(r,i)},this.logger=dist_index_es_E(i,this.name)}get context(){return index_es_y(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){let r=[];return this.values.forEach(i=>{if("u">typeof i.response)return;let c={topic:i.topic,request:formatJsonRpcRequest(i.request.method,i.request.params,i.id),chainId:i.chainId};return r.push(c)}),r}async setJsonRpcRecords(r){await this.core.storage.setItem(this.storageKey,r)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(r){this.isInitialized();let i=this.records.get(r);if(!i){let{message:i}=index_es_N("NO_MATCHING_KEY",`${this.name}: ${r}`);throw Error(i)}return i}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(iL.sync)}async restore(){try{let r=await this.getJsonRpcRecords();if(typeof r>"u"||!r.length)return;if(this.records.size){let{message:r}=index_es_N("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),Error(r)}this.cached=r,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}}registerEventListeners(){this.events.on(iL.created,r=>{let i=iL.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,record:r}),this.persist()}),this.events.on(iL.updated,r=>{let i=iL.updated;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,record:r}),this.persist()}),this.events.on(iL.deleted,r=>{let i=iL.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,record:r}),this.persist()}),this.core.heartbeat.on(tQ.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(r=>{(0,tm.toMiliseconds)(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.delete(r.topic,r.id))})}catch(r){this.logger.warn(r)}}isInitialized(){if(!this.initialized){let{message:r}=index_es_N("NOT_INITIALIZED",this.name);throw Error(r)}}};let index_es_qt=class index_es_qt extends types_dist_index_es_E{constructor(r,i){super(r,i),this.core=r,this.logger=i,this.expirations=new Map,this.events=new Q.EventEmitter,this.name="expirer",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=iw,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=r=>{try{let i=this.formatTarget(r);return"u">typeof this.getExpiration(i)}catch{return!1}},this.set=(r,i)=>{this.isInitialized();let c=this.formatTarget(r),u={target:c,expiry:i};this.expirations.set(c,u),this.checkExpiry(c,u),this.events.emit(ik.created,{target:c,expiration:u})},this.get=r=>{this.isInitialized();let i=this.formatTarget(r);return this.getExpiration(i)},this.del=r=>{if(this.isInitialized(),this.has(r)){let i=this.formatTarget(r),c=this.getExpiration(i);this.expirations.delete(i),this.events.emit(ik.deleted,{target:i,expiration:c})}},this.on=(r,i)=>{this.events.on(r,i)},this.once=(r,i)=>{this.events.once(r,i)},this.off=(r,i)=>{this.events.off(r,i)},this.removeListener=(r,i)=>{this.events.removeListener(r,i)},this.logger=dist_index_es_E(i,this.name)}get context(){return index_es_y(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(r){if("string"==typeof r)return lt(r);if("number"==typeof r)return dt(r);let{message:i}=index_es_N("UNKNOWN_TYPE",`Target type: ${typeof r}`);throw Error(i)}async setExpirations(r){await this.core.storage.setItem(this.storageKey,r)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(ik.sync)}async restore(){try{let r=await this.getExpirations();if(typeof r>"u"||!r.length)return;if(this.expirations.size){let{message:r}=index_es_N("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),Error(r)}this.cached=r,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(r){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(r)}}getExpiration(r){let i=this.expirations.get(r);if(!i){let{message:i}=index_es_N("NO_MATCHING_KEY",`${this.name}: ${r}`);throw this.logger.error(i),Error(i)}return i}checkExpiry(r,i){let{expiry:c}=i;(0,tm.toMiliseconds)(c)-Date.now()<=0&&this.expire(r,i)}expire(r,i){this.expirations.delete(r),this.events.emit(ik.expired,{target:r,expiration:i})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((r,i)=>this.checkExpiry(i,r))}registerEventListeners(){this.core.heartbeat.on(tQ.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(ik.created,r=>{let i=ik.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),this.persist()}),this.events.on(ik.expired,r=>{let i=ik.expired;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),this.persist()}),this.events.on(ik.deleted,r=>{let i=ik.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),this.persist()})}isInitialized(){if(!this.initialized){let{message:r}=index_es_N("NOT_INITIALIZED",this.name);throw Error(r)}}};let index_es_jt=class index_es_jt extends dist_index_es_y{constructor(r,i){super(r,i),this.projectId=r,this.logger=i,this.name=iM,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async r=>{if(this.verifyDisabled||$()||!D())return;let i=this.getVerifyUrl(r?.verifyUrl);this.verifyUrl!==i&&this.removeIframe(),this.verifyUrl=i;try{await this.createIframe()}catch(r){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(r)}if(!this.initialized){this.removeIframe(),this.verifyUrl=iz;try{await this.createIframe()}catch(r){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(r),this.verifyDisabled=!0}}},this.register=async r=>{this.initialized?this.sendPost(r.attestationId):(this.addToQueue(r.attestationId),await this.init())},this.resolve=async r=>{let i;if(this.isDevEnv)return"";let c=this.getVerifyUrl(r?.verifyUrl);try{i=await this.fetchAttestation(r.attestationId,c)}catch(u){this.logger.info(`failed to resolve attestation: ${r.attestationId} from url: ${c}`),this.logger.info(u),i=await this.fetchAttestation(r.attestationId,iz)}return i},this.fetchAttestation=async(r,i)=>{this.logger.info(`resolving attestation: ${r} from url: ${i}`);let c=this.startAbortTimer(2*tm.ONE_SECOND),u=await fetch(`${i}/attestation/${r}`,{signal:this.abortController.signal});return clearTimeout(c),200===u.status?await u.json():void 0},this.addToQueue=r=>{this.queue.push(r)},this.processQueue=()=>{0!==this.queue.length&&(this.queue.forEach(r=>this.sendPost(r)),this.queue=[])},this.sendPost=r=>{var i;try{if(!this.iframe)return;null==(i=this.iframe.contentWindow)||i.postMessage(r,"*"),this.logger.info(`postMessage sent: ${r} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let r;let s=i=>{"verify_ready"===i.data&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",s),r())};await Promise.race([new Promise(i=>{if(document.getElementById(iM))return i();window.addEventListener("message",s);let c=document.createElement("iframe");c.id=iM,c.src=`${this.verifyUrl}/${this.projectId}`,c.style.display="none",document.body.append(c),this.iframe=c,r=i}),new Promise((r,i)=>setTimeout(()=>{window.removeEventListener("message",s),i("verify iframe load timeout")},(0,tm.toMiliseconds)(tm.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=r=>{let i=r||iq;return iH.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${iq}`),i=iq),i},this.logger=dist_index_es_E(i,this.name),this.verifyUrl=iq,this.abortController=new AbortController,this.isDevEnv=te()&&rD.env.IS_VITEST}get context(){return index_es_y(this.logger)}startAbortTimer(r){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),(0,tm.toMiliseconds)(r))}};let index_es_Gt=class index_es_Gt extends index_es_v{constructor(r,i){super(r,i),this.projectId=r,this.logger=i,this.context="echo",this.registerDeviceToken=async r=>{let{clientId:i,token:c,notificationType:u,enableEncrypted:l=!1}=r,d=`https://echo.walletconnect.com/${this.projectId}/clients`;await rS()(d,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:u,token:c,always_raw:l})})},this.logger=dist_index_es_E(i,this.context)}};var i5=Object.defineProperty,i3=Object.getOwnPropertySymbols,i2=Object.prototype.hasOwnProperty,i6=Object.prototype.propertyIsEnumerable,index_es_Ht=(r,i,c)=>i in r?i5(r,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):r[i]=c,index_es_Jt=(r,i)=>{for(var c in i||(i={}))i2.call(i,c)&&index_es_Ht(r,c,i[c]);if(i3)for(var c of i3(i))i6.call(i,c)&&index_es_Ht(r,c,i[c]);return r};let index_es_te=class index_es_te extends dist_index_es_n{constructor(r){super(r),this.protocol="wc",this.version=2,this.name=ib,this.events=new Q.EventEmitter,this.initialized=!1,this.on=(r,i)=>this.events.on(r,i),this.once=(r,i)=>this.events.once(r,i),this.off=(r,i)=>this.events.off(r,i),this.removeListener=(r,i)=>this.events.removeListener(r,i),this.projectId=r?.projectId,this.relayUrl=r?.relayUrl||iO,this.customStoragePrefix=null!=r&&r.customStoragePrefix?`:${r.customStoragePrefix}`:"";let i="u">typeof r?.logger&&"string"!=typeof r?.logger?r.logger:tX()(logger_dist_index_es_k({level:r?.logger||iE.logger}));this.logger=dist_index_es_E(i,this.name),this.heartbeat=new tQ.HeartBeat,this.crypto=new index_es_xt(this,this.logger,r?.keychain),this.history=new index_es_Vt(this,this.logger),this.expirer=new index_es_qt(this,this.logger),this.storage=null!=r&&r.storage?r.storage:new dist_index_es_h(index_es_Jt(index_es_Jt({},ix),r?.storageOptions)),this.relayer=new index_es_$t({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new index_es_Bt(this,this.logger),this.verify=new index_es_jt(this.projectId||"",this.logger),this.echoClient=new index_es_Gt(this.projectId||"",this.logger)}static async init(r){let i=new index_es_te(r);await i.initialize();let c=await i.crypto.getClientId();return await i.storage.setItem("WALLETCONNECT_CLIENT_ID",c),i}get context(){return index_es_y(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(r){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,r),this.logger.error(r.message),r}}};let i8="client",i4=`wc@2:${i8}:`,i9={name:i8,logger:"error"},i7="WALLETCONNECT_DEEPLINK_CHOICE",ne="Proposal expired",nn=tm.SEVEN_DAYS,ns={wc_sessionPropose:{req:{ttl:tm.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:tm.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:tm.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:tm.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:tm.ONE_DAY,prompt:!1,tag:1104},res:{ttl:tm.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:tm.ONE_DAY,prompt:!1,tag:1106},res:{ttl:tm.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:tm.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:tm.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:tm.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:tm.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:tm.ONE_DAY,prompt:!1,tag:1112},res:{ttl:tm.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:tm.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:tm.THIRTY_SECONDS,prompt:!1,tag:1115}}},no={min:tm.FIVE_MINUTES,max:tm.SEVEN_DAYS},nd={idle:"IDLE",active:"ACTIVE"},ng=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var n_=Object.defineProperty,ny=Object.defineProperties,nm=Object.getOwnPropertyDescriptors,nb=Object.getOwnPropertySymbols,nw=Object.prototype.hasOwnProperty,nE=Object.prototype.propertyIsEnumerable,index_es_ue=(r,i,c)=>i in r?n_(r,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):r[i]=c,sign_client_dist_index_es_g=(r,i)=>{for(var c in i||(i={}))nw.call(i,c)&&index_es_ue(r,c,i[c]);if(nb)for(var c of nb(i))nE.call(i,c)&&index_es_ue(r,c,i[c]);return r},sign_client_dist_index_es_D=(r,i)=>ny(r,nm(i));let index_es_ds=class index_es_ds extends types_dist_index_es_w{constructor(r){super(r),this.name="engine",this.events=new(X()),this.initialized=!1,this.ignoredPayloadTypes=[1],this.requestQueue={state:nd.idle,queue:[]},this.sessionRequestQueue={state:nd.idle,queue:[]},this.requestQueueDelay=tm.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(ns)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},(0,tm.toMiliseconds)(this.requestQueueDelay)))},this.connect=async r=>{await this.isInitialized();let i=sign_client_dist_index_es_D(sign_client_dist_index_es_g({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(i);let{pairingTopic:c,requiredNamespaces:u,optionalNamespaces:l,sessionProperties:d,relays:p}=i,g=c,_,w=!1;if(g&&(w=this.client.core.pairing.pairings.get(g).active),!g||!w){let{topic:r,uri:i}=await this.client.core.pairing.create();g=r,_=i}let S=await this.client.core.crypto.generateKeyPair(),P=ns.wc_sessionPropose.req.ttl||tm.FIVE_MINUTES,C=pt(P),L=sign_client_dist_index_es_g({requiredNamespaces:u,optionalNamespaces:l,relays:p??[{protocol:"irn"}],proposer:{publicKey:S,metadata:this.client.metadata},expiryTimestamp:C},d&&{sessionProperties:d}),{reject:k,resolve:q,done:z}=at(P,ne);if(this.events.once(yt("session_connect"),async({error:r,session:i})=>{if(r)k(r);else if(i){i.self.publicKey=S;let r=sign_client_dist_index_es_D(sign_client_dist_index_es_g({},i),{requiredNamespaces:L.requiredNamespaces,optionalNamespaces:L.optionalNamespaces});await this.client.session.set(i.topic,r),await this.setExpiry(i.topic,i.expiry),g&&await this.client.core.pairing.updateMetadata({topic:g,metadata:i.peer.metadata}),q(r)}}),!g){let{message:r}=index_es_N("NO_MATCHING_KEY",`connect() pairing topic: ${g}`);throw Error(r)}let J=await this.sendRequest({topic:g,method:"wc_sessionPropose",params:L,throwOnFailedPublish:!0});return await this.setProposal(J,sign_client_dist_index_es_g({id:J},L)),{uri:_,approval:z}},this.pair=async r=>(await this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{await this.isInitialized(),await this.isValidApprove(r);let{id:i,relayProtocol:c,namespaces:u,sessionProperties:l}=r,d=this.client.proposal.get(i),{pairingTopic:p,proposer:g,requiredNamespaces:_,optionalNamespaces:w}=d;p=p||"";let S=await this.client.core.crypto.generateKeyPair(),P=g.publicKey,C=await this.client.core.crypto.generateSharedKey(S,P);p&&i&&(await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.sendResult({id:i,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:S}}),await this.client.proposal.delete(i,U("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:p}));let L=sign_client_dist_index_es_g({relay:{protocol:c??"irn"},namespaces:u,pairingTopic:p,controller:{publicKey:S,metadata:this.client.metadata},expiry:pt(nn)},l&&{sessionProperties:l});await this.client.core.relayer.subscribe(C);let k=sign_client_dist_index_es_D(sign_client_dist_index_es_g({},L),{topic:C,requiredNamespaces:_,optionalNamespaces:w,pairingTopic:p,acknowledged:!1,self:L.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:S});await this.client.session.set(C,k);try{await this.sendRequest({topic:C,method:"wc_sessionSettle",params:L,throwOnFailedPublish:!0})}catch(r){throw this.client.logger.error(r),this.client.session.delete(C,U("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(C),r}return await this.setExpiry(C,pt(nn)),{topic:C,acknowledged:()=>new Promise(r=>setTimeout(()=>r(this.client.session.get(C)),500))}},this.reject=async r=>{await this.isInitialized(),await this.isValidReject(r);let{id:i,reason:c}=r,{pairingTopic:u}=this.client.proposal.get(i);u&&(await this.sendError(i,u,c),await this.client.proposal.delete(i,U("USER_DISCONNECTED")))},this.update=async r=>{await this.isInitialized(),await this.isValidUpdate(r);let{topic:i,namespaces:c}=r,u=await this.sendRequest({topic:i,method:"wc_sessionUpdate",params:{namespaces:c}}),{done:l,resolve:d,reject:p}=at();return this.events.once(yt("session_update",u),({error:r})=>{r?p(r):d()}),await this.client.session.update(i,{namespaces:c}),{acknowledged:l}},this.extend=async r=>{await this.isInitialized(),await this.isValidExtend(r);let{topic:i}=r,c=await this.sendRequest({topic:i,method:"wc_sessionExtend",params:{}}),{done:u,resolve:l,reject:d}=at();return this.events.once(yt("session_extend",c),({error:r})=>{r?d(r):l()}),await this.setExpiry(i,pt(nn)),{acknowledged:u}},this.request=async r=>{await this.isInitialized(),await this.isValidRequest(r);let{chainId:i,request:c,topic:u,expiry:l=ns.wc_sessionRequest.req.ttl}=r,d=payloadId(),{done:p,resolve:g,reject:_}=at(l,"Request expired. Please try again.");return this.events.once(yt("session_request",d),({error:r,result:i})=>{r?_(r):g(i)}),await Promise.all([new Promise(async r=>{await this.sendRequest({clientRpcId:d,topic:u,method:"wc_sessionRequest",params:{request:sign_client_dist_index_es_D(sign_client_dist_index_es_g({},c),{expiryTimestamp:pt(l)}),chainId:i},expiry:l,throwOnFailedPublish:!0}).catch(r=>_(r)),this.client.events.emit("session_request_sent",{topic:u,request:c,chainId:i,id:d}),r()}),new Promise(async r=>{let i=await ht(this.client.core.storage,i7);gt({id:d,topic:u,wcDeepLink:i}),r()}),p()]).then(r=>r[2])},this.respond=async r=>{await this.isInitialized(),await this.isValidRespond(r);let{topic:i,response:c}=r,{id:u}=c;isJsonRpcResult(c)?await this.sendResult({id:u,topic:i,result:c.result,throwOnFailedPublish:!0}):isJsonRpcError(c)&&await this.sendError(u,i,c.error),this.cleanupAfterResponse(r)},this.ping=async r=>{await this.isInitialized(),await this.isValidPing(r);let{topic:i}=r;if(this.client.session.keys.includes(i)){let r=await this.sendRequest({topic:i,method:"wc_sessionPing",params:{}}),{done:c,resolve:u,reject:l}=at();this.events.once(yt("session_ping",r),({error:r})=>{r?l(r):u()}),await c()}else this.client.core.pairing.pairings.keys.includes(i)&&await this.client.core.pairing.ping({topic:i})},this.emit=async r=>{await this.isInitialized(),await this.isValidEmit(r);let{topic:i,event:c,chainId:u}=r;await this.sendRequest({topic:i,method:"wc_sessionEvent",params:{event:c,chainId:u}})},this.disconnect=async r=>{await this.isInitialized(),await this.isValidDisconnect(r);let{topic:i}=r;if(this.client.session.keys.includes(i))await this.sendRequest({topic:i,method:"wc_sessionDelete",params:U("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:i,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(i))await this.client.core.pairing.disconnect({topic:i});else{let{message:r}=index_es_N("MISMATCHED_TOPIC",`Session or pairing topic not found: ${i}`);throw Error(r)}},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(i=>Mt(i,r))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{let i=this.client.core.pairing.pairings.get(r.pairingTopic),c=this.client.core.pairing.pairings.getAll().filter(c=>{var u,l;return(null==(u=c.peerMetadata)?void 0:u.url)&&(null==(l=c.peerMetadata)?void 0:l.url)===r.peer.metadata.url&&c.topic&&c.topic!==i.topic});if(0===c.length)return;this.client.logger.info(`Cleaning up ${c.length} duplicate pairing(s)`),await Promise.all(c.map(r=>this.client.core.pairing.disconnect({topic:r.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}},this.deleteSession=async r=>{let{topic:i,expirerHasDeleted:c=!1,emitEvent:u=!0,id:l=0}=r,{self:d}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,U("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(d.publicKey)&&await this.client.core.crypto.deleteKeyPair(d.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),c||this.client.core.expirer.del(i),this.client.core.storage.removeItem(i7).catch(r=>this.client.logger.warn(r)),this.getPendingSessionRequests().forEach(r=>{r.topic===i&&this.deletePendingSessionRequest(r.id,U("USER_DISCONNECTED"))}),u&&this.client.events.emit("session_delete",{id:l,topic:i})},this.deleteProposal=async(r,i)=>{await Promise.all([this.client.proposal.delete(r,U("USER_DISCONNECTED")),i?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,i,c=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,i),c?Promise.resolve():this.client.core.expirer.del(r)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==r),c&&(this.sessionRequestQueue.state=nd.idle,this.client.events.emit("session_request_expire",{id:r}))},this.setExpiry=async(r,i)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:i}),this.client.core.expirer.set(r,i)},this.setProposal=async(r,i)=>{await this.client.proposal.set(r,i),this.client.core.expirer.set(r,pt(ns.wc_sessionPropose.req.ttl))},this.setPendingSessionRequest=async r=>{let{id:i,topic:c,params:u,verifyContext:l}=r,d=u.request.expiryTimestamp||pt(ns.wc_sessionRequest.req.ttl);await this.client.pendingRequest.set(i,{id:i,topic:c,params:u,verifyContext:l}),d&&this.client.core.expirer.set(i,d)},this.sendRequest=async r=>{let{topic:i,method:c,params:u,expiry:l,relayRpcId:d,clientRpcId:p,throwOnFailedPublish:g}=r,_=formatJsonRpcRequest(c,u,p);if(D()&&ng.includes(c)){let r=Ln(JSON.stringify(_));this.client.core.verify.register({attestationId:r})}let w=await this.client.core.crypto.encode(i,_),S=ns[c].req;return l&&(S.ttl=l),d&&(S.id=d),this.client.core.history.set(i,_),g?(S.internal=sign_client_dist_index_es_D(sign_client_dist_index_es_g({},S.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,w,S)):this.client.core.relayer.publish(i,w,S).catch(r=>this.client.logger.error(r)),_.id},this.sendResult=async r=>{let{id:i,topic:c,result:u,throwOnFailedPublish:l}=r,d=formatJsonRpcResult(i,u),p=await this.client.core.crypto.encode(c,d),g=await this.client.core.history.get(c,i),_=ns[g.request.method].res;l?(_.internal=sign_client_dist_index_es_D(sign_client_dist_index_es_g({},_.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(c,p,_)):this.client.core.relayer.publish(c,p,_).catch(r=>this.client.logger.error(r)),await this.client.core.history.resolve(d)},this.sendError=async(r,i,c)=>{let u=formatJsonRpcError(r,c),l=await this.client.core.crypto.encode(i,u),d=await this.client.core.history.get(i,r),p=ns[d.request.method].res;this.client.core.relayer.publish(i,l,p),await this.client.core.history.resolve(u)},this.cleanup=async()=>{let r=[],i=[];this.client.session.getAll().forEach(i=>{let c=!1;mt(i.expiry)&&(c=!0),this.client.core.crypto.keychain.has(i.topic)||(c=!0),c&&r.push(i.topic)}),this.client.proposal.getAll().forEach(r=>{mt(r.expiryTimestamp)&&i.push(r.id)}),await Promise.all([...r.map(r=>this.deleteSession({topic:r})),...i.map(r=>this.deleteProposal(r))])},this.onRelayEventRequest=async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===nd.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=nd.active;let r=this.requestQueue.queue.shift();if(r)try{this.processRequest(r),await new Promise(r=>setTimeout(r,300))}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=nd.idle},this.processRequest=r=>{let{topic:i,payload:c}=r,u=c.method;switch(u){case"wc_sessionPropose":return this.onSessionProposeRequest(i,c);case"wc_sessionSettle":return this.onSessionSettleRequest(i,c);case"wc_sessionUpdate":return this.onSessionUpdateRequest(i,c);case"wc_sessionExtend":return this.onSessionExtendRequest(i,c);case"wc_sessionPing":return this.onSessionPingRequest(i,c);case"wc_sessionDelete":return this.onSessionDeleteRequest(i,c);case"wc_sessionRequest":return this.onSessionRequest(i,c);case"wc_sessionEvent":return this.onSessionEventRequest(i,c);default:return this.client.logger.info(`Unsupported request method ${u}`)}},this.onRelayEventResponse=async r=>{let{topic:i,payload:c}=r,u=(await this.client.core.history.get(i,c.id)).request.method;switch(u){case"wc_sessionPropose":return this.onSessionProposeResponse(i,c);case"wc_sessionSettle":return this.onSessionSettleResponse(i,c);case"wc_sessionUpdate":return this.onSessionUpdateResponse(i,c);case"wc_sessionExtend":return this.onSessionExtendResponse(i,c);case"wc_sessionPing":return this.onSessionPingResponse(i,c);case"wc_sessionRequest":return this.onSessionRequestResponse(i,c);default:return this.client.logger.info(`Unsupported response method ${u}`)}},this.onRelayEventUnknownPayload=r=>{let{topic:i}=r,{message:c}=index_es_N("MISSING_OR_INVALID",`Decoded payload on topic ${i} is not identifiable as a JSON-RPC request or a response.`);throw Error(c)},this.onSessionProposeRequest=async(r,i)=>{let{params:c,id:u}=i;try{this.isValidConnect(sign_client_dist_index_es_g({},i.params));let l=c.expiryTimestamp||pt(ns.wc_sessionPropose.req.ttl),d=sign_client_dist_index_es_g({id:u,pairingTopic:r,expiryTimestamp:l},c);await this.setProposal(u,d);let p=Ln(JSON.stringify(i)),g=await this.getVerifyContext(p,d.proposer.metadata);this.client.events.emit("session_proposal",{id:u,params:d,verifyContext:g})}catch(i){await this.sendError(u,r,i),this.client.logger.error(i)}},this.onSessionProposeResponse=async(r,i)=>{let{id:c}=i;if(isJsonRpcResult(i)){let{result:u}=i;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:u});let l=this.client.proposal.get(c);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:l});let d=l.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:d});let p=u.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:p});let g=await this.client.core.crypto.generateSharedKey(d,p);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:g});let _=await this.client.core.relayer.subscribe(g);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:_}),await this.client.core.pairing.activate({topic:r})}else isJsonRpcError(i)&&(await this.client.proposal.delete(c,U("USER_DISCONNECTED")),this.events.emit(yt("session_connect"),{error:i.error}))},this.onSessionSettleRequest=async(r,i)=>{let{id:c,params:u}=i;try{this.isValidSessionSettleRequest(u);let{relay:c,controller:l,expiry:d,namespaces:p,sessionProperties:g,pairingTopic:_}=i.params,w=sign_client_dist_index_es_g({topic:r,relay:c,expiry:d,namespaces:p,acknowledged:!0,pairingTopic:_,requiredNamespaces:{},optionalNamespaces:{},controller:l.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:l.publicKey,metadata:l.metadata}},g&&{sessionProperties:g});await this.sendResult({id:i.id,topic:r,result:!0}),this.events.emit(yt("session_connect"),{session:w}),this.cleanupDuplicatePairings(w)}catch(i){await this.sendError(c,r,i),this.client.logger.error(i)}},this.onSessionSettleResponse=async(r,i)=>{let{id:c}=i;isJsonRpcResult(i)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(yt("session_approve",c),{})):isJsonRpcError(i)&&(await this.client.session.delete(r,U("USER_DISCONNECTED")),this.events.emit(yt("session_approve",c),{error:i.error}))},this.onSessionUpdateRequest=async(r,i)=>{let{params:c,id:u}=i;try{let i=`${r}_session_update`,l=sr.get(i);if(l&&this.isRequestOutOfSync(l,u)){this.client.logger.info(`Discarding out of sync request - ${u}`);return}this.isValidUpdate(sign_client_dist_index_es_g({topic:r},c)),await this.client.session.update(r,{namespaces:c.namespaces}),await this.sendResult({id:u,topic:r,result:!0}),this.client.events.emit("session_update",{id:u,topic:r,params:c}),sr.set(i,u)}catch(i){await this.sendError(u,r,i),this.client.logger.error(i)}},this.isRequestOutOfSync=(r,i)=>parseInt(i.toString().slice(0,-3))<=parseInt(r.toString().slice(0,-3)),this.onSessionUpdateResponse=(r,i)=>{let{id:c}=i;isJsonRpcResult(i)?this.events.emit(yt("session_update",c),{}):isJsonRpcError(i)&&this.events.emit(yt("session_update",c),{error:i.error})},this.onSessionExtendRequest=async(r,i)=>{let{id:c}=i;try{this.isValidExtend({topic:r}),await this.setExpiry(r,pt(nn)),await this.sendResult({id:c,topic:r,result:!0}),this.client.events.emit("session_extend",{id:c,topic:r})}catch(i){await this.sendError(c,r,i),this.client.logger.error(i)}},this.onSessionExtendResponse=(r,i)=>{let{id:c}=i;isJsonRpcResult(i)?this.events.emit(yt("session_extend",c),{}):isJsonRpcError(i)&&this.events.emit(yt("session_extend",c),{error:i.error})},this.onSessionPingRequest=async(r,i)=>{let{id:c}=i;try{this.isValidPing({topic:r}),await this.sendResult({id:c,topic:r,result:!0}),this.client.events.emit("session_ping",{id:c,topic:r})}catch(i){await this.sendError(c,r,i),this.client.logger.error(i)}},this.onSessionPingResponse=(r,i)=>{let{id:c}=i;setTimeout(()=>{isJsonRpcResult(i)?this.events.emit(yt("session_ping",c),{}):isJsonRpcError(i)&&this.events.emit(yt("session_ping",c),{error:i.error})},500)},this.onSessionDeleteRequest=async(r,i)=>{let{id:c}=i;try{this.isValidDisconnect({topic:r,reason:i.params}),await Promise.all([new Promise(i=>{this.client.core.relayer.once(iC.publish,async()=>{i(await this.deleteSession({topic:r,id:c}))})}),this.sendResult({id:c,topic:r,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:r,error:U("USER_DISCONNECTED")})])}catch(r){this.client.logger.error(r)}},this.onSessionRequest=async(r,i)=>{let{id:c,params:u}=i;try{this.isValidRequest(sign_client_dist_index_es_g({topic:r},u));let i=Ln(JSON.stringify(formatJsonRpcRequest("wc_sessionRequest",u,c))),l=this.client.session.get(r),d=await this.getVerifyContext(i,l.peer.metadata),p={id:c,topic:r,params:u,verifyContext:d};await this.setPendingSessionRequest(p),this.addSessionRequestToSessionRequestQueue(p),this.processSessionRequestQueue()}catch(i){await this.sendError(c,r,i),this.client.logger.error(i)}},this.onSessionRequestResponse=(r,i)=>{let{id:c}=i;isJsonRpcResult(i)?this.events.emit(yt("session_request",c),{result:i.result}):isJsonRpcError(i)&&this.events.emit(yt("session_request",c),{error:i.error})},this.onSessionEventRequest=async(r,i)=>{let{id:c,params:u}=i;try{let i=`${r}_session_event_${u.event.name}`,l=sr.get(i);if(l&&this.isRequestOutOfSync(l,c)){this.client.logger.info(`Discarding out of sync request - ${c}`);return}this.isValidEmit(sign_client_dist_index_es_g({topic:r},u)),this.client.events.emit("session_event",{id:c,topic:r,params:u}),sr.set(i,c)}catch(i){await this.sendError(c,r,i),this.client.logger.error(i)}},this.addSessionRequestToSessionRequestQueue=r=>{this.sessionRequestQueue.queue.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=nd.idle,this.processSessionRequestQueue()},(0,tm.toMiliseconds)(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:r,error:i})=>{let c=this.client.core.history.pending;c.length>0&&c.filter(i=>i.topic===r&&"wc_sessionRequest"===i.request.method).forEach(r=>{this.events.emit(yt("session_request",r.request.id),{error:i})})},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===nd.active){this.client.logger.info("session request queue is already active.");return}let r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=nd.active,this.client.events.emit("session_request",r)}catch(r){this.client.logger.error(r)}},this.onPairingCreated=r=>{if(r.active)return;let i=this.client.proposal.getAll().find(i=>i.pairingTopic===r.topic);i&&this.onSessionProposeRequest(r.topic,formatJsonRpcRequest("wc_sessionPropose",{requiredNamespaces:i.requiredNamespaces,optionalNamespaces:i.optionalNamespaces,relays:i.relays,proposer:i.proposer,sessionProperties:i.sessionProperties},i.id))},this.isValidConnect=async r=>{if(!Gt(r)){let{message:i}=index_es_N("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw Error(i)}let{pairingTopic:i,requiredNamespaces:c,optionalNamespaces:u,sessionProperties:l,relays:d}=r;if(index_es_w(i)||await this.isValidPairingTopic(i),!qt(d,!0)){let{message:r}=index_es_N("MISSING_OR_INVALID",`connect() relays: ${d}`);throw Error(r)}index_es_w(c)||0===B(c)||this.validateNamespaces(c,"requiredNamespaces"),index_es_w(u)||0===B(u)||this.validateNamespaces(u,"optionalNamespaces"),index_es_w(l)||this.validateSessionProps(l,"sessionProperties")},this.validateNamespaces=(r,i)=>{let c=Ht(r,"connect()",i);if(c)throw Error(c.message)},this.isValidApprove=async r=>{if(!Gt(r))throw Error(index_es_N("MISSING_OR_INVALID",`approve() params: ${r}`).message);let{id:i,namespaces:c,relayProtocol:u,sessionProperties:l}=r;await this.isValidProposalId(i);let d=this.client.proposal.get(i),p=ln(c,"approve()");if(p)throw Error(p.message);let g=fn(d.requiredNamespaces,c,"approve()");if(g)throw Error(g.message);if(!index_es_g(u,!0)){let{message:r}=index_es_N("MISSING_OR_INVALID",`approve() relayProtocol: ${u}`);throw Error(r)}index_es_w(l)||this.validateSessionProps(l,"sessionProperties")},this.isValidReject=async r=>{if(!Gt(r)){let{message:i}=index_es_N("MISSING_OR_INVALID",`reject() params: ${r}`);throw Error(i)}let{id:i,reason:c}=r;if(await this.isValidProposalId(i),!Wt(c)){let{message:r}=index_es_N("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(c)}`);throw Error(r)}},this.isValidSessionSettleRequest=r=>{if(!Gt(r)){let{message:i}=index_es_N("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw Error(i)}let{relay:i,controller:c,namespaces:u,expiry:l}=r;if(!dn(i)){let{message:r}=index_es_N("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw Error(r)}let d=Ft(c,"onSessionSettleRequest()");if(d)throw Error(d.message);let p=ln(u,"onSessionSettleRequest()");if(p)throw Error(p.message);if(mt(l)){let{message:r}=index_es_N("EXPIRED","onSessionSettleRequest()");throw Error(r)}},this.isValidUpdate=async r=>{if(!Gt(r)){let{message:i}=index_es_N("MISSING_OR_INVALID",`update() params: ${r}`);throw Error(i)}let{topic:i,namespaces:c}=r;await this.isValidSessionTopic(i);let u=this.client.session.get(i),l=ln(c,"update()");if(l)throw Error(l.message);let d=fn(u.requiredNamespaces,c,"update()");if(d)throw Error(d.message)},this.isValidExtend=async r=>{if(!Gt(r)){let{message:i}=index_es_N("MISSING_OR_INVALID",`extend() params: ${r}`);throw Error(i)}let{topic:i}=r;await this.isValidSessionTopic(i)},this.isValidRequest=async r=>{if(!Gt(r)){let{message:i}=index_es_N("MISSING_OR_INVALID",`request() params: ${r}`);throw Error(i)}let{topic:i,request:c,chainId:u,expiry:l}=r;await this.isValidSessionTopic(i);let{namespaces:d}=this.client.session.get(i);if(!Qt(d,u)){let{message:r}=index_es_N("MISSING_OR_INVALID",`request() chainId: ${u}`);throw Error(r)}if(!zt(c)){let{message:r}=index_es_N("MISSING_OR_INVALID",`request() ${JSON.stringify(c)}`);throw Error(r)}if(!Zt(d,u,c.method)){let{message:r}=index_es_N("MISSING_OR_INVALID",`request() method: ${c.method}`);throw Error(r)}if(l&&!tr(l,no)){let{message:r}=index_es_N("MISSING_OR_INVALID",`request() expiry: ${l}. Expiry must be a number (in seconds) between ${no.min} and ${no.max}`);throw Error(r)}},this.isValidRespond=async r=>{var i;if(!Gt(r)){let{message:i}=index_es_N("MISSING_OR_INVALID",`respond() params: ${r}`);throw Error(i)}let{topic:c,response:u}=r;try{await this.isValidSessionTopic(c)}catch(c){throw null!=(i=r?.response)&&i.id&&this.cleanupAfterResponse(r),c}if(!Yt(u)){let{message:r}=index_es_N("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(u)}`);throw Error(r)}},this.isValidPing=async r=>{if(!Gt(r)){let{message:i}=index_es_N("MISSING_OR_INVALID",`ping() params: ${r}`);throw Error(i)}let{topic:i}=r;await this.isValidSessionOrPairingTopic(i)},this.isValidEmit=async r=>{if(!Gt(r)){let{message:i}=index_es_N("MISSING_OR_INVALID",`emit() params: ${r}`);throw Error(i)}let{topic:i,event:c,chainId:u}=r;await this.isValidSessionTopic(i);let{namespaces:l}=this.client.session.get(i);if(!Qt(l,u)){let{message:r}=index_es_N("MISSING_OR_INVALID",`emit() chainId: ${u}`);throw Error(r)}if(!Jt(c)){let{message:r}=index_es_N("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(c)}`);throw Error(r)}if(!Xt(l,u,c.name)){let{message:r}=index_es_N("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(c)}`);throw Error(r)}},this.isValidDisconnect=async r=>{if(!Gt(r)){let{message:i}=index_es_N("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw Error(i)}let{topic:i}=r;await this.isValidSessionOrPairingTopic(i)},this.getVerifyContext=async(r,i)=>{let c={verified:{verifyUrl:i.verifyUrl||iq,validation:"UNKNOWN",origin:i.url||""}};try{let u=await this.client.core.verify.resolve({attestationId:r,verifyUrl:i.verifyUrl});u&&(c.verified.origin=u.origin,c.verified.isScam=u.isScam,c.verified.validation=u.origin===new URL(i.url).origin?"VALID":"INVALID")}catch(r){this.client.logger.info(r)}return this.client.logger.info(`Verify context: ${JSON.stringify(c)}`),c},this.validateSessionProps=(r,i)=>{Object.values(r).forEach(r=>{if(!index_es_g(r,!1)){let{message:c}=index_es_N("MISSING_OR_INVALID",`${i} must be in Record<string, string> format. Received: ${JSON.stringify(r)}`);throw Error(c)}})}}async isInitialized(){if(!this.initialized){let{message:r}=index_es_N("NOT_INITIALIZED",this.name);throw Error(r)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(iC.message,async r=>{let{topic:i,message:c}=r;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(c)))return;let u=await this.client.core.crypto.decode(i,c);try{isJsonRpcRequest(u)?(this.client.core.history.set(i,u),this.onRelayEventRequest({topic:i,payload:u})):isJsonRpcResponse(u)?(await this.client.core.history.resolve(u),await this.onRelayEventResponse({topic:i,payload:u}),this.client.core.history.delete(i,u.id)):this.onRelayEventUnknownPayload({topic:i,payload:u})}catch(r){this.client.logger.error(r)}})}registerExpirerEvents(){this.client.core.expirer.on(ik.expired,async r=>{let{topic:i,id:c}=ft(r.target);if(c&&this.client.pendingRequest.keys.includes(c))return await this.deletePendingSessionRequest(c,index_es_N("EXPIRED"),!0);i?this.client.session.keys.includes(i)&&(await this.deleteSession({topic:i,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:i})):c&&(await this.deleteProposal(c,!0),this.client.events.emit("proposal_expire",{id:c}))})}registerPairingEvents(){this.client.core.pairing.events.on(iU.create,r=>this.onPairingCreated(r))}isValidPairingTopic(r){if(!index_es_g(r,!1)){let{message:i}=index_es_N("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw Error(i)}if(!this.client.core.pairing.pairings.keys.includes(r)){let{message:i}=index_es_N("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw Error(i)}if(mt(this.client.core.pairing.pairings.get(r).expiry)){let{message:i}=index_es_N("EXPIRED",`pairing topic: ${r}`);throw Error(i)}}async isValidSessionTopic(r){if(!index_es_g(r,!1)){let{message:i}=index_es_N("MISSING_OR_INVALID",`session topic should be a string: ${r}`);throw Error(i)}if(!this.client.session.keys.includes(r)){let{message:i}=index_es_N("NO_MATCHING_KEY",`session topic doesn't exist: ${r}`);throw Error(i)}if(mt(this.client.session.get(r).expiry)){await this.deleteSession({topic:r});let{message:i}=index_es_N("EXPIRED",`session topic: ${r}`);throw Error(i)}if(!this.client.core.crypto.keychain.has(r)){let{message:i}=index_es_N("MISSING_OR_INVALID",`session topic does not exist in keychain: ${r}`);throw await this.deleteSession({topic:r}),Error(i)}}async isValidSessionOrPairingTopic(r){if(this.client.session.keys.includes(r))await this.isValidSessionTopic(r);else if(this.client.core.pairing.pairings.keys.includes(r))this.isValidPairingTopic(r);else if(index_es_g(r,!1)){let{message:i}=index_es_N("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${r}`);throw Error(i)}else{let{message:i}=index_es_N("MISSING_OR_INVALID",`session or pairing topic should be a string: ${r}`);throw Error(i)}}async isValidProposalId(r){if(!Bt(r)){let{message:i}=index_es_N("MISSING_OR_INVALID",`proposal id should be a number: ${r}`);throw Error(i)}if(!this.client.proposal.keys.includes(r)){let{message:i}=index_es_N("NO_MATCHING_KEY",`proposal id doesn't exist: ${r}`);throw Error(i)}if(mt(this.client.proposal.get(r).expiryTimestamp)){await this.deleteProposal(r);let{message:i}=index_es_N("EXPIRED",`proposal id: ${r}`);throw Error(i)}}};let index_es_us=class index_es_us extends index_es_Kt{constructor(r,i){super(r,i,"proposal",i4),this.core=r,this.logger=i}};let index_es_ge=class index_es_ge extends index_es_Kt{constructor(r,i){super(r,i,"session",i4),this.core=r,this.logger=i}};let index_es_gs=class index_es_gs extends index_es_Kt{constructor(r,i){super(r,i,"request",i4,r=>r.id),this.core=r,this.logger=i}};let dist_index_es_Q=class dist_index_es_Q extends dist_index_es_b{constructor(r){super(r),this.protocol="wc",this.version=2,this.name=i9.name,this.events=new Q.EventEmitter,this.on=(r,i)=>this.events.on(r,i),this.once=(r,i)=>this.events.once(r,i),this.off=(r,i)=>this.events.off(r,i),this.removeListener=(r,i)=>this.events.removeListener(r,i),this.removeAllListeners=r=>this.events.removeAllListeners(r),this.connect=async r=>{try{return await this.engine.connect(r)}catch(r){throw this.logger.error(r.message),r}},this.pair=async r=>{try{return await this.engine.pair(r)}catch(r){throw this.logger.error(r.message),r}},this.approve=async r=>{try{return await this.engine.approve(r)}catch(r){throw this.logger.error(r.message),r}},this.reject=async r=>{try{return await this.engine.reject(r)}catch(r){throw this.logger.error(r.message),r}},this.update=async r=>{try{return await this.engine.update(r)}catch(r){throw this.logger.error(r.message),r}},this.extend=async r=>{try{return await this.engine.extend(r)}catch(r){throw this.logger.error(r.message),r}},this.request=async r=>{try{return await this.engine.request(r)}catch(r){throw this.logger.error(r.message),r}},this.respond=async r=>{try{return await this.engine.respond(r)}catch(r){throw this.logger.error(r.message),r}},this.ping=async r=>{try{return await this.engine.ping(r)}catch(r){throw this.logger.error(r.message),r}},this.emit=async r=>{try{return await this.engine.emit(r)}catch(r){throw this.logger.error(r.message),r}},this.disconnect=async r=>{try{return await this.engine.disconnect(r)}catch(r){throw this.logger.error(r.message),r}},this.find=r=>{try{return this.engine.find(r)}catch(r){throw this.logger.error(r.message),r}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}},this.name=r?.name||i9.name,this.metadata=r?.metadata||Qn();let i="u">typeof r?.logger&&"string"!=typeof r?.logger?r.logger:tX()(logger_dist_index_es_k({level:r?.logger||i9.logger}));this.core=r?.core||new index_es_te(r),this.logger=dist_index_es_E(i,this.name),this.session=new index_es_ge(this.core,this.logger),this.proposal=new index_es_us(this.core,this.logger),this.pendingRequest=new index_es_gs(this.core,this.logger),this.engine=new index_es_ds(this)}static async init(r){let i=new dist_index_es_Q(r);return await i.initialize(),i}get context(){return index_es_y(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(r){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(r.message),r}}};var nx=c(69719),nS=c.n(nx);let nD={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};let HttpConnection=class HttpConnection{constructor(r,i=!1){if(this.url=r,this.disableProviderPing=i,this.events=new Q.EventEmitter,this.isAvailable=!1,this.registering=!1,!isHttpUrl(r))throw Error(`Provided URL is not compatible with HTTP connection: ${r}`);this.url=r,this.disableProviderPing=i}get connected(){return this.isAvailable}get connecting(){return this.registering}on(r,i){this.events.on(r,i)}once(r,i){this.events.once(r,i)}off(r,i){this.events.off(r,i)}removeListener(r,i){this.events.removeListener(r,i)}async open(r=this.url){await this.register(r)}async close(){if(!this.isAvailable)throw Error("Connection already closed");this.onClose()}async send(r,i){this.isAvailable||await this.register();try{let i=safeJsonStringify(r),c=await nS()(this.url,Object.assign(Object.assign({},nD),{body:i})),u=await c.json();this.onPayload({data:u})}catch(i){this.onError(r.id,i)}}async register(r=this.url){if(!isHttpUrl(r))throw Error(`Provided URL is not compatible with HTTP connection: ${r}`);if(this.registering){let r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((r,i)=>{this.events.once("register_error",r=>{this.resetMaxListeners(),i(r)}),this.events.once("open",()=>{if(this.resetMaxListeners(),void 0===this.isAvailable)return i(Error("HTTP connection is missing or invalid"));r()})})}this.url=r,this.registering=!0;try{if(!this.disableProviderPing){let i=safeJsonStringify({id:1,jsonrpc:"2.0",method:"test",params:[]});await nS()(r,Object.assign(Object.assign({},nD),{body:i}))}this.onOpen()}catch(i){let r=this.parseError(i);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(r){if(void 0===r.data)return;let i="string"==typeof r.data?esm_safeJsonParse(r.data):r.data;this.events.emit("payload",i)}onError(r,i){let c=this.parseError(i),u=c.message||c.toString(),l=formatJsonRpcError(r,u);this.events.emit("payload",l)}parseError(r,i=this.url){return parseConnectionError(r,i,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}};let nI="error",nO="wc@2:universal_provider:",nP={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var nC="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof c.g?c.g:"u">typeof self?self:{},nA={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */!function(r,i){(function(){var c,u="Expected a function",l="__lodash_hash_undefined__",d="__lodash_placeholder__",p=1/0,g=0/0,_=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],w="[object Arguments]",S="[object Array]",P="[object Boolean]",C="[object Date]",L="[object Error]",k="[object Function]",q="[object GeneratorFunction]",z="[object Map]",J="[object Number]",Q="[object Object]",X="[object Promise]",et="[object RegExp]",eo="[object Set]",ep="[object String]",e_="[object Symbol]",ey="[object WeakMap]",em="[object ArrayBuffer]",eb="[object DataView]",ew="[object Float32Array]",eE="[object Float64Array]",ex="[object Int8Array]",eS="[object Int16Array]",eD="[object Int32Array]",eI="[object Uint8Array]",eO="[object Uint8ClampedArray]",eP="[object Uint16Array]",eC="[object Uint32Array]",eA=/\b__p \+= '';/g,eR=/\b(__p \+=) '' \+/g,eN=/(__e\(.*?\)|\b__t\)) \+\n'';/g,eT=/&(?:amp|lt|gt|quot|#39);/g,ej=/[&<>"']/g,eU=RegExp(eT.source),eL=RegExp(ej.source),ek=/<%-([\s\S]+?)%>/g,eM=/<%([\s\S]+?)%>/g,ez=/<%=([\s\S]+?)%>/g,eH=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,e$=/^\w*$/,eB=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,eF=/[\\^$.*+?()[\]{}|]/g,eK=RegExp(eF.source),eV=/^\s+/,eW=/\s/,eG=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,eJ=/\{\n\/\* \[wrapped with (.+)\] \*/,eY=/,? & /,eQ=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,eZ=/[()=,{}\[\]\/\s]/,eX=/\\(\\)?/g,e0=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,e1=/\w*$/,e5=/^[-+]0x[0-9a-f]+$/i,e3=/^0b[01]+$/i,e2=/^\[object .+?Constructor\]$/,e6=/^0o[0-7]+$/i,e8=/^(?:0|[1-9]\d*)$/,e4=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,e9=/($^)/,e7=/['\n\r\u2028\u2029\\]/g,tn="\ud800-\udfff",to="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ta="\\u2700-\\u27bf",td="a-z\\xdf-\\xf6\\xf8-\\xff",tf="A-Z\\xc0-\\xd6\\xd8-\\xde",t_="\\ufe0e\\ufe0f",ty="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",tm="['’]",tb="["+ty+"]",tw="["+to+"]",tE="["+td+"]",tx="[^"+tn+ty+"\\d+"+ta+td+tf+"]",tS="\ud83c[\udffb-\udfff]",tD="[^"+tn+"]",tI="(?:\ud83c[\udde6-\uddff]){2}",tO="[\ud800-\udbff][\udc00-\udfff]",tP="["+tf+"]",tC="\\u200d",tA="(?:"+tE+"|"+tx+")",tR="(?:"+tm+"(?:d|ll|m|re|s|t|ve))?",tN="(?:"+tm+"(?:D|LL|M|RE|S|T|VE))?",tT="(?:"+tw+"|"+tS+")?",tj="["+t_+"]?",tU="(?:"+tC+"(?:"+[tD,tI,tO].join("|")+")"+tj+tT+")*",tL=tj+tT+tU,tk="(?:"+["["+ta+"]",tI,tO].join("|")+")"+tL,tM="(?:"+[tD+tw+"?",tw,tI,tO,"["+tn+"]"].join("|")+")",tq=RegExp(tm,"g"),tz=RegExp(tw,"g"),tH=RegExp(tS+"(?="+tS+")|"+tM+tL,"g"),t$=RegExp([tP+"?"+tE+"+"+tR+"(?="+[tb,tP,"$"].join("|")+")","(?:"+tP+"|"+tx+")+"+tN+"(?="+[tb,tP+tA,"$"].join("|")+")",tP+"?"+tA+"+"+tR,tP+"+"+tN,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",tk].join("|"),"g"),tB=RegExp("["+tC+tn+to+t_+"]"),tF=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,tK=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],tV=-1,tW={};tW[ew]=tW[eE]=tW[ex]=tW[eS]=tW[eD]=tW[eI]=tW[eO]=tW[eP]=tW[eC]=!0,tW[w]=tW[S]=tW[em]=tW[P]=tW[eb]=tW[C]=tW[L]=tW[k]=tW[z]=tW[J]=tW[Q]=tW[et]=tW[eo]=tW[ep]=tW[ey]=!1;var tG={};tG[w]=tG[S]=tG[em]=tG[eb]=tG[P]=tG[C]=tG[ew]=tG[eE]=tG[ex]=tG[eS]=tG[eD]=tG[z]=tG[J]=tG[Q]=tG[et]=tG[eo]=tG[ep]=tG[e_]=tG[eI]=tG[eO]=tG[eP]=tG[eC]=!0,tG[L]=tG[k]=tG[ey]=!1;var tJ={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},tY=parseFloat,tQ=parseInt,tZ="object"==typeof nC&&nC&&nC.Object===Object&&nC,tX="object"==typeof self&&self&&self.Object===Object&&self,t0=tZ||tX||Function("return this")(),t1=i&&!i.nodeType&&i,t5=t1&&r&&!r.nodeType&&r,t3=t5&&t5.exports===t1,t2=t3&&tZ.process,t6=function(){try{return t5&&t5.require&&t5.require("util").types||t2&&t2.binding&&t2.binding("util")}catch{}}(),t8=t6&&t6.isArrayBuffer,t4=t6&&t6.isDate,t9=t6&&t6.isMap,t7=t6&&t6.isRegExp,ro=t6&&t6.isSet,ra=t6&&t6.isTypedArray;function cn(r,i,c){switch(c.length){case 0:return r.call(i);case 1:return r.call(i,c[0]);case 2:return r.call(i,c[0],c[1]);case 3:return r.call(i,c[0],c[1],c[2])}return r.apply(i,c)}function ko(r,i,c,u){for(var l=-1,d=null==r?0:r.length;++l<d;){var p=r[l];i(u,p,c(p),r)}return u}function mn(r,i){for(var c=-1,u=null==r?0:r.length;++c<u&&!1!==i(r[c],c,r););return r}function jo(r,i){for(var c=null==r?0:r.length;c--&&!1!==i(r[c],c,r););return r}function As(r,i){for(var c=-1,u=null==r?0:r.length;++c<u;)if(!i(r[c],c,r))return!1;return!0}function jn(r,i){for(var c=-1,u=null==r?0:r.length,l=0,d=[];++c<u;){var p=r[c];i(p,c,r)&&(d[l++]=p)}return d}function Ee(r,i){return!!(null==r?0:r.length)&&Tt(r,i,0)>-1}function Dr(r,i,c){for(var u=-1,l=null==r?0:r.length;++u<l;)if(c(i,r[u]))return!0;return!1}function G(r,i){for(var c=-1,u=null==r?0:r.length,l=Array(u);++c<u;)l[c]=i(r[c],c,r);return l}function nt(r,i){for(var c=-1,u=i.length,l=r.length;++c<u;)r[l+c]=i[c];return r}function Hr(r,i,c,u){var l=-1,d=null==r?0:r.length;for(u&&d&&(c=r[++l]);++l<d;)c=i(c,r[l],l,r);return c}function nf(r,i,c,u){var l=null==r?0:r.length;for(u&&l&&(c=r[--l]);l--;)c=i(c,r[l],l,r);return c}function Nr(r,i){for(var c=-1,u=null==r?0:r.length;++c<u;)if(i(r[c],c,r))return!0;return!1}var rp=$r("length");function ef(r){return r.split("")}function rf(r){return r.match(eQ)||[]}function Cs(r,i,c){var u;return c(r,function(r,c,l){if(i(r,c,l))return u=c,!1}),u}function ye(r,i,c,u){for(var l=r.length,d=c+(u?1:-1);u?d--:++d<l;)if(i(r[d],d,r))return d;return -1}function Tt(r,i,c){return i==i?vf(r,i,c):ye(r,Is,c)}function sf(r,i,c,u){for(var l=c-1,d=r.length;++l<d;)if(u(r[l],i))return l;return -1}function Is(r){return r!=r}function xs(r,i){var c=null==r?0:r.length;return c?Wr(r,i)/c:g}function $r(r){return function(i){return null==i?c:i[r]}}function Ur(r){return function(i){return null==r?c:r[i]}}function Es(r,i,c,u,l){return l(r,function(r,l,d){c=u?(u=!1,r):i(c,r,l,d)}),c}function uf(r,i){var c=r.length;for(r.sort(i);c--;)r[c]=r[c].value;return r}function Wr(r,i){for(var u,l=-1,d=r.length;++l<d;){var p=i(r[l]);p!==c&&(u=u===c?p:u+p)}return u}function Fr(r,i){for(var c=-1,u=Array(r);++c<r;)u[c]=i(c);return u}function af(r,i){return G(i,function(i){return[i,r[i]]})}function ys(r){return r&&r.slice(0,bs(r)+1).replace(eV,"")}function hn(r){return function(i){return r(i)}}function Mr(r,i){return G(i,function(i){return r[i]})}function jt(r,i){return r.has(i)}function Ss(r,i){for(var c=-1,u=r.length;++c<u&&Tt(i,r[c],0)>-1;);return c}function Os(r,i){for(var c=r.length;c--&&Tt(i,r[c],0)>-1;);return c}function of(r,i){for(var c=r.length,u=0;c--;)r[c]===i&&++u;return u}var rg=Ur({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),r_=Ur({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function hf(r){return"\\"+tJ[r]}function lf(r,i){return null==r?c:r[i]}function Lt(r){return tB.test(r)}function pf(r){return tF.test(r)}function df(r){for(var i,c=[];!(i=r.next()).done;)c.push(i.value);return c}function qr(r){var i=-1,c=Array(r.size);return r.forEach(function(r,u){c[++i]=[u,r]}),c}function Rs(r,i){return function(c){return r(i(c))}}function tt(r,i){for(var c=-1,u=r.length,l=0,p=[];++c<u;){var g=r[c];(g===i||g===d)&&(r[c]=d,p[l++]=c)}return p}function Se(r){var i=-1,c=Array(r.size);return r.forEach(function(r){c[++i]=r}),c}function gf(r){var i=-1,c=Array(r.size);return r.forEach(function(r){c[++i]=[r,r]}),c}function vf(r,i,c){for(var u=c-1,l=r.length;++u<l;)if(r[u]===i)return u;return -1}function _f(r,i,c){for(var u=c+1;u--&&r[u]!==i;);return u}function Dt(r){return Lt(r)?wf(r):rp(r)}function On(r){return Lt(r)?Pf(r):ef(r)}function bs(r){for(var i=r.length;i--&&eW.test(r.charAt(i)););return i}var ry=Ur({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});function wf(r){for(var i=tH.lastIndex=0;tH.test(r);)++i;return i}function Pf(r){return r.match(tH)||[]}function Af(r){return r.match(t$)||[]}var rm=function h(r){var i,eW,eQ=(r=null==r?t0:rm.defaults(t0.Object(),r,rm.pick(t0,tK))).Array,tn=r.Date,to=r.Error,ta=r.Function,td=r.Math,tf=r.Object,t_=r.RegExp,ty=r.String,tm=r.TypeError,tb=eQ.prototype,tw=ta.prototype,tE=tf.prototype,tx=r["__core-js_shared__"],tS=tw.toString,tD=tE.hasOwnProperty,tI=0,tO=(i=/[^.]+$/.exec(tx&&tx.keys&&tx.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"",tP=tE.toString,tC=tS.call(tf),tA=t0._,tR=t_("^"+tS.call(tD).replace(eF,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tN=t3?r.Buffer:c,tT=r.Symbol,tj=r.Uint8Array,tU=tN?tN.allocUnsafe:c,tL=Rs(tf.getPrototypeOf,tf),tk=tf.create,tM=tE.propertyIsEnumerable,tH=tb.splice,t$=tT?tT.isConcatSpreadable:c,tB=tT?tT.iterator:c,tF=tT?tT.toStringTag:c,tJ=function(){try{var r=mt(tf,"defineProperty");return r({},"",{}),r}catch{}}(),tZ=r.clearTimeout!==t0.clearTimeout&&r.clearTimeout,tX=tn&&tn.now!==t0.Date.now&&tn.now,t1=r.setTimeout!==t0.setTimeout&&r.setTimeout,t5=td.ceil,t2=td.floor,t6=tf.getOwnPropertySymbols,rp=tN?tN.isBuffer:c,rb=r.isFinite,rw=tb.join,rE=Rs(tf.keys,tf),rx=td.max,rS=td.min,rD=tn.now,rI=r.parseInt,rO=td.random,rP=tb.reverse,rC=mt(r,"DataView"),rA=mt(r,"Map"),rR=mt(r,"Promise"),rN=mt(r,"Set"),rT=mt(r,"WeakMap"),rj=mt(tf,"create"),rU=rT&&new rT,rL={},rk=wt(rC),rM=wt(rA),rq=wt(rR),rz=wt(rN),rH=wt(rT),r$=tT?tT.prototype:c,rB=r$?r$.valueOf:c,rF=r$?r$.toString:c;function a(r){if(Y(r)&&!iY(r)&&!(r instanceof N)){if(r instanceof Pn)return r;if(tD.call(r,"__wrapped__"))return Fu(r)}return new Pn(r)}var rK=function(){function n(){}return function(r){if(!K(r))return{};if(tk)return tk(r);n.prototype=r;var i=new n;return n.prototype=c,i}}();function qe(){}function Pn(r,i){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=c}function N(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Gf(){var r=new N(this.__wrapped__);return r.__actions__=un(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=un(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=un(this.__views__),r}function zf(){if(this.__filtered__){var r=new N(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function Kf(){var r=this.__wrapped__.value(),i=this.__dir__,c=iY(r),u=i<0,l=c?r.length:0,d=rh(0,l,this.__views__),p=d.start,g=d.end,_=g-p,w=u?g:p-1,S=this.__iteratees__,P=S.length,C=0,L=rS(_,this.__takeCount__);if(!c||!u&&l==_&&L==_)return ou(r,this.__actions__);var k=[];e:for(;_--&&C<L;){w+=i;for(var q=-1,z=r[w];++q<P;){var J=S[q],Q=J.iteratee,X=J.type,et=Q(z);if(2==X)z=et;else if(!et){if(1==X)continue e;break e}}k[C++]=z}return k}function dt(r){var i=-1,c=null==r?0:r.length;for(this.clear();++i<c;){var u=r[i];this.set(u[0],u[1])}}function Yf(){this.__data__=rj?rj(null):{},this.size=0}function Zf(r){var i=this.has(r)&&delete this.__data__[r];return this.size-=i?1:0,i}function Jf(r){var i=this.__data__;if(rj){var u=i[r];return u===l?c:u}return tD.call(i,r)?i[r]:c}function Xf(r){var i=this.__data__;return rj?i[r]!==c:tD.call(i,r)}function Qf(r,i){var u=this.__data__;return this.size+=this.has(r)?0:1,u[r]=rj&&i===c?l:i,this}function Bn(r){var i=-1,c=null==r?0:r.length;for(this.clear();++i<c;){var u=r[i];this.set(u[0],u[1])}}function Vf(){this.__data__=[],this.size=0}function kf(r){var i=this.__data__,c=Be(i,r);return!(c<0)&&(c==i.length-1?i.pop():tH.call(i,c,1),--this.size,!0)}function jf(r){var i=this.__data__,u=Be(i,r);return u<0?c:i[u][1]}function nc(r){return Be(this.__data__,r)>-1}function tc(r,i){var c=this.__data__,u=Be(c,r);return u<0?(++this.size,c.push([r,i])):c[u][1]=i,this}function Gn(r){var i=-1,c=null==r?0:r.length;for(this.clear();++i<c;){var u=r[i];this.set(u[0],u[1])}}function ec(){this.size=0,this.__data__={hash:new dt,map:new(rA||Bn),string:new dt}}function rc(r){var i=nr(this,r).delete(r);return this.size-=i?1:0,i}function ic(r){return nr(this,r).get(r)}function sc(r){return nr(this,r).has(r)}function uc(r,i){var c=nr(this,r),u=c.size;return c.set(r,i),this.size+=c.size==u?0:1,this}function gt(r){var i=-1,c=null==r?0:r.length;for(this.__data__=new Gn;++i<c;)this.add(r[i])}function ac(r){return this.__data__.set(r,l),this}function oc(r){return this.__data__.has(r)}function Rn(r){var i=this.__data__=new Bn(r);this.size=i.size}function fc(){this.__data__=new Bn,this.size=0}function cc(r){var i=this.__data__,c=i.delete(r);return this.size=i.size,c}function hc(r){return this.__data__.get(r)}function lc(r){return this.__data__.has(r)}function pc(r,i){var c=this.__data__;if(c instanceof Bn){var u=c.__data__;if(!rA||u.length<199)return u.push([r,i]),this.size=++c.size,this;c=this.__data__=new Gn(u)}return c.set(r,i),this.size=c.size,this}function Fs(r,i){var c=iY(r),u=!c&&iJ(r),l=!c&&!u&&iZ(r),d=!c&&!u&&!l&&i3(r),p=c||u||l||d,g=p?Fr(r.length,ty):[],_=g.length;for(var w in r)(i||tD.call(r,w))&&!(p&&("length"==w||l&&("offset"==w||"parent"==w)||d&&("buffer"==w||"byteLength"==w||"byteOffset"==w)||Zn(w,_)))&&g.push(w);return g}function Ms(r){var i=r.length;return i?r[ei(0,i-1)]:c}function dc(r,i){return tr(un(r),vt(i,0,r.length))}function gc(r){return tr(un(r))}function Yr(r,i,u){(u===c||bn(r[i],u))&&(u!==c||i in r)||zn(r,i,u)}function se(r,i,u){var l=r[i];tD.call(r,i)&&bn(l,u)&&(u!==c||i in r)||zn(r,i,u)}function Be(r,i){for(var c=r.length;c--;)if(bn(r[c][0],i))return c;return -1}function vc(r,i,c,u){return rV(r,function(r,l,d){i(u,r,c(r),d)}),u}function qs(r,i){return r&&Un(i,V(i),r)}function _c(r,i){return r&&Un(i,on(i),r)}function zn(r,i,c){"__proto__"==i&&tJ?tJ(r,i,{configurable:!0,enumerable:!0,value:c,writable:!0}):r[i]=c}function Zr(r,i){for(var u=-1,l=i.length,d=eQ(l),p=null==r;++u<l;)d[u]=p?c:Si(r,i[u]);return d}function vt(r,i,u){return r==r&&(u!==c&&(r=r<=u?r:u),i!==c&&(r=r>=i?r:i)),r}function An(r,i,u,l,d,p){var g,_=1&i,S=2&i,P=4&i;if(u&&(g=d?u(r,l,d,p):u(r)),g!==c)return g;if(!K(r))return r;var C=iY(r);if(C){if(g=sh(r),!_)return un(r,g)}else{var L=r2(r),z=L==k||L==q;if(iZ(r))return hu(r,_);if(L==Q||L==w||z&&!d){if(g=S||z?{}:bu(r),!_)return S?Jc(r,_c(g,r)):Zc(r,qs(g,r))}else{if(!tG[L])return d?r:{};g=uh(r,L,_)}}p||(p=new Rn);var J=p.get(r);if(J)return J;p.set(r,g),i5(r)?r.forEach(function(c){g.add(An(c,i,u,c,r,p))}):i0(r)&&r.forEach(function(c,l){g.set(l,An(c,i,u,l,r,p))});var X=P?S?pi:li:S?on:V,et=C?c:X(r);return mn(et||r,function(c,l){et&&(c=r[l=c]),se(g,l,An(c,i,u,l,r,p))}),g}function mc(r){var i=V(r);return function(c){return Bs(c,r,i)}}function Bs(r,i,u){var l=u.length;if(null==r)return!l;for(r=tf(r);l--;){var d=u[l],p=i[d],g=r[d];if(g===c&&!(d in r)||!p(g))return!1}return!0}function Gs(r,i,l){if("function"!=typeof r)throw new tm(u);return r4(function(){r.apply(c,l)},i)}function ue(r,i,c,u){var l=-1,d=Ee,p=!0,g=r.length,_=[],w=i.length;if(!g)return _;c&&(i=G(i,hn(c))),u?(d=Dr,p=!1):i.length>=200&&(d=jt,p=!1,i=new gt(i));e:for(;++l<g;){var S=r[l],P=null==c?S:c(S);if(S=u||0!==S?S:0,p&&P==P){for(var C=w;C--;)if(i[C]===P)continue e;_.push(S)}else d(i,P,u)||_.push(S)}return _}a.templateSettings={escape:ek,evaluate:eM,interpolate:ez,variable:"",imports:{_:a}},a.prototype=qe.prototype,a.prototype.constructor=a,Pn.prototype=rK(qe.prototype),Pn.prototype.constructor=Pn,N.prototype=rK(qe.prototype),N.prototype.constructor=N,dt.prototype.clear=Yf,dt.prototype.delete=Zf,dt.prototype.get=Jf,dt.prototype.has=Xf,dt.prototype.set=Qf,Bn.prototype.clear=Vf,Bn.prototype.delete=kf,Bn.prototype.get=jf,Bn.prototype.has=nc,Bn.prototype.set=tc,Gn.prototype.clear=ec,Gn.prototype.delete=rc,Gn.prototype.get=ic,Gn.prototype.has=sc,Gn.prototype.set=uc,gt.prototype.add=gt.prototype.push=ac,gt.prototype.has=oc,Rn.prototype.clear=fc,Rn.prototype.delete=cc,Rn.prototype.get=hc,Rn.prototype.has=lc,Rn.prototype.set=pc;var rV=vu($n),rW=vu(Xr,!0);function wc(r,i){var c=!0;return rV(r,function(r,u,l){return c=!!i(r,u,l)}),c}function Ge(r,i,u){for(var l=-1,d=r.length;++l<d;){var p=r[l],g=i(p);if(null!=g&&(_===c?g==g&&!pn(g):u(g,_)))var _=g,w=p}return w}function Pc(r,i,u,l){var d=r.length;for((u=R(u))<0&&(u=-u>d?0:d+u),(l=l===c||l>d?d:R(l))<0&&(l+=d),l=u>l?0:aa(l);u<l;)r[u++]=i;return r}function Ks(r,i){var c=[];return rV(r,function(r,u,l){i(r,u,l)&&c.push(r)}),c}function j(r,i,c,u,l){var d=-1,p=r.length;for(c||(c=oh),l||(l=[]);++d<p;){var g=r[d];i>0&&c(g)?i>1?j(g,i-1,c,u,l):nt(l,g):u||(l[l.length]=g)}return l}var rG=_u(),rJ=_u(!0);function $n(r,i){return r&&rG(r,i,V)}function Xr(r,i){return r&&rJ(r,i,V)}function ze(r,i){return jn(i,function(i){return Jn(r[i])})}function _t(r,i){i=st(i,r);for(var u=0,l=i.length;null!=r&&u<l;)r=r[Wn(i[u++])];return u&&u==l?r:c}function Zs(r,i,c){var u=i(r);return iY(r)?u:nt(u,c(r))}function en(r){return null==r?r===c?"[object Undefined]":"[object Null]":tF&&tF in tf(r)?eh(r):gh(r)}function Qr(r,i){return r>i}function Ac(r,i){return null!=r&&tD.call(r,i)}function Cc(r,i){return null!=r&&i in tf(r)}function Ic(r,i,c){return r>=rS(i,c)&&r<rx(i,c)}function Vr(r,i,u){for(var l=u?Dr:Ee,d=r[0].length,p=r.length,g=p,_=eQ(p),w=1/0,S=[];g--;){var P=r[g];g&&i&&(P=G(P,hn(i))),w=rS(P.length,w),_[g]=!u&&(i||d>=120&&P.length>=120)?new gt(g&&P):c}P=r[0];var C=-1,L=_[0];e:for(;++C<d&&S.length<w;){var k=P[C],q=i?i(k):k;if(k=u||0!==k?k:0,!(L?jt(L,q):l(S,q,u))){for(g=p;--g;){var z=_[g];if(!(z?jt(z,q):l(r[g],q,u)))continue e}L&&L.push(q),S.push(k)}}return S}function xc(r,i,c,u){return $n(r,function(r,l,d){i(u,c(r),l,d)}),u}function ae(r,i,u){i=st(i,r);var l=null==(r=Hu(r,i))?r:r[Wn(In(i))];return null==l?c:cn(l,r,u)}function Js(r){return Y(r)&&en(r)==w}function Ec(r){return Y(r)&&en(r)==em}function yc(r){return Y(r)&&en(r)==C}function oe(r,i,c,u,l){return r===i||(null!=r&&null!=i&&(Y(r)||Y(i))?Sc(r,i,c,u,oe,l):r!=r&&i!=i)}function Sc(r,i,c,u,l,d){var p=iY(r),g=iY(i),_=p?S:r2(r),P=g?S:r2(i);_=_==w?Q:_,P=P==w?Q:P;var C=_==Q,L=P==Q,k=_==P;if(k&&iZ(r)){if(!iZ(i))return!1;p=!0,C=!1}if(k&&!C)return d||(d=new Rn),p||i3(r)?Su(r,i,c,u,l,d):nh(r,i,_,c,u,l,d);if(!(1&c)){var q=C&&tD.call(r,"__wrapped__"),z=L&&tD.call(i,"__wrapped__");if(q||z){var J=q?r.value():r,X=z?i.value():i;return d||(d=new Rn),l(J,X,c,u,d)}}return!!k&&(d||(d=new Rn),th(r,i,c,u,l,d))}function Oc(r){return Y(r)&&r2(r)==z}function kr(r,i,u,l){var d=u.length,p=d,g=!l;if(null==r)return!p;for(r=tf(r);d--;){var _=u[d];if(g&&_[2]?_[1]!==r[_[0]]:!(_[0]in r))return!1}for(;++d<p;){var w=(_=u[d])[0],S=r[w],P=_[1];if(g&&_[2]){if(S===c&&!(w in r))return!1}else{var C=new Rn;if(l)var L=l(S,P,w,r,i,C);if(!(L===c?oe(P,S,3,l,C):L))return!1}}return!0}function Xs(r){return!(!K(r)||ch(r))&&(Jn(r)?tR:e2).test(wt(r))}function Rc(r){return Y(r)&&en(r)==et}function bc(r){return Y(r)&&r2(r)==eo}function Tc(r){return Y(r)&&ar(r.length)&&!!tW[en(r)]}function Qs(r){return"function"==typeof r?r:null==r?fn:"object"==typeof r?iY(r)?js(r[0],r[1]):ks(r):ma(r)}function jr(r){if(!he(r))return rE(r);var i=[];for(var c in tf(r))tD.call(r,c)&&"constructor"!=c&&i.push(c);return i}function Lc(r){if(!K(r))return dh(r);var i=he(r),c=[];for(var u in r)"constructor"==u&&(i||!tD.call(r,u))||c.push(u);return c}function ni(r,i){return r<i}function Vs(r,i){var c=-1,u=an(r)?eQ(r.length):[];return rV(r,function(r,l,d){u[++c]=i(r,l,d)}),u}function ks(r){var i=gi(r);return 1==i.length&&i[0][2]?Lu(i[0][0],i[0][1]):function(c){return c===r||kr(c,r,i)}}function js(r,i){var u;return _i(r)&&(u=i)==u&&!K(u)?Lu(Wn(r),i):function(u){var l=Si(u,r);return l===c&&l===i?Oi(u,r):oe(i,l,3)}}function Ke(r,i,u,l,d){r!==i&&rG(i,function(p,g){if(d||(d=new Rn),K(p))Dc(r,i,g,u,Ke,l,d);else{var _=l?l(wi(r,g),p,g+"",r,i,d):c;_===c&&(_=p),Yr(r,g,_)}},on)}function Dc(r,i,u,l,d,p,g){var _=wi(r,u),w=wi(i,u),S=g.get(w);if(S){Yr(r,u,S);return}var P=p?p(_,w,u+"",r,i,g):c,C=P===c;if(C){var L=iY(w),k=!L&&iZ(w),q=!L&&!k&&i3(w);P=w,L||k||q?iY(_)?P=_:Z(_)?P=un(_):k?(C=!1,P=hu(w,!0)):q?(C=!1,P=lu(w,!0)):P=[]:pe(w)||iJ(w)?(P=_,iJ(_)?P=oa(_):(!K(_)||Jn(_))&&(P=bu(w))):C=!1}C&&(g.set(w,P),d(P,w,l,p,g),g.delete(w)),Yr(r,u,P)}function nu(r,i){var u=r.length;if(u)return Zn(i+=i<0?u:0,u)?r[i]:c}function tu(r,i,c){i=i.length?G(i,function(r){return iY(r)?function(i){return _t(i,1===r.length?r[0]:r)}:r}):[fn];var u=-1;return i=G(i,hn(x())),uf(Vs(r,function(r,c,l){return{criteria:G(i,function(i){return i(r)}),index:++u,value:r}}),function(r,i){return Yc(r,i,c)})}function Hc(r,i){return eu(r,i,function(i,c){return Oi(r,c)})}function eu(r,i,c){for(var u=-1,l=i.length,d={};++u<l;){var p=i[u],g=_t(r,p);c(g,p)&&fe(d,st(p,r),g)}return d}function Nc(r){return function(i){return _t(i,r)}}function ti(r,i,c,u){var l=u?sf:Tt,d=-1,p=i.length,g=r;for(r===i&&(i=un(i)),c&&(g=G(r,hn(c)));++d<p;)for(var _=0,w=i[d],S=c?c(w):w;(_=l(g,S,_,u))>-1;)g!==r&&tH.call(g,_,1),tH.call(r,_,1);return r}function ru(r,i){for(var c=r?i.length:0,u=c-1;c--;){var l=i[c];if(c==u||l!==d){var d=l;Zn(l)?tH.call(r,l,1):si(r,l)}}return r}function ei(r,i){return r+t2(rO()*(i-r+1))}function $c(r,i,c,u){for(var l=-1,d=rx(t5((i-r)/(c||1)),0),p=eQ(d);d--;)p[u?d:++l]=r,r+=c;return p}function ri(r,i){var c="";if(!r||i<1||i>9007199254740991)return c;do i%2&&(c+=r),(i=t2(i/2))&&(r+=r);while(i);return c}function T(r,i){return r9(Du(r,i,fn),r+"")}function Uc(r){return Ms(Gt(r))}function Wc(r,i){var c=Gt(r);return tr(c,vt(i,0,c.length))}function fe(r,i,u,l){if(!K(r))return r;i=st(i,r);for(var d=-1,p=i.length,g=p-1,_=r;null!=_&&++d<p;){var w=Wn(i[d]),S=u;if("__proto__"===w||"constructor"===w||"prototype"===w)break;if(d!=g){var P=_[w];(S=l?l(P,w,_):c)===c&&(S=K(P)?P:Zn(i[d+1])?[]:{})}se(_,w,S),_=_[w]}return r}var rY=rU?function(r,i){return rU.set(r,i),r}:fn,rQ=tJ?function(r,i){return tJ(r,"toString",{configurable:!0,enumerable:!1,value:bi(i),writable:!0})}:fn;function Mc(r){return tr(Gt(r))}function Cn(r,i,c){var u=-1,l=r.length;i<0&&(i=-i>l?0:l+i),(c=c>l?l:c)<0&&(c+=l),l=i>c?0:c-i>>>0,i>>>=0;for(var d=eQ(l);++u<l;)d[u]=r[u+i];return d}function qc(r,i){var c;return rV(r,function(r,u,l){return!(c=i(r,u,l))}),!!c}function Ye(r,i,c){var u=0,l=null==r?u:r.length;if("number"==typeof i&&i==i&&l<=2147483647){for(;u<l;){var d=u+l>>>1,p=r[d];null!==p&&!pn(p)&&(c?p<=i:p<i)?u=d+1:l=d}return l}return ii(r,i,fn,c)}function ii(r,i,u,l){var d=0,p=null==r?0:r.length;if(0===p)return 0;i=u(i);for(var g=i!=i,_=null===i,w=pn(i),S=i===c;d<p;){var P=t2((d+p)/2),C=u(r[P]),L=C!==c,k=null===C,q=C==C,z=pn(C);if(g)var J=l||q;else J=S?q&&(l||L):_?q&&L&&(l||!k):w?q&&L&&!k&&(l||!z):!k&&!z&&(l?C<=i:C<i);J?d=P+1:p=P}return rS(p,4294967294)}function su(r,i){for(var c=-1,u=r.length,l=0,d=[];++c<u;){var p=r[c],g=i?i(p):p;if(!c||!bn(g,_)){var _=g;d[l++]=0===p?0:p}}return d}function uu(r){return"number"==typeof r?r:pn(r)?g:+r}function ln(r){if("string"==typeof r)return r;if(iY(r))return G(r,ln)+"";if(pn(r))return rF?rF.call(r):"";var i=r+"";return"0"==i&&1/r==-p?"-0":i}function it(r,i,c){var u=-1,l=Ee,d=r.length,p=!0,g=[],_=g;if(c)p=!1,l=Dr;else if(d>=200){var w=i?null:r0(r);if(w)return Se(w);p=!1,l=jt,_=new gt}else _=i?[]:g;e:for(;++u<d;){var S=r[u],P=i?i(S):S;if(S=c||0!==S?S:0,p&&P==P){for(var C=_.length;C--;)if(_[C]===P)continue e;i&&_.push(P),g.push(S)}else l(_,P,c)||(_!==g&&_.push(P),g.push(S))}return g}function si(r,i){return i=st(i,r),null==(r=Hu(r,i))||delete r[Wn(In(i))]}function au(r,i,c,u){return fe(r,i,c(_t(r,i)),u)}function Ze(r,i,c,u){for(var l=r.length,d=u?l:-1;(u?d--:++d<l)&&i(r[d],d,r););return c?Cn(r,u?0:d,u?d+1:l):Cn(r,u?d+1:0,u?l:d)}function ou(r,i){var c=r;return c instanceof N&&(c=c.value()),Hr(i,function(r,i){return i.func.apply(i.thisArg,nt([r],i.args))},c)}function ui(r,i,c){var u=r.length;if(u<2)return u?it(r[0]):[];for(var l=-1,d=eQ(u);++l<u;)for(var p=r[l],g=-1;++g<u;)g!=l&&(d[l]=ue(d[l]||p,r[g],i,c));return it(j(d,1),i,c)}function fu(r,i,u){for(var l=-1,d=r.length,p=i.length,g={};++l<d;){var _=l<p?i[l]:c;u(g,r[l],_)}return g}function ai(r){return Z(r)?r:[]}function oi(r){return"function"==typeof r?r:fn}function st(r,i){return iY(r)?r:_i(r,i)?[r]:r7(W(r))}var rZ=T;function ut(r,i,u){var l=r.length;return u=u===c?l:u,!i&&u>=l?r:Cn(r,i,u)}var rX=tZ||function(r){return t0.clearTimeout(r)};function hu(r,i){if(i)return r.slice();var c=r.length,u=tU?tU(c):new r.constructor(c);return r.copy(u),u}function fi(r){var i=new r.constructor(r.byteLength);return new tj(i).set(new tj(r)),i}function Gc(r,i){var c=i?fi(r.buffer):r.buffer;return new r.constructor(c,r.byteOffset,r.byteLength)}function zc(r){var i=new r.constructor(r.source,e1.exec(r));return i.lastIndex=r.lastIndex,i}function Kc(r){return rB?tf(rB.call(r)):{}}function lu(r,i){var c=i?fi(r.buffer):r.buffer;return new r.constructor(c,r.byteOffset,r.length)}function pu(r,i){if(r!==i){var u=r!==c,l=null===r,d=r==r,p=pn(r),g=i!==c,_=null===i,w=i==i,S=pn(i);if(!_&&!S&&!p&&r>i||p&&g&&w&&!_&&!S||l&&g&&w||!u&&w||!d)return 1;if(!l&&!p&&!S&&r<i||S&&u&&d&&!l&&!p||_&&u&&d||!g&&d||!w)return -1}return 0}function Yc(r,i,c){for(var u=-1,l=r.criteria,d=i.criteria,p=l.length,g=c.length;++u<p;){var _=pu(l[u],d[u]);if(_){if(u>=g)return _;return _*("desc"==c[u]?-1:1)}}return r.index-i.index}function du(r,i,c,u){for(var l=-1,d=r.length,p=c.length,g=-1,_=i.length,w=rx(d-p,0),S=eQ(_+w),P=!u;++g<_;)S[g]=i[g];for(;++l<p;)(P||l<d)&&(S[c[l]]=r[l]);for(;w--;)S[g++]=r[l++];return S}function gu(r,i,c,u){for(var l=-1,d=r.length,p=-1,g=c.length,_=-1,w=i.length,S=rx(d-g,0),P=eQ(S+w),C=!u;++l<S;)P[l]=r[l];for(var L=l;++_<w;)P[L+_]=i[_];for(;++p<g;)(C||l<d)&&(P[L+c[p]]=r[l++]);return P}function un(r,i){var c=-1,u=r.length;for(i||(i=eQ(u));++c<u;)i[c]=r[c];return i}function Un(r,i,u,l){var d=!u;u||(u={});for(var p=-1,g=i.length;++p<g;){var _=i[p],w=l?l(u[_],r[_],_,u,r):c;w===c&&(w=r[_]),d?zn(u,_,w):se(u,_,w)}return u}function Zc(r,i){return Un(r,r5(r),i)}function Jc(r,i){return Un(r,r3(r),i)}function Je(r,i){return function(c,u){var l=iY(c)?ko:vc,d=i?i():{};return l(c,r,x(u,2),d)}}function Ft(r){return T(function(i,u){var l=-1,d=u.length,p=d>1?u[d-1]:c,g=d>2?u[2]:c;for(p=r.length>3&&"function"==typeof p?(d--,p):c,g&&rn(u[0],u[1],g)&&(p=d<3?c:p,d=1),i=tf(i);++l<d;){var _=u[l];_&&r(i,_,l,p)}return i})}function vu(r,i){return function(c,u){if(null==c)return c;if(!an(c))return r(c,u);for(var l=c.length,d=i?l:-1,p=tf(c);(i?d--:++d<l)&&!1!==u(p[d],d,p););return c}}function _u(r){return function(i,c,u){for(var l=-1,d=tf(i),p=u(i),g=p.length;g--;){var _=p[r?g:++l];if(!1===c(d[_],_,d))break}return i}}function Xc(r,i,c){var u=1&i,l=ce(r);function o(){return(this&&this!==t0&&this instanceof o?l:r).apply(u?c:this,arguments)}return o}function mu(r){return function(i){var u=Lt(i=W(i))?On(i):c,l=u?u[0]:i.charAt(0),d=u?ut(u,1).join(""):i.slice(1);return l[r]()+d}}function Mt(r){return function(i){return Hr(va(ga(i).replace(tq,"")),r,"")}}function ce(r){return function(){var i=arguments;switch(i.length){case 0:return new r;case 1:return new r(i[0]);case 2:return new r(i[0],i[1]);case 3:return new r(i[0],i[1],i[2]);case 4:return new r(i[0],i[1],i[2],i[3]);case 5:return new r(i[0],i[1],i[2],i[3],i[4]);case 6:return new r(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new r(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var c=rK(r.prototype),u=r.apply(c,i);return K(u)?u:c}}function Qc(r,i,u){var l=ce(r);function s(){for(var d=arguments.length,p=eQ(d),g=d,_=qt(s);g--;)p[g]=arguments[g];var w=d<3&&p[0]!==_&&p[d-1]!==_?[]:tt(p,_);return(d-=w.length)<u?Iu(r,i,Xe,s.placeholder,c,p,w,c,c,u-d):cn(this&&this!==t0&&this instanceof s?l:r,this,p)}return s}function wu(r){return function(i,u,l){var d=tf(i);if(!an(i)){var p=x(u,3);i=V(i),u=function(r){return p(d[r],r,d)}}var g=r(i,u,l);return g>-1?d[p?i[g]:g]:c}}function Pu(r){return Yn(function(i){var l=i.length,d=l,p=Pn.prototype.thru;for(r&&i.reverse();d--;){var g=i[d];if("function"!=typeof g)throw new tm(u);if(p&&!_&&"wrapper"==je(g))var _=new Pn([],!0)}for(d=_?d:l;++d<l;){var w=je(g=i[d]),S="wrapper"==w?r1(g):c;_=S&&mi(S[0])&&424==S[1]&&!S[4].length&&1==S[9]?_[je(S[0])].apply(_,S[3]):1==g.length&&mi(g)?_[w]():_.thru(g)}return function(){var r=arguments,c=r[0];if(_&&1==r.length&&iY(c))return _.plant(c).value();for(var u=0,d=l?i[u].apply(this,r):c;++u<l;)d=i[u].call(this,d);return d}})}function Xe(r,i,u,l,d,p,g,_,w,S){var P=128&i,C=1&i,L=2&i,k=24&i,q=512&i,z=L?c:ce(r);function y(){for(var c=arguments.length,J=eQ(c),Q=c;Q--;)J[Q]=arguments[Q];if(k)var X=qt(y),et=of(J,X);if(l&&(J=du(J,l,d,k)),p&&(J=gu(J,p,g,k)),c-=et,k&&c<S){var eo=tt(J,X);return Iu(r,i,Xe,y.placeholder,u,J,eo,_,w,S-c)}var ep=C?u:this,e_=L?ep[r]:r;return c=J.length,_?J=vh(J,_):q&&c>1&&J.reverse(),P&&w<c&&(J.length=w),this&&this!==t0&&this instanceof y&&(e_=z||ce(e_)),e_.apply(ep,J)}return y}function Au(r,i){return function(c,u){return xc(c,r,i(u),{})}}function Qe(r,i){return function(u,l){var d;if(u===c&&l===c)return i;if(u!==c&&(d=u),l!==c){if(d===c)return l;"string"==typeof u||"string"==typeof l?(u=ln(u),l=ln(l)):(u=uu(u),l=uu(l)),d=r(u,l)}return d}}function ci(r){return Yn(function(i){return i=G(i,hn(x())),T(function(c){var u=this;return r(i,function(r){return cn(r,u,c)})})})}function Ve(r,i){var u=(i=i===c?" ":ln(i)).length;if(u<2)return u?ri(i,r):i;var l=ri(i,t5(r/Dt(i)));return Lt(i)?ut(On(l),0,r).join(""):l.slice(0,r)}function Vc(r,i,c,u){var l=1&i,d=ce(r);function f(){for(var i=-1,p=arguments.length,g=-1,_=u.length,w=eQ(_+p),S=this&&this!==t0&&this instanceof f?d:r;++g<_;)w[g]=u[g];for(;p--;)w[g++]=arguments[++i];return cn(S,l?c:this,w)}return f}function Cu(r){return function(i,u,l){return l&&"number"!=typeof l&&rn(i,u,l)&&(u=l=c),i=Xn(i),u===c?(u=i,i=0):u=Xn(u),l=l===c?i<u?1:-1:Xn(l),$c(i,u,l,r)}}function ke(r){return function(i,c){return"string"==typeof i&&"string"==typeof c||(i=xn(i),c=xn(c)),r(i,c)}}function Iu(r,i,u,l,d,p,g,_,w,S){var P=8&i,C=P?g:c,L=P?c:g,k=P?p:c,q=P?c:p;i|=P?32:64,4&(i&=~(P?64:32))||(i&=-4);var z=[r,i,d,k,C,q,L,_,w,S],J=u.apply(c,z);return mi(r)&&r8(J,z),J.placeholder=l,$u(J,r,i)}function hi(r){var i=td[r];return function(r,c){if(r=xn(r),(c=null==c?0:rS(R(c),292))&&rb(r)){var u=(W(r)+"e").split("e");return+((u=(W(i(u[0]+"e"+(+u[1]+c)))+"e").split("e"))[0]+"e"+(+u[1]-c))}return i(r)}}var r0=rN&&1/Se(new rN([,-0]))[1]==p?function(r){return new rN(r)}:Di;function xu(r){return function(i){var c=r2(i);return c==z?qr(i):c==eo?gf(i):af(i,r(i))}}function Kn(r,i,l,d,p,g,_,w){var S=2&i;if(!S&&"function"!=typeof r)throw new tm(u);var P=d?d.length:0;if(P||(i&=-97,d=p=c),_=_===c?_:rx(R(_),0),w=w===c?w:R(w),P-=p?p.length:0,64&i){var C=d,L=p;d=p=c}var k=S?c:r1(r),q=[r,i,l,d,p,C,L,g,_,w];if(k&&ph(q,k),r=q[0],i=q[1],l=q[2],d=q[3],p=q[4],(w=q[9]=q[9]===c?S?0:r.length:rx(q[9]-P,0))||!(24&i)||(i&=-25),i&&1!=i)z=8==i||16==i?Qc(r,i,w):32!=i&&33!=i||p.length?Xe.apply(c,q):Vc(r,i,l,d);else var z=Xc(r,i,l);return $u((k?rY:r8)(z,q),r,i)}function Eu(r,i,u,l){return r===c||bn(r,tE[u])&&!tD.call(l,u)?i:r}function yu(r,i,u,l,d,p){return K(r)&&K(i)&&(p.set(i,r),Ke(r,i,c,yu,p),p.delete(i)),r}function jc(r){return pe(r)?c:r}function Su(r,i,u,l,d,p){var g=1&u,_=r.length,w=i.length;if(_!=w&&!(g&&w>_))return!1;var S=p.get(r),P=p.get(i);if(S&&P)return S==i&&P==r;var C=-1,L=!0,k=2&u?new gt:c;for(p.set(r,i),p.set(i,r);++C<_;){var q=r[C],z=i[C];if(l)var J=g?l(z,q,C,i,r,p):l(q,z,C,r,i,p);if(J!==c){if(J)continue;L=!1;break}if(k){if(!Nr(i,function(r,i){if(!jt(k,i)&&(q===r||d(q,r,u,l,p)))return k.push(i)})){L=!1;break}}else if(!(q===z||d(q,z,u,l,p))){L=!1;break}}return p.delete(r),p.delete(i),L}function nh(r,i,c,u,l,d,p){switch(c){case eb:if(r.byteLength!=i.byteLength||r.byteOffset!=i.byteOffset)break;r=r.buffer,i=i.buffer;case em:return!(r.byteLength!=i.byteLength||!d(new tj(r),new tj(i)));case P:case C:case J:return bn(+r,+i);case L:return r.name==i.name&&r.message==i.message;case et:case ep:return r==i+"";case z:var g=qr;case eo:var _=1&u;if(g||(g=Se),r.size!=i.size&&!_)break;var w=p.get(r);if(w)return w==i;u|=2,p.set(r,i);var S=Su(g(r),g(i),u,l,d,p);return p.delete(r),S;case e_:if(rB)return rB.call(r)==rB.call(i)}return!1}function th(r,i,u,l,d,p){var g=1&u,_=li(r),w=_.length;if(w!=li(i).length&&!g)return!1;for(var S=w;S--;){var P=_[S];if(!(g?P in i:tD.call(i,P)))return!1}var C=p.get(r),L=p.get(i);if(C&&L)return C==i&&L==r;var k=!0;p.set(r,i),p.set(i,r);for(var q=g;++S<w;){var z=r[P=_[S]],J=i[P];if(l)var Q=g?l(J,z,P,i,r,p):l(z,J,P,r,i,p);if(!(Q===c?z===J||d(z,J,u,l,p):Q)){k=!1;break}q||(q="constructor"==P)}if(k&&!q){var X=r.constructor,et=i.constructor;X!=et&&"constructor"in r&&"constructor"in i&&!("function"==typeof X&&X instanceof X&&"function"==typeof et&&et instanceof et)&&(k=!1)}return p.delete(r),p.delete(i),k}function Yn(r){return r9(Du(r,c,Bu),r+"")}function li(r){return Zs(r,V,r5)}function pi(r){return Zs(r,on,r3)}var r1=rU?function(r){return rU.get(r)}:Di;function je(r){for(var i=r.name+"",c=rL[i],u=tD.call(rL,i)?c.length:0;u--;){var l=c[u],d=l.func;if(null==d||d==r)return l.name}return i}function qt(r){return(tD.call(a,"placeholder")?a:r).placeholder}function x(){var r=a.iteratee||Ti;return r=r===Ti?Qs:r,arguments.length?r(arguments[0],arguments[1]):r}function nr(r,i){var c=r.__data__;return fh(i)?c["string"==typeof i?"string":"hash"]:c.map}function gi(r){for(var i=V(r),c=i.length;c--;){var u=i[c],l=r[u];i[c]=[u,l,l==l&&!K(l)]}return i}function mt(r,i){var u=lf(r,i);return Xs(u)?u:c}function eh(r){var i=tD.call(r,tF),u=r[tF];try{r[tF]=c;var l=!0}catch{}var d=tP.call(r);return l&&(i?r[tF]=u:delete r[tF]),d}var r5=t6?function(r){return null==r?[]:jn(t6(r=tf(r)),function(i){return tM.call(r,i)})}:Hi,r3=t6?function(r){for(var i=[];r;)nt(i,r5(r)),r=tL(r);return i}:Hi,r2=en;function rh(r,i,c){for(var u=-1,l=c.length;++u<l;){var d=c[u],p=d.size;switch(d.type){case"drop":r+=p;break;case"dropRight":i-=p;break;case"take":i=rS(i,r+p);break;case"takeRight":r=rx(r,i-p)}}return{start:r,end:i}}function ih(r){var i=r.match(eJ);return i?i[1].split(eY):[]}function Ru(r,i,c){i=st(i,r);for(var u=-1,l=i.length,d=!1;++u<l;){var p=Wn(i[u]);if(!(d=null!=r&&c(r,p)))break;r=r[p]}return d||++u!=l?d:!!(l=null==r?0:r.length)&&ar(l)&&Zn(p,l)&&(iY(r)||iJ(r))}function sh(r){var i=r.length,c=new r.constructor(i);return i&&"string"==typeof r[0]&&tD.call(r,"index")&&(c.index=r.index,c.input=r.input),c}function bu(r){return"function"!=typeof r.constructor||he(r)?{}:rK(tL(r))}function uh(r,i,c){var u=r.constructor;switch(i){case em:return fi(r);case P:case C:return new u(+r);case eb:return Gc(r,c);case ew:case eE:case ex:case eS:case eD:case eI:case eO:case eP:case eC:return lu(r,c);case z:return new u;case J:case ep:return new u(r);case et:return zc(r);case eo:return new u;case e_:return Kc(r)}}function ah(r,i){var c=i.length;if(!c)return r;var u=c-1;return i[u]=(c>1?"& ":"")+i[u],i=i.join(c>2?", ":" "),r.replace(eG,`{
/* [wrapped with `+i+`] */
`)}function oh(r){return iY(r)||iJ(r)||!!(t$&&r&&r[t$])}function Zn(r,i){var c=typeof r;return!!(i=i??9007199254740991)&&("number"==c||"symbol"!=c&&e8.test(r))&&r>-1&&r%1==0&&r<i}function rn(r,i,c){if(!K(c))return!1;var u=typeof i;return("number"==u?!!(an(c)&&Zn(i,c.length)):"string"==u&&i in c)&&bn(c[i],r)}function _i(r,i){if(iY(r))return!1;var c=typeof r;return!!("number"==c||"symbol"==c||"boolean"==c||null==r||pn(r))||e$.test(r)||!eH.test(r)||null!=i&&r in tf(i)}function fh(r){var i=typeof r;return"string"==i||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==r:null===r}function mi(r){var i=je(r),c=a[i];if("function"!=typeof c||!(i in N.prototype))return!1;if(r===c)return!0;var u=r1(c);return!!u&&r===u[0]}function ch(r){return!!tO&&tO in r}(rC&&r2(new rC(new ArrayBuffer(1)))!=eb||rA&&r2(new rA)!=z||rR&&r2(rR.resolve())!=X||rN&&r2(new rN)!=eo||rT&&r2(new rT)!=ey)&&(r2=function(r){var i=en(r),u=i==Q?r.constructor:c,l=u?wt(u):"";if(l)switch(l){case rk:return eb;case rM:return z;case rq:return X;case rz:return eo;case rH:return ey}return i});var r6=tx?Jn:Ni;function he(r){var i=r&&r.constructor;return r===("function"==typeof i&&i.prototype||tE)}function Lu(r,i){return function(u){return null!=u&&u[r]===i&&(i!==c||r in tf(u))}}function lh(r){var i=sr(r,function(r){return 500===c.size&&c.clear(),r}),c=i.cache;return i}function ph(r,i){var c=r[1],u=i[1],l=c|u,p=l<131,g=128==u&&8==c||128==u&&256==c&&r[7].length<=i[8]||384==u&&i[7].length<=i[8]&&8==c;if(!(p||g))return r;1&u&&(r[2]=i[2],l|=1&c?0:4);var _=i[3];if(_){var w=r[3];r[3]=w?du(w,_,i[4]):_,r[4]=w?tt(r[3],d):i[4]}return(_=i[5])&&(w=r[5],r[5]=w?gu(w,_,i[6]):_,r[6]=w?tt(r[5],d):i[6]),(_=i[7])&&(r[7]=_),128&u&&(r[8]=null==r[8]?i[8]:rS(r[8],i[8])),null==r[9]&&(r[9]=i[9]),r[0]=i[0],r[1]=l,r}function dh(r){var i=[];if(null!=r)for(var c in tf(r))i.push(c);return i}function gh(r){return tP.call(r)}function Du(r,i,u){return i=rx(i===c?r.length-1:i,0),function(){for(var c=arguments,l=-1,d=rx(c.length-i,0),p=eQ(d);++l<d;)p[l]=c[i+l];l=-1;for(var g=eQ(i+1);++l<i;)g[l]=c[l];return g[i]=u(p),cn(r,this,g)}}function Hu(r,i){return i.length<2?r:_t(r,Cn(i,0,-1))}function vh(r,i){for(var u=r.length,l=rS(i.length,u),d=un(r);l--;){var p=i[l];r[l]=Zn(p,u)?d[p]:c}return r}function wi(r,i){if(!("constructor"===i&&"function"==typeof r[i])&&"__proto__"!=i)return r[i]}var r8=Uu(rY),r4=t1||function(r,i){return t0.setTimeout(r,i)},r9=Uu(rQ);function $u(r,i,c){var u=i+"";return r9(r,ah(u,_h(ih(u),c)))}function Uu(r){var i=0,u=0;return function(){var l=rD(),d=16-(l-u);if(u=l,d>0){if(++i>=800)return arguments[0]}else i=0;return r.apply(c,arguments)}}function tr(r,i){var u=-1,l=r.length,d=l-1;for(i=i===c?l:i;++u<i;){var p=ei(u,d),g=r[p];r[p]=r[u],r[u]=g}return r.length=i,r}var r7=lh(function(r){var i=[];return 46===r.charCodeAt(0)&&i.push(""),r.replace(eB,function(r,c,u,l){i.push(u?l.replace(eX,"$1"):c||r)}),i});function Wn(r){if("string"==typeof r||pn(r))return r;var i=r+"";return"0"==i&&1/r==-p?"-0":i}function wt(r){if(null!=r){try{return tS.call(r)}catch{}try{return r+""}catch{}}return""}function _h(r,i){return mn(_,function(c){var u="_."+c[0];i&c[1]&&!Ee(r,u)&&r.push(u)}),r.sort()}function Fu(r){if(r instanceof N)return r.clone();var i=new Pn(r.__wrapped__,r.__chain__);return i.__actions__=un(r.__actions__),i.__index__=r.__index__,i.__values__=r.__values__,i}function mh(r,i,u){i=(u?rn(r,i,u):i===c)?1:rx(R(i),0);var l=null==r?0:r.length;if(!l||i<1)return[];for(var d=0,p=0,g=eQ(t5(l/i));d<l;)g[p++]=Cn(r,d,d+=i);return g}function wh(r){for(var i=-1,c=null==r?0:r.length,u=0,l=[];++i<c;){var d=r[i];d&&(l[u++]=d)}return l}function Ph(){var r=arguments.length;if(!r)return[];for(var i=eQ(r-1),c=arguments[0],u=r;u--;)i[u-1]=arguments[u];return nt(iY(c)?un(c):[c],j(i,1))}var ir=T(function(r,i){return Z(r)?ue(r,j(i,1,Z,!0)):[]}),io=T(function(r,i){var u=In(i);return Z(u)&&(u=c),Z(r)?ue(r,j(i,1,Z,!0),x(u,2)):[]}),iu=T(function(r,i){var u=In(i);return Z(u)&&(u=c),Z(r)?ue(r,j(i,1,Z,!0),c,u):[]});function xh(r,i,u){var l=null==r?0:r.length;return l?Cn(r,(i=u||i===c?1:R(i))<0?0:i,l):[]}function Eh(r,i,u){var l=null==r?0:r.length;return l?Cn(r,0,(i=l-(i=u||i===c?1:R(i)))<0?0:i):[]}function yh(r,i){return r&&r.length?Ze(r,x(i,3),!0,!0):[]}function Sh(r,i){return r&&r.length?Ze(r,x(i,3),!0):[]}function Oh(r,i,c,u){var l=null==r?0:r.length;return l?(c&&"number"!=typeof c&&rn(r,i,c)&&(c=0,u=l),Pc(r,i,c,u)):[]}function Mu(r,i,c){var u=null==r?0:r.length;if(!u)return -1;var l=null==c?0:R(c);return l<0&&(l=rx(u+l,0)),ye(r,x(i,3),l)}function qu(r,i,u){var l=null==r?0:r.length;if(!l)return -1;var d=l-1;return u!==c&&(d=R(u),d=u<0?rx(l+d,0):rS(d,l-1)),ye(r,x(i,3),d,!0)}function Bu(r){return(null==r?0:r.length)?j(r,1):[]}function Rh(r){return(null==r?0:r.length)?j(r,p):[]}function bh(r,i){return(null==r?0:r.length)?j(r,i=i===c?1:R(i)):[]}function Th(r){for(var i=-1,c=null==r?0:r.length,u={};++i<c;){var l=r[i];u[l[0]]=l[1]}return u}function Gu(r){return r&&r.length?r[0]:c}function Lh(r,i,c){var u=null==r?0:r.length;if(!u)return -1;var l=null==c?0:R(c);return l<0&&(l=rx(u+l,0)),Tt(r,i,l)}function Dh(r){return(null==r?0:r.length)?Cn(r,0,-1):[]}var id=T(function(r){var i=G(r,ai);return i.length&&i[0]===r[0]?Vr(i):[]}),ig=T(function(r){var i=In(r),u=G(r,ai);return i===In(u)?i=c:u.pop(),u.length&&u[0]===r[0]?Vr(u,x(i,2)):[]}),i_=T(function(r){var i=In(r),u=G(r,ai);return(i="function"==typeof i?i:c)&&u.pop(),u.length&&u[0]===r[0]?Vr(u,c,i):[]});function Uh(r,i){return null==r?"":rw.call(r,i)}function In(r){var i=null==r?0:r.length;return i?r[i-1]:c}function Wh(r,i,u){var l=null==r?0:r.length;if(!l)return -1;var d=l;return u!==c&&(d=(d=R(u))<0?rx(l+d,0):rS(d,l-1)),i==i?_f(r,i,d):ye(r,Is,d,!0)}function Fh(r,i){return r&&r.length?nu(r,R(i)):c}var iy=T(zu);function zu(r,i){return r&&r.length&&i&&i.length?ti(r,i):r}function qh(r,i,c){return r&&r.length&&i&&i.length?ti(r,i,x(c,2)):r}function Bh(r,i,u){return r&&r.length&&i&&i.length?ti(r,i,c,u):r}var im=Yn(function(r,i){var c=null==r?0:r.length,u=Zr(r,i);return ru(r,G(i,function(r){return Zn(r,c)?+r:r}).sort(pu)),u});function zh(r,i){var c=[];if(!(r&&r.length))return c;var u=-1,l=[],d=r.length;for(i=x(i,3);++u<d;){var p=r[u];i(p,u,r)&&(c.push(p),l.push(u))}return ru(r,l),c}function Ai(r){return null==r?r:rP.call(r)}function Kh(r,i,u){var l=null==r?0:r.length;return l?(u&&"number"!=typeof u&&rn(r,i,u)?(i=0,u=l):(i=null==i?0:R(i),u=u===c?l:R(u)),Cn(r,i,u)):[]}function Yh(r,i){return Ye(r,i)}function Zh(r,i,c){return ii(r,i,x(c,2))}function Jh(r,i){var c=null==r?0:r.length;if(c){var u=Ye(r,i);if(u<c&&bn(r[u],i))return u}return -1}function Xh(r,i){return Ye(r,i,!0)}function Qh(r,i,c){return ii(r,i,x(c,2),!0)}function Vh(r,i){if(null==r?0:r.length){var c=Ye(r,i,!0)-1;if(bn(r[c],i))return c}return -1}function kh(r){return r&&r.length?su(r):[]}function jh(r,i){return r&&r.length?su(r,x(i,2)):[]}function nl(r){var i=null==r?0:r.length;return i?Cn(r,1,i):[]}function tl(r,i,u){return r&&r.length?Cn(r,0,(i=u||i===c?1:R(i))<0?0:i):[]}function el(r,i,u){var l=null==r?0:r.length;return l?Cn(r,(i=l-(i=u||i===c?1:R(i)))<0?0:i,l):[]}function rl(r,i){return r&&r.length?Ze(r,x(i,3),!1,!0):[]}function il(r,i){return r&&r.length?Ze(r,x(i,3)):[]}var ib=T(function(r){return it(j(r,1,Z,!0))}),iw=T(function(r){var i=In(r);return Z(i)&&(i=c),it(j(r,1,Z,!0),x(i,2))}),iE=T(function(r){var i=In(r);return i="function"==typeof i?i:c,it(j(r,1,Z,!0),c,i)});function ol(r){return r&&r.length?it(r):[]}function fl(r,i){return r&&r.length?it(r,x(i,2)):[]}function cl(r,i){return i="function"==typeof i?i:c,r&&r.length?it(r,c,i):[]}function Ci(r){if(!(r&&r.length))return[];var i=0;return r=jn(r,function(r){if(Z(r))return i=rx(r.length,i),!0}),Fr(i,function(i){return G(r,$r(i))})}function Ku(r,i){if(!(r&&r.length))return[];var u=Ci(r);return null==i?u:G(u,function(r){return cn(i,c,r)})}var ix=T(function(r,i){return Z(r)?ue(r,i):[]}),iS=T(function(r){return ui(jn(r,Z))}),iD=T(function(r){var i=In(r);return Z(i)&&(i=c),ui(jn(r,Z),x(i,2))}),iI=T(function(r){var i=In(r);return i="function"==typeof i?i:c,ui(jn(r,Z),c,i)}),iO=T(Ci);function vl(r,i){return fu(r||[],i||[],se)}function _l(r,i){return fu(r||[],i||[],fe)}var iP=T(function(r){var i=r.length,u=i>1?r[i-1]:c;return u="function"==typeof u?(r.pop(),u):c,Ku(r,u)});function Yu(r){var i=a(r);return i.__chain__=!0,i}function wl(r,i){return i(r),r}function er(r,i){return i(r)}var iC=Yn(function(r){var i=r.length,u=i?r[0]:0,l=this.__wrapped__,s=function(i){return Zr(i,r)};return!(i>1)&&!this.__actions__.length&&l instanceof N&&Zn(u)?((l=l.slice(u,+u+(i?1:0))).__actions__.push({func:er,args:[s],thisArg:c}),new Pn(l,this.__chain__).thru(function(r){return i&&!r.length&&r.push(c),r})):this.thru(s)});function Al(){return Yu(this)}function Cl(){return new Pn(this.value(),this.__chain__)}function Il(){this.__values__===c&&(this.__values__=ua(this.value()));var r=this.__index__>=this.__values__.length,i=r?c:this.__values__[this.__index__++];return{done:r,value:i}}function xl(){return this}function El(r){for(var i,u=this;u instanceof qe;){var l=Fu(u);l.__index__=0,l.__values__=c,i?d.__wrapped__=l:i=l;var d=l;u=u.__wrapped__}return d.__wrapped__=r,i}function yl(){var r=this.__wrapped__;if(r instanceof N){var i=r;return this.__actions__.length&&(i=new N(this)),(i=i.reverse()).__actions__.push({func:er,args:[Ai],thisArg:c}),new Pn(i,this.__chain__)}return this.thru(Ai)}function Sl(){return ou(this.__wrapped__,this.__actions__)}var iA=Je(function(r,i,c){tD.call(r,c)?++r[c]:zn(r,c,1)});function Rl(r,i,u){var l=iY(r)?As:wc;return u&&rn(r,i,u)&&(i=c),l(r,x(i,3))}function bl(r,i){return(iY(r)?jn:Ks)(r,x(i,3))}var iR=wu(Mu),iN=wu(qu);function Dl(r,i){return j(rr(r,i),1)}function Hl(r,i){return j(rr(r,i),p)}function Nl(r,i,u){return u=u===c?1:R(u),j(rr(r,i),u)}function Zu(r,i){return(iY(r)?mn:rV)(r,x(i,3))}function Ju(r,i){return(iY(r)?jo:rW)(r,x(i,3))}var iT=Je(function(r,i,c){tD.call(r,c)?r[c].push(i):zn(r,c,[i])});function Ul(r,i,c,u){r=an(r)?r:Gt(r),c=c&&!u?R(c):0;var l=r.length;return c<0&&(c=rx(l+c,0)),or(r)?c<=l&&r.indexOf(i,c)>-1:!!l&&Tt(r,i,c)>-1}var ij=T(function(r,i,c){var u=-1,l="function"==typeof i,d=an(r)?eQ(r.length):[];return rV(r,function(r){d[++u]=l?cn(i,r,c):ae(r,i,c)}),d}),iU=Je(function(r,i,c){zn(r,c,i)});function rr(r,i){return(iY(r)?G:Vs)(r,x(i,3))}function Ml(r,i,u,l){return null==r?[]:(iY(i)||(i=null==i?[]:[i]),iY(u=l?c:u)||(u=null==u?[]:[u]),tu(r,i,u))}var iL=Je(function(r,i,c){r[c?0:1].push(i)},function(){return[[],[]]});function Bl(r,i,c){var u=iY(r)?Hr:Es,l=arguments.length<3;return u(r,x(i,4),c,l,rV)}function Gl(r,i,c){var u=iY(r)?nf:Es,l=arguments.length<3;return u(r,x(i,4),c,l,rW)}function zl(r,i){return(iY(r)?jn:Ks)(r,ur(x(i,3)))}function Kl(r){return(iY(r)?Ms:Uc)(r)}function Yl(r,i,u){return i=(u?rn(r,i,u):i===c)?1:R(i),(iY(r)?dc:Wc)(r,i)}function Zl(r){return(iY(r)?gc:Mc)(r)}function Jl(r){if(null==r)return 0;if(an(r))return or(r)?Dt(r):r.length;var i=r2(r);return i==z||i==eo?r.size:jr(r).length}function Xl(r,i,u){var l=iY(r)?Nr:qc;return u&&rn(r,i,u)&&(i=c),l(r,x(i,3))}var ik=T(function(r,i){if(null==r)return[];var c=i.length;return c>1&&rn(r,i[0],i[1])?i=[]:c>2&&rn(i[0],i[1],i[2])&&(i=[i[0]]),tu(r,j(i,1),[])}),iM=tX||function(){return t0.Date.now()};function Vl(r,i){if("function"!=typeof i)throw new tm(u);return r=R(r),function(){if(--r<1)return i.apply(this,arguments)}}function Xu(r,i,u){return i=u?c:i,i=r&&null==i?r.length:i,Kn(r,128,c,c,c,c,i)}function Qu(r,i){var l;if("function"!=typeof i)throw new tm(u);return r=R(r),function(){return--r>0&&(l=i.apply(this,arguments)),r<=1&&(i=c),l}}var iq=T(function(r,i,c){var u=1;if(c.length){var l=tt(c,qt(iq));u|=32}return Kn(r,u,i,c,l)}),iz=T(function(r,i,c){var u=3;if(c.length){var l=tt(c,qt(iz));u|=32}return Kn(i,u,r,c,l)});function ku(r,i,u){i=u?c:i;var l=Kn(r,8,c,c,c,c,c,i);return l.placeholder=ku.placeholder,l}function ju(r,i,u){i=u?c:i;var l=Kn(r,16,c,c,c,c,c,i);return l.placeholder=ju.placeholder,l}function na(r,i,l){var d,p,g,_,w,S,P=0,C=!1,L=!1,k=!0;if("function"!=typeof r)throw new tm(u);function I(i){var u=d,l=p;return d=p=c,P=i,_=r.apply(l,u)}function E(r){return P=r,w=r4(H,i),C?I(r):_}function b(r){var c=r-S,u=r-P,l=i-c;return L?rS(l,g-u):l}function y(r){var u=r-S,l=r-P;return S===c||u>=i||u<0||L&&l>=g}function H(){var r=iM();if(y(r))return $(r);w=r4(H,b(r))}function $(r){return w=c,k&&d?I(r):(d=p=c,_)}function dn(){w!==c&&rX(w),P=0,d=S=p=w=c}function sn(){return w===c?_:$(iM())}function gn(){var r=iM(),u=y(r);if(d=arguments,p=this,S=r,u){if(w===c)return E(S);if(L)return rX(w),w=r4(H,i),I(S)}return w===c&&(w=r4(H,i)),_}return i=xn(i)||0,K(l)&&(C=!!l.leading,g=(L="maxWait"in l)?rx(xn(l.maxWait)||0,i):g,k="trailing"in l?!!l.trailing:k),gn.cancel=dn,gn.flush=sn,gn}var iH=T(function(r,i){return Gs(r,1,i)}),i$=T(function(r,i,c){return Gs(r,xn(i)||0,c)});function np(r){return Kn(r,512)}function sr(r,i){if("function"!=typeof r||null!=i&&"function"!=typeof i)throw new tm(u);var e=function(){var c=arguments,u=i?i.apply(this,c):c[0],l=e.cache;if(l.has(u))return l.get(u);var d=r.apply(this,c);return e.cache=l.set(u,d)||l,d};return e.cache=new(sr.Cache||Gn),e}function ur(r){if("function"!=typeof r)throw new tm(u);return function(){var i=arguments;switch(i.length){case 0:return!r.call(this);case 1:return!r.call(this,i[0]);case 2:return!r.call(this,i[0],i[1]);case 3:return!r.call(this,i[0],i[1],i[2])}return!r.apply(this,i)}}function tp(r){return Qu(2,r)}sr.Cache=Gn;var iB=rZ(function(r,i){var c=(i=1==i.length&&iY(i[0])?G(i[0],hn(x())):G(j(i,1),hn(x()))).length;return T(function(u){for(var l=-1,d=rS(u.length,c);++l<d;)u[l]=i[l].call(this,u[l]);return cn(r,this,u)})}),iF=T(function(r,i){var u=tt(i,qt(iF));return Kn(r,32,c,i,u)}),iK=T(function(r,i){var u=tt(i,qt(iK));return Kn(r,64,c,i,u)}),iV=Yn(function(r,i){return Kn(r,256,c,c,c,i)});function ip(r,i){if("function"!=typeof r)throw new tm(u);return T(r,i=i===c?i:R(i))}function sp(r,i){if("function"!=typeof r)throw new tm(u);return i=null==i?0:rx(R(i),0),T(function(c){var u=c[i],l=ut(c,0,i);return u&&nt(l,u),cn(r,this,l)})}function up(r,i,c){var l=!0,d=!0;if("function"!=typeof r)throw new tm(u);return K(c)&&(l="leading"in c?!!c.leading:l,d="trailing"in c?!!c.trailing:d),na(r,i,{leading:l,maxWait:i,trailing:d})}function ap(r){return Xu(r,1)}function op(r,i){return iF(oi(i),r)}function fp(){if(!arguments.length)return[];var r=arguments[0];return iY(r)?r:[r]}function cp(r){return An(r,4)}function hp(r,i){return An(r,4,i="function"==typeof i?i:c)}function lp(r){return An(r,5)}function pp(r,i){return An(r,5,i="function"==typeof i?i:c)}function dp(r,i){return null==i||Bs(r,i,V(i))}function bn(r,i){return r===i||r!=r&&i!=i}var iW=ke(Qr),iG=ke(function(r,i){return r>=i}),iJ=Js(function(){return arguments}())?Js:function(r){return Y(r)&&tD.call(r,"callee")&&!tM.call(r,"callee")},iY=eQ.isArray,iQ=t8?hn(t8):Ec;function an(r){return null!=r&&ar(r.length)&&!Jn(r)}function Z(r){return Y(r)&&an(r)}function mp(r){return!0===r||!1===r||Y(r)&&en(r)==P}var iZ=rp||Ni,iX=t4?hn(t4):yc;function Pp(r){return Y(r)&&1===r.nodeType&&!pe(r)}function Ap(r){if(null==r)return!0;if(an(r)&&(iY(r)||"string"==typeof r||"function"==typeof r.splice||iZ(r)||i3(r)||iJ(r)))return!r.length;var i=r2(r);if(i==z||i==eo)return!r.size;if(he(r))return!jr(r).length;for(var c in r)if(tD.call(r,c))return!1;return!0}function Cp(r,i){return oe(r,i)}function Ip(r,i,u){var l=(u="function"==typeof u?u:c)?u(r,i):c;return l===c?oe(r,i,c,u):!!l}function Ei(r){if(!Y(r))return!1;var i=en(r);return i==L||"[object DOMException]"==i||"string"==typeof r.message&&"string"==typeof r.name&&!pe(r)}function xp(r){return"number"==typeof r&&rb(r)}function Jn(r){if(!K(r))return!1;var i=en(r);return i==k||i==q||"[object AsyncFunction]"==i||"[object Proxy]"==i}function ea(r){return"number"==typeof r&&r==R(r)}function ar(r){return"number"==typeof r&&r>-1&&r%1==0&&r<=9007199254740991}function K(r){var i=typeof r;return null!=r&&("object"==i||"function"==i)}function Y(r){return null!=r&&"object"==typeof r}var i0=t9?hn(t9):Oc;function Ep(r,i){return r===i||kr(r,i,gi(i))}function yp(r,i,u){return u="function"==typeof u?u:c,kr(r,i,gi(i),u)}function Sp(r){return ia(r)&&r!=+r}function Op(r){if(r6(r))throw new to("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Xs(r)}function Rp(r){return null===r}function bp(r){return null==r}function ia(r){return"number"==typeof r||Y(r)&&en(r)==J}function pe(r){if(!Y(r)||en(r)!=Q)return!1;var i=tL(r);if(null===i)return!0;var c=tD.call(i,"constructor")&&i.constructor;return"function"==typeof c&&c instanceof c&&tS.call(c)==tC}var i1=t7?hn(t7):Rc;function Tp(r){return ea(r)&&r>=-9007199254740991&&r<=9007199254740991}var i5=ro?hn(ro):bc;function or(r){return"string"==typeof r||!iY(r)&&Y(r)&&en(r)==ep}function pn(r){return"symbol"==typeof r||Y(r)&&en(r)==e_}var i3=ra?hn(ra):Tc;function Lp(r){return r===c}function Dp(r){return Y(r)&&r2(r)==ey}function Hp(r){return Y(r)&&"[object WeakSet]"==en(r)}var i2=ke(ni),i6=ke(function(r,i){return r<=i});function ua(r){if(!r)return[];if(an(r))return or(r)?On(r):un(r);if(tB&&r[tB])return df(r[tB]());var i=r2(r);return(i==z?qr:i==eo?Se:Gt)(r)}function Xn(r){return r?(r=xn(r))===p||r===-p?(r<0?-1:1)*17976931348623157e292:r==r?r:0:0===r?r:0}function R(r){var i=Xn(r),c=i%1;return i==i?c?i-c:i:0}function aa(r){return r?vt(R(r),0,4294967295):0}function xn(r){if("number"==typeof r)return r;if(pn(r))return g;if(K(r)){var i="function"==typeof r.valueOf?r.valueOf():r;r=K(i)?i+"":i}if("string"!=typeof r)return 0===r?r:+r;r=ys(r);var c=e3.test(r);return c||e6.test(r)?tQ(r.slice(2),c?2:8):e5.test(r)?g:+r}function oa(r){return Un(r,on(r))}function Up(r){return r?vt(R(r),-9007199254740991,9007199254740991):0===r?r:0}function W(r){return null==r?"":ln(r)}var i8=Ft(function(r,i){if(he(i)||an(i)){Un(i,V(i),r);return}for(var c in i)tD.call(i,c)&&se(r,c,i[c])}),i4=Ft(function(r,i){Un(i,on(i),r)}),i9=Ft(function(r,i,c,u){Un(i,on(i),r,u)}),i7=Ft(function(r,i,c,u){Un(i,V(i),r,u)}),ne=Yn(Zr);function qp(r,i){var c=rK(r);return null==i?c:qs(c,i)}var nn=T(function(r,i){r=tf(r);var u=-1,l=i.length,d=l>2?i[2]:c;for(d&&rn(i[0],i[1],d)&&(l=1);++u<l;)for(var p=i[u],g=on(p),_=-1,w=g.length;++_<w;){var S=g[_],P=r[S];(P===c||bn(P,tE[S])&&!tD.call(r,S))&&(r[S]=p[S])}return r}),ns=T(function(r){return r.push(c,yu),cn(ny,c,r)});function zp(r,i){return Cs(r,x(i,3),$n)}function Kp(r,i){return Cs(r,x(i,3),Xr)}function Yp(r,i){return null==r?r:rG(r,x(i,3),on)}function Zp(r,i){return null==r?r:rJ(r,x(i,3),on)}function Jp(r,i){return r&&$n(r,x(i,3))}function Xp(r,i){return r&&Xr(r,x(i,3))}function Qp(r){return null==r?[]:ze(r,V(r))}function Vp(r){return null==r?[]:ze(r,on(r))}function Si(r,i,u){var l=null==r?c:_t(r,i);return l===c?u:l}function kp(r,i){return null!=r&&Ru(r,i,Ac)}function Oi(r,i){return null!=r&&Ru(r,i,Cc)}var no=Au(function(r,i,c){null!=i&&"function"!=typeof i.toString&&(i=tP.call(i)),r[i]=c},bi(fn)),nd=Au(function(r,i,c){null!=i&&"function"!=typeof i.toString&&(i=tP.call(i)),tD.call(r,i)?r[i].push(c):r[i]=[c]},x),ng=T(ae);function V(r){return an(r)?Fs(r):jr(r)}function on(r){return an(r)?Fs(r,!0):Lc(r)}function ed(r,i){var c={};return i=x(i,3),$n(r,function(r,u,l){zn(c,i(r,u,l),r)}),c}function rd(r,i){var c={};return i=x(i,3),$n(r,function(r,u,l){zn(c,u,i(r,u,l))}),c}var n_=Ft(function(r,i,c){Ke(r,i,c)}),ny=Ft(function(r,i,c,u){Ke(r,i,c,u)}),nm=Yn(function(r,i){var c={};if(null==r)return c;var u=!1;i=G(i,function(i){return i=st(i,r),u||(u=i.length>1),i}),Un(r,pi(r),c),u&&(c=An(c,7,jc));for(var l=i.length;l--;)si(c,i[l]);return c});function ud(r,i){return ha(r,ur(x(i)))}var nb=Yn(function(r,i){return null==r?{}:Hc(r,i)});function ha(r,i){if(null==r)return{};var c=G(pi(r),function(r){return[r]});return i=x(i),eu(r,c,function(r,c){return i(r,c[0])})}function od(r,i,u){i=st(i,r);var l=-1,d=i.length;for(d||(d=1,r=c);++l<d;){var p=null==r?c:r[Wn(i[l])];p===c&&(l=d,p=u),r=Jn(p)?p.call(r):p}return r}function fd(r,i,c){return null==r?r:fe(r,i,c)}function cd(r,i,u,l){return l="function"==typeof l?l:c,null==r?r:fe(r,i,u,l)}var nw=xu(V),nE=xu(on);function hd(r,i,c){var u=iY(r),l=u||iZ(r)||i3(r);if(i=x(i,4),null==c){var d=r&&r.constructor;c=l?u?new d:[]:K(r)&&Jn(d)?rK(tL(r)):{}}return(l?mn:$n)(r,function(r,u,l){return i(c,r,u,l)}),c}function ld(r,i){return null==r||si(r,i)}function pd(r,i,c){return null==r?r:au(r,i,oi(c))}function dd(r,i,u,l){return l="function"==typeof l?l:c,null==r?r:au(r,i,oi(u),l)}function Gt(r){return null==r?[]:Mr(r,V(r))}function gd(r){return null==r?[]:Mr(r,on(r))}function vd(r,i,u){return u===c&&(u=i,i=c),u!==c&&(u=(u=xn(u))==u?u:0),i!==c&&(i=(i=xn(i))==i?i:0),vt(xn(r),i,u)}function _d(r,i,u){return i=Xn(i),u===c?(u=i,i=0):u=Xn(u),Ic(r=xn(r),i,u)}function md(r,i,u){if(u&&"boolean"!=typeof u&&rn(r,i,u)&&(i=u=c),u===c&&("boolean"==typeof i?(u=i,i=c):"boolean"==typeof r&&(u=r,r=c)),r===c&&i===c?(r=0,i=1):(r=Xn(r),i===c?(i=r,r=0):i=Xn(i)),r>i){var l=r;r=i,i=l}if(u||r%1||i%1){var d=rO();return rS(r+d*(i-r+tY("1e-"+((d+"").length-1))),i)}return ei(r,i)}var nx=Mt(function(r,i,c){return i=i.toLowerCase(),r+(c?da(i):i)});function da(r){return nA(W(r).toLowerCase())}function ga(r){return(r=W(r))&&r.replace(e4,rg).replace(tz,"")}function Pd(r,i,u){r=W(r),i=ln(i);var l=r.length,d=u=u===c?l:vt(R(u),0,l);return(u-=i.length)>=0&&r.slice(u,d)==i}function Ad(r){return(r=W(r))&&eL.test(r)?r.replace(ej,r_):r}function Cd(r){return(r=W(r))&&eK.test(r)?r.replace(eF,"\\$&"):r}var nS=Mt(function(r,i,c){return r+(c?"-":"")+i.toLowerCase()}),nD=Mt(function(r,i,c){return r+(c?" ":"")+i.toLowerCase()}),nI=mu("toLowerCase");function yd(r,i,c){r=W(r);var u=(i=R(i))?Dt(r):0;if(!i||u>=i)return r;var l=(i-u)/2;return Ve(t2(l),c)+r+Ve(t5(l),c)}function Sd(r,i,c){r=W(r);var u=(i=R(i))?Dt(r):0;return i&&u<i?r+Ve(i-u,c):r}function Od(r,i,c){r=W(r);var u=(i=R(i))?Dt(r):0;return i&&u<i?Ve(i-u,c)+r:r}function Rd(r,i,c){return c||null==i?i=0:i&&(i=+i),rI(W(r).replace(eV,""),i||0)}function bd(r,i,u){return i=(u?rn(r,i,u):i===c)?1:R(i),ri(W(r),i)}function Td(){var r=arguments,i=W(r[0]);return r.length<3?i:i.replace(r[1],r[2])}var nO=Mt(function(r,i,c){return r+(c?"_":"")+i.toLowerCase()});function Dd(r,i,u){return u&&"number"!=typeof u&&rn(r,i,u)&&(i=u=c),(u=u===c?4294967295:u>>>0)?(r=W(r))&&("string"==typeof i||null!=i&&!i1(i))&&!(i=ln(i))&&Lt(r)?ut(On(r),0,u):r.split(i,u):[]}var nP=Mt(function(r,i,c){return r+(c?" ":"")+nA(i)});function Nd(r,i,c){return r=W(r),c=null==c?0:vt(R(c),0,r.length),i=ln(i),r.slice(c,c+i.length)==i}function $d(r,i,u){var l=a.templateSettings;u&&rn(r,i,u)&&(i=c),r=W(r),i=i9({},i,l,Eu);var d,p,g=i9({},i.imports,l.imports,Eu),_=V(g),w=Mr(g,_),S=0,P=i.interpolate||e9,C="__p += '",L=t_((i.escape||e9).source+"|"+P.source+"|"+(P===ez?e0:e9).source+"|"+(i.evaluate||e9).source+"|$","g"),k="//# sourceURL="+(tD.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++tV+"]")+`
`;r.replace(L,function(i,c,u,l,g,_){return u||(u=l),C+=r.slice(S,_).replace(e7,hf),c&&(d=!0,C+=`' +
__e(`+c+`) +
'`),g&&(p=!0,C+=`';
`+g+`;
__p += '`),u&&(C+=`' +
((__t = (`+u+`)) == null ? '' : __t) +
'`),S=_+i.length,i}),C+=`';
`;var q=tD.call(i,"variable")&&i.variable;if(q){if(eZ.test(q))throw new to("Invalid `variable` option passed into `_.template`")}else C=`with (obj) {
`+C+`
}
`;C=(p?C.replace(eA,""):C).replace(eR,"$1").replace(eN,"$1;"),C="function("+(q||"obj")+`) {
`+(q?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(d?", __e = _.escape":"")+(p?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+C+`return __p
}`;var z=nR(function(){return ta(_,k+"return "+C).apply(c,w)});if(z.source=C,Ei(z))throw z;return z}function Ud(r){return W(r).toLowerCase()}function Wd(r){return W(r).toUpperCase()}function Fd(r,i,u){if((r=W(r))&&(u||i===c))return ys(r);if(!r||!(i=ln(i)))return r;var l=On(r),d=On(i),p=Ss(l,d),g=Os(l,d)+1;return ut(l,p,g).join("")}function Md(r,i,u){if((r=W(r))&&(u||i===c))return r.slice(0,bs(r)+1);if(!r||!(i=ln(i)))return r;var l=On(r),d=Os(l,On(i))+1;return ut(l,0,d).join("")}function qd(r,i,u){if((r=W(r))&&(u||i===c))return r.replace(eV,"");if(!r||!(i=ln(i)))return r;var l=On(r),d=Ss(l,On(i));return ut(l,d).join("")}function Bd(r,i){var u=30,l="...";if(K(i)){var d="separator"in i?i.separator:d;u="length"in i?R(i.length):u,l="omission"in i?ln(i.omission):l}var p=(r=W(r)).length;if(Lt(r)){var g=On(r);p=g.length}if(u>=p)return r;var _=u-Dt(l);if(_<1)return l;var w=g?ut(g,0,_).join(""):r.slice(0,_);if(d===c)return w+l;if(g&&(_+=w.length-_),i1(d)){if(r.slice(_).search(d)){var S,P=w;for(d.global||(d=t_(d.source,W(e1.exec(d))+"g")),d.lastIndex=0;S=d.exec(P);)var C=S.index;w=w.slice(0,C===c?_:C)}}else if(r.indexOf(ln(d),_)!=_){var L=w.lastIndexOf(d);L>-1&&(w=w.slice(0,L))}return w+l}function Gd(r){return(r=W(r))&&eU.test(r)?r.replace(eT,ry):r}var nC=Mt(function(r,i,c){return r+(c?" ":"")+i.toUpperCase()}),nA=mu("toUpperCase");function va(r,i,u){return r=W(r),(i=u?c:i)===c?pf(r)?Af(r):rf(r):r.match(i)||[]}var nR=T(function(r,i){try{return cn(r,c,i)}catch(r){return Ei(r)?r:new to(r)}}),nN=Yn(function(r,i){return mn(i,function(i){zn(r,i=Wn(i),iq(r[i],r))}),r});function Yd(r){var i=null==r?0:r.length,c=x();return r=i?G(r,function(r){if("function"!=typeof r[1])throw new tm(u);return[c(r[0]),r[1]]}):[],T(function(c){for(var u=-1;++u<i;){var l=r[u];if(cn(l[0],this,c))return cn(l[1],this,c)}})}function Zd(r){return mc(An(r,1))}function bi(r){return function(){return r}}function Jd(r,i){return null==r||r!=r?i:r}var nT=Pu(),nj=Pu(!0);function fn(r){return r}function Ti(r){return Qs("function"==typeof r?r:An(r,1))}function Vd(r){return ks(An(r,1))}function kd(r,i){return js(r,An(i,1))}var nU=T(function(r,i){return function(c){return ae(c,r,i)}}),nL=T(function(r,i){return function(c){return ae(r,c,i)}});function Li(r,i,c){var u=V(i),l=ze(i,u);null!=c||K(i)&&(l.length||!u.length)||(c=i,i=r,r=this,l=ze(i,V(i)));var d=!(K(c)&&"chain"in c)||!!c.chain,p=Jn(r);return mn(l,function(c){var u=i[c];r[c]=u,p&&(r.prototype[c]=function(){var i=this.__chain__;if(d||i){var c=r(this.__wrapped__);return(c.__actions__=un(this.__actions__)).push({func:u,args:arguments,thisArg:r}),c.__chain__=i,c}return u.apply(r,nt([this.value()],arguments))})}),r}function tg(){return t0._===this&&(t0._=tA),this}function Di(){}function eg(r){return r=R(r),T(function(i){return nu(i,r)})}var nk=ci(G),nM=ci(As),nq=ci(Nr);function ma(r){return _i(r)?$r(Wn(r)):Nc(r)}function ug(r){return function(i){return null==r?c:_t(r,i)}}var nz=Cu(),nH=Cu(!0);function Hi(){return[]}function Ni(){return!1}function fg(){return{}}function cg(){return""}function hg(){return!0}function lg(r,i){if((r=R(r))<1||r>9007199254740991)return[];var c=4294967295,u=rS(r,4294967295);i=x(i),r-=4294967295;for(var l=Fr(u,i);++c<r;)i(c);return l}function pg(r){return iY(r)?G(r,Wn):pn(r)?[r]:un(r7(W(r)))}function dg(r){var i=++tI;return W(r)+i}var n$=Qe(function(r,i){return r+i},0),nB=hi("ceil"),nF=Qe(function(r,i){return r/i},1),nK=hi("floor");function wg(r){return r&&r.length?Ge(r,fn,Qr):c}function Pg(r,i){return r&&r.length?Ge(r,x(i,2),Qr):c}function Ag(r){return xs(r,fn)}function Cg(r,i){return xs(r,x(i,2))}function Ig(r){return r&&r.length?Ge(r,fn,ni):c}function xg(r,i){return r&&r.length?Ge(r,x(i,2),ni):c}var nV=Qe(function(r,i){return r*i},1),nW=hi("round"),nG=Qe(function(r,i){return r-i},0);function Og(r){return r&&r.length?Wr(r,fn):0}function Rg(r,i){return r&&r.length?Wr(r,x(i,2)):0}return a.after=Vl,a.ary=Xu,a.assign=i8,a.assignIn=i4,a.assignInWith=i9,a.assignWith=i7,a.at=ne,a.before=Qu,a.bind=iq,a.bindAll=nN,a.bindKey=iz,a.castArray=fp,a.chain=Yu,a.chunk=mh,a.compact=wh,a.concat=Ph,a.cond=Yd,a.conforms=Zd,a.constant=bi,a.countBy=iA,a.create=qp,a.curry=ku,a.curryRight=ju,a.debounce=na,a.defaults=nn,a.defaultsDeep=ns,a.defer=iH,a.delay=i$,a.difference=ir,a.differenceBy=io,a.differenceWith=iu,a.drop=xh,a.dropRight=Eh,a.dropRightWhile=yh,a.dropWhile=Sh,a.fill=Oh,a.filter=bl,a.flatMap=Dl,a.flatMapDeep=Hl,a.flatMapDepth=Nl,a.flatten=Bu,a.flattenDeep=Rh,a.flattenDepth=bh,a.flip=np,a.flow=nT,a.flowRight=nj,a.fromPairs=Th,a.functions=Qp,a.functionsIn=Vp,a.groupBy=iT,a.initial=Dh,a.intersection=id,a.intersectionBy=ig,a.intersectionWith=i_,a.invert=no,a.invertBy=nd,a.invokeMap=ij,a.iteratee=Ti,a.keyBy=iU,a.keys=V,a.keysIn=on,a.map=rr,a.mapKeys=ed,a.mapValues=rd,a.matches=Vd,a.matchesProperty=kd,a.memoize=sr,a.merge=n_,a.mergeWith=ny,a.method=nU,a.methodOf=nL,a.mixin=Li,a.negate=ur,a.nthArg=eg,a.omit=nm,a.omitBy=ud,a.once=tp,a.orderBy=Ml,a.over=nk,a.overArgs=iB,a.overEvery=nM,a.overSome=nq,a.partial=iF,a.partialRight=iK,a.partition=iL,a.pick=nb,a.pickBy=ha,a.property=ma,a.propertyOf=ug,a.pull=iy,a.pullAll=zu,a.pullAllBy=qh,a.pullAllWith=Bh,a.pullAt=im,a.range=nz,a.rangeRight=nH,a.rearg=iV,a.reject=zl,a.remove=zh,a.rest=ip,a.reverse=Ai,a.sampleSize=Yl,a.set=fd,a.setWith=cd,a.shuffle=Zl,a.slice=Kh,a.sortBy=ik,a.sortedUniq=kh,a.sortedUniqBy=jh,a.split=Dd,a.spread=sp,a.tail=nl,a.take=tl,a.takeRight=el,a.takeRightWhile=rl,a.takeWhile=il,a.tap=wl,a.throttle=up,a.thru=er,a.toArray=ua,a.toPairs=nw,a.toPairsIn=nE,a.toPath=pg,a.toPlainObject=oa,a.transform=hd,a.unary=ap,a.union=ib,a.unionBy=iw,a.unionWith=iE,a.uniq=ol,a.uniqBy=fl,a.uniqWith=cl,a.unset=ld,a.unzip=Ci,a.unzipWith=Ku,a.update=pd,a.updateWith=dd,a.values=Gt,a.valuesIn=gd,a.without=ix,a.words=va,a.wrap=op,a.xor=iS,a.xorBy=iD,a.xorWith=iI,a.zip=iO,a.zipObject=vl,a.zipObjectDeep=_l,a.zipWith=iP,a.entries=nw,a.entriesIn=nE,a.extend=i4,a.extendWith=i9,Li(a,a),a.add=n$,a.attempt=nR,a.camelCase=nx,a.capitalize=da,a.ceil=nB,a.clamp=vd,a.clone=cp,a.cloneDeep=lp,a.cloneDeepWith=pp,a.cloneWith=hp,a.conformsTo=dp,a.deburr=ga,a.defaultTo=Jd,a.divide=nF,a.endsWith=Pd,a.eq=bn,a.escape=Ad,a.escapeRegExp=Cd,a.every=Rl,a.find=iR,a.findIndex=Mu,a.findKey=zp,a.findLast=iN,a.findLastIndex=qu,a.findLastKey=Kp,a.floor=nK,a.forEach=Zu,a.forEachRight=Ju,a.forIn=Yp,a.forInRight=Zp,a.forOwn=Jp,a.forOwnRight=Xp,a.get=Si,a.gt=iW,a.gte=iG,a.has=kp,a.hasIn=Oi,a.head=Gu,a.identity=fn,a.includes=Ul,a.indexOf=Lh,a.inRange=_d,a.invoke=ng,a.isArguments=iJ,a.isArray=iY,a.isArrayBuffer=iQ,a.isArrayLike=an,a.isArrayLikeObject=Z,a.isBoolean=mp,a.isBuffer=iZ,a.isDate=iX,a.isElement=Pp,a.isEmpty=Ap,a.isEqual=Cp,a.isEqualWith=Ip,a.isError=Ei,a.isFinite=xp,a.isFunction=Jn,a.isInteger=ea,a.isLength=ar,a.isMap=i0,a.isMatch=Ep,a.isMatchWith=yp,a.isNaN=Sp,a.isNative=Op,a.isNil=bp,a.isNull=Rp,a.isNumber=ia,a.isObject=K,a.isObjectLike=Y,a.isPlainObject=pe,a.isRegExp=i1,a.isSafeInteger=Tp,a.isSet=i5,a.isString=or,a.isSymbol=pn,a.isTypedArray=i3,a.isUndefined=Lp,a.isWeakMap=Dp,a.isWeakSet=Hp,a.join=Uh,a.kebabCase=nS,a.last=In,a.lastIndexOf=Wh,a.lowerCase=nD,a.lowerFirst=nI,a.lt=i2,a.lte=i6,a.max=wg,a.maxBy=Pg,a.mean=Ag,a.meanBy=Cg,a.min=Ig,a.minBy=xg,a.stubArray=Hi,a.stubFalse=Ni,a.stubObject=fg,a.stubString=cg,a.stubTrue=hg,a.multiply=nV,a.nth=Fh,a.noConflict=tg,a.noop=Di,a.now=iM,a.pad=yd,a.padEnd=Sd,a.padStart=Od,a.parseInt=Rd,a.random=md,a.reduce=Bl,a.reduceRight=Gl,a.repeat=bd,a.replace=Td,a.result=od,a.round=nW,a.runInContext=h,a.sample=Kl,a.size=Jl,a.snakeCase=nO,a.some=Xl,a.sortedIndex=Yh,a.sortedIndexBy=Zh,a.sortedIndexOf=Jh,a.sortedLastIndex=Xh,a.sortedLastIndexBy=Qh,a.sortedLastIndexOf=Vh,a.startCase=nP,a.startsWith=Nd,a.subtract=nG,a.sum=Og,a.sumBy=Rg,a.template=$d,a.times=lg,a.toFinite=Xn,a.toInteger=R,a.toLength=aa,a.toLower=Ud,a.toNumber=xn,a.toSafeInteger=Up,a.toString=W,a.toUpper=Wd,a.trim=Fd,a.trimEnd=Md,a.trimStart=qd,a.truncate=Bd,a.unescape=Gd,a.uniqueId=dg,a.upperCase=nC,a.upperFirst=nA,a.each=Zu,a.eachRight=Ju,a.first=Gu,Li(a,(eW={},$n(a,function(r,i){tD.call(a.prototype,i)||(eW[i]=r)}),eW),{chain:!1}),a.VERSION="4.17.21",mn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){a[r].placeholder=a}),mn(["drop","take"],function(r,i){N.prototype[r]=function(u){u=u===c?1:rx(R(u),0);var l=this.__filtered__&&!i?new N(this):this.clone();return l.__filtered__?l.__takeCount__=rS(u,l.__takeCount__):l.__views__.push({size:rS(u,4294967295),type:r+(l.__dir__<0?"Right":"")}),l},N.prototype[r+"Right"]=function(i){return this.reverse()[r](i).reverse()}}),mn(["filter","map","takeWhile"],function(r,i){var c=i+1,u=1==c||3==c;N.prototype[r]=function(r){var i=this.clone();return i.__iteratees__.push({iteratee:x(r,3),type:c}),i.__filtered__=i.__filtered__||u,i}}),mn(["head","last"],function(r,i){var c="take"+(i?"Right":"");N.prototype[r]=function(){return this[c](1).value()[0]}}),mn(["initial","tail"],function(r,i){var c="drop"+(i?"":"Right");N.prototype[r]=function(){return this.__filtered__?new N(this):this[c](1)}}),N.prototype.compact=function(){return this.filter(fn)},N.prototype.find=function(r){return this.filter(r).head()},N.prototype.findLast=function(r){return this.reverse().find(r)},N.prototype.invokeMap=T(function(r,i){return"function"==typeof r?new N(this):this.map(function(c){return ae(c,r,i)})}),N.prototype.reject=function(r){return this.filter(ur(x(r)))},N.prototype.slice=function(r,i){r=R(r);var u=this;return u.__filtered__&&(r>0||i<0)?new N(u):(r<0?u=u.takeRight(-r):r&&(u=u.drop(r)),i!==c&&(u=(i=R(i))<0?u.dropRight(-i):u.take(i-r)),u)},N.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},N.prototype.toArray=function(){return this.take(4294967295)},$n(N.prototype,function(r,i){var u=/^(?:filter|find|map|reject)|While$/.test(i),l=/^(?:head|last)$/.test(i),d=a[l?"take"+("last"==i?"Right":""):i],p=l||/^find/.test(i);d&&(a.prototype[i]=function(){var i=this.__wrapped__,g=l?[1]:arguments,_=i instanceof N,w=g[0],S=_||iY(i),m=function(r){var i=d.apply(a,nt([r],g));return l&&P?i[0]:i};S&&u&&"function"==typeof w&&1!=w.length&&(_=S=!1);var P=this.__chain__,C=!!this.__actions__.length,L=p&&!P,k=_&&!C;if(!p&&S){i=k?i:new N(this);var q=r.apply(i,g);return q.__actions__.push({func:er,args:[m],thisArg:c}),new Pn(q,P)}return L&&k?r.apply(this,g):(q=this.thru(m),L?l?q.value()[0]:q.value():q)})}),mn(["pop","push","shift","sort","splice","unshift"],function(r){var i=tb[r],c=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",u=/^(?:pop|shift)$/.test(r);a.prototype[r]=function(){var r=arguments;if(u&&!this.__chain__){var l=this.value();return i.apply(iY(l)?l:[],r)}return this[c](function(c){return i.apply(iY(c)?c:[],r)})}}),$n(N.prototype,function(r,i){var c=a[i];if(c){var u=c.name+"";tD.call(rL,u)||(rL[u]=[]),rL[u].push({name:i,func:c})}}),rL[Xe(c,2).name]=[{name:"wrapper",func:c}],N.prototype.clone=Gf,N.prototype.reverse=zf,N.prototype.value=Kf,a.prototype.at=iC,a.prototype.chain=Al,a.prototype.commit=Cl,a.prototype.next=Il,a.prototype.plant=El,a.prototype.reverse=yl,a.prototype.toJSON=a.prototype.valueOf=a.prototype.value=Sl,a.prototype.first=a.prototype.head,tB&&(a.prototype[tB]=xl),a}();t5?((t5.exports=rm)._=rm,t1._=rm):t0._=rm}).call(nC)}(nA,nA.exports);var nR=Object.defineProperty,nN=Object.defineProperties,nT=Object.getOwnPropertyDescriptors,nj=Object.getOwnPropertySymbols,nU=Object.prototype.hasOwnProperty,nL=Object.prototype.propertyIsEnumerable,ya=(r,i,c)=>i in r?nR(r,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):r[i]=c,index_es_cr=(r,i)=>{for(var c in i||(i={}))nU.call(i,c)&&ya(r,c,i[c]);if(nj)for(var c of nj(i))nL.call(i,c)&&ya(r,c,i[c]);return r},Jg=(r,i)=>nN(r,nT(i));function dist_index_es_ft(r,i,c){var u;let l=ve(r);return(null==(u=i.rpcMap)?void 0:u[l.reference])||`https://rpc.walletconnect.com/v1/?chainId=${l.namespace}:${l.reference}&projectId=${c}`}function dist_index_es_Ct(r){return r.includes(":")?r.split(":")[1]:r}function Sa(r){return r.map(r=>`${r.split(":")[0]}:${r.split(":")[1]}`)}function Xg(r,i){let c=Object.keys(i.namespaces).filter(i=>i.includes(r));if(!c.length)return[];let u=[];return c.forEach(r=>{let c=i.namespaces[r].accounts;u.push(...c)}),u}function Oa(r={},i={}){let c=Ra(r),u=Ra(i);return nA.exports.merge(c,u)}function Ra(r){var i,c,u,l;let d={};if(!B(r))return d;for(let[p,g]of Object.entries(r)){let r=oe(p)?[p]:g.chains,_=g.methods||[],w=g.events||[],S=g.rpcMap||{},P=en(p);d[P]=Jg(index_es_cr(index_es_cr({},d[P]),g),{chains:index_es_S(r,null==(i=d[P])?void 0:i.chains),methods:index_es_S(_,null==(c=d[P])?void 0:c.methods),events:index_es_S(w,null==(u=d[P])?void 0:u.events),rpcMap:index_es_cr(index_es_cr({},S),null==(l=d[P])?void 0:l.rpcMap)})}return d}function Qg(r){return r.includes(":")?r.split(":")[2]:r}function Vg(r){let i={};for(let[c,u]of Object.entries(r)){let r=u.methods||[],l=u.events||[],d=u.accounts||[],p=oe(c)?[c]:u.chains?u.chains:Sa(u.accounts);i[c]={chains:p,methods:r,events:l,accounts:d}}return i}function index_es_Wi(r){return"number"==typeof r?r:r.includes("0x")?parseInt(r,16):isNaN(Number(r=r.includes(":")?r.split(":")[1]:r))?r:Number(r)}let nk={},universal_provider_dist_index_es_z=r=>nk[r],Fi=(r,i)=>{nk[r]=i};let kg=class kg{constructor(r){this.name="polkadot",this.namespace=r.namespace,this.events=universal_provider_dist_index_es_z("events"),this.client=universal_provider_dist_index_es_z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let r=this.namespace.chains[0];if(!r)throw Error("ChainId not found");return r.split(":")[1]}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,i){this.httpProviders[r]||this.setHttpProvider(r,i),this.chainId=r,this.events.emit(nP.DEFAULT_CHAIN_CHANGED,`${this.name}:${r}`)}getAccounts(){let r=this.namespace.accounts;return r&&r.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]}createHttpProviders(){let r={};return this.namespace.chains.forEach(i=>{var c;let u=dist_index_es_Ct(i);r[u]=this.createHttpProvider(u,null==(c=this.namespace.rpcMap)?void 0:c[i])}),r}getHttpProvider(){let r=`${this.name}:${this.chainId}`,i=this.httpProviders[r];if(typeof i>"u")throw Error(`JSON-RPC provider for ${r} not found`);return i}setHttpProvider(r,i){let c=this.createHttpProvider(r,i);c&&(this.httpProviders[r]=c)}createHttpProvider(r,i){let c=i||dist_index_es_ft(r,this.namespace,this.client.core.projectId);if(!c)throw Error(`No RPC url provided for chainId: ${r}`);return new JsonRpcProvider(new HttpConnection(c,universal_provider_dist_index_es_z("disableProviderPing")))}};let jg=class jg{constructor(r){this.name="eip155",this.namespace=r.namespace,this.events=universal_provider_dist_index_es_z("events"),this.client=universal_provider_dist_index_es_z("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(r){switch(r.request.method){case"eth_requestAccounts":case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(r);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(r.request.method)?await this.client.request(r):this.getHttpProvider().request(r.request)}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}setDefaultChain(r,i){this.httpProviders[r]||this.setHttpProvider(parseInt(r),i),this.chainId=parseInt(r),this.events.emit(nP.DEFAULT_CHAIN_CHANGED,`${this.name}:${r}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;let r=this.namespace.chains[0];if(!r)throw Error("ChainId not found");return r.split(":")[1]}createHttpProvider(r,i){let c=i||dist_index_es_ft(`${this.name}:${r}`,this.namespace,this.client.core.projectId);if(!c)throw Error(`No RPC url provided for chainId: ${r}`);return new JsonRpcProvider(new HttpConnection(c,universal_provider_dist_index_es_z("disableProviderPing")))}setHttpProvider(r,i){let c=this.createHttpProvider(r,i);c&&(this.httpProviders[r]=c)}createHttpProviders(){let r={};return this.namespace.chains.forEach(i=>{var c;let u=parseInt(dist_index_es_Ct(i));r[u]=this.createHttpProvider(u,null==(c=this.namespace.rpcMap)?void 0:c[i])}),r}getAccounts(){let r=this.namespace.accounts;return r?[...new Set(r.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){let r=this.chainId,i=this.httpProviders[r];if(typeof i>"u")throw Error(`JSON-RPC provider for ${r} not found`);return i}async handleSwitchChain(r){var i,c;let u=r.request.params?null==(i=r.request.params[0])?void 0:i.chainId:"0x0";u=u.startsWith("0x")?u:`0x${u}`;let l=parseInt(u,16);if(this.isChainApproved(l))this.setDefaultChain(`${l}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:r.topic,request:{method:r.request.method,params:[{chainId:u}]},chainId:null==(c=this.namespace.chains)?void 0:c[0]}),this.setDefaultChain(`${l}`);else throw Error(`Failed to switch to chain 'eip155:${l}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(r){return this.namespace.chains.includes(`${this.name}:${r}`)}};let nv=class nv{constructor(r){this.name="solana",this.namespace=r.namespace,this.events=universal_provider_dist_index_es_z("events"),this.client=universal_provider_dist_index_es_z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,i){this.httpProviders[r]||this.setHttpProvider(r,i),this.chainId=r,this.events.emit(nP.DEFAULT_CHAIN_CHANGED,`${this.name}:${r}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let r=this.namespace.chains[0];if(!r)throw Error("ChainId not found");return r.split(":")[1]}getAccounts(){let r=this.namespace.accounts;return r?[...new Set(r.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){let r={};return this.namespace.chains.forEach(i=>{var c;let u=dist_index_es_Ct(i);r[u]=this.createHttpProvider(u,null==(c=this.namespace.rpcMap)?void 0:c[i])}),r}getHttpProvider(){let r=`${this.name}:${this.chainId}`,i=this.httpProviders[r];if(typeof i>"u")throw Error(`JSON-RPC provider for ${r} not found`);return i}setHttpProvider(r,i){let c=this.createHttpProvider(r,i);c&&(this.httpProviders[r]=c)}createHttpProvider(r,i){let c=i||dist_index_es_ft(r,this.namespace,this.client.core.projectId);if(!c)throw Error(`No RPC url provided for chainId: ${r}`);return new JsonRpcProvider(new HttpConnection(c,universal_provider_dist_index_es_z("disableProviderPing")))}};let tv=class tv{constructor(r){this.name="cosmos",this.namespace=r.namespace,this.events=universal_provider_dist_index_es_z("events"),this.client=universal_provider_dist_index_es_z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let r=this.namespace.chains[0];if(!r)throw Error("ChainId not found");return r.split(":")[1]}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,i){this.httpProviders[r]||this.setHttpProvider(r,i),this.chainId=r,this.events.emit(nP.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let r=this.namespace.accounts;return r?[...new Set(r.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){let r={};return this.namespace.chains.forEach(i=>{var c;let u=dist_index_es_Ct(i);r[u]=this.createHttpProvider(u,null==(c=this.namespace.rpcMap)?void 0:c[i])}),r}getHttpProvider(){let r=`${this.name}:${this.chainId}`,i=this.httpProviders[r];if(typeof i>"u")throw Error(`JSON-RPC provider for ${r} not found`);return i}setHttpProvider(r,i){let c=this.createHttpProvider(r,i);c&&(this.httpProviders[r]=c)}createHttpProvider(r,i){let c=i||dist_index_es_ft(r,this.namespace,this.client.core.projectId);if(!c)throw Error(`No RPC url provided for chainId: ${r}`);return new JsonRpcProvider(new HttpConnection(c,universal_provider_dist_index_es_z("disableProviderPing")))}};let ev=class ev{constructor(r){this.name="cip34",this.namespace=r.namespace,this.events=universal_provider_dist_index_es_z("events"),this.client=universal_provider_dist_index_es_z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let r=this.namespace.chains[0];if(!r)throw Error("ChainId not found");return r.split(":")[1]}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,i){this.httpProviders[r]||this.setHttpProvider(r,i),this.chainId=r,this.events.emit(nP.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let r=this.namespace.accounts;return r?[...new Set(r.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){let r={};return this.namespace.chains.forEach(i=>{let c=this.getCardanoRPCUrl(i),u=dist_index_es_Ct(i);r[u]=this.createHttpProvider(u,c)}),r}getHttpProvider(){let r=`${this.name}:${this.chainId}`,i=this.httpProviders[r];if(typeof i>"u")throw Error(`JSON-RPC provider for ${r} not found`);return i}getCardanoRPCUrl(r){let i=this.namespace.rpcMap;if(i)return i[r]}setHttpProvider(r,i){let c=this.createHttpProvider(r,i);c&&(this.httpProviders[r]=c)}createHttpProvider(r,i){let c=i||this.getCardanoRPCUrl(r);if(!c)throw Error(`No RPC url provided for chainId: ${r}`);return new JsonRpcProvider(new HttpConnection(c,universal_provider_dist_index_es_z("disableProviderPing")))}};let rv=class rv{constructor(r){this.name="elrond",this.namespace=r.namespace,this.events=universal_provider_dist_index_es_z("events"),this.client=universal_provider_dist_index_es_z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,i){this.httpProviders[r]||this.setHttpProvider(r,i),this.chainId=r,this.events.emit(nP.DEFAULT_CHAIN_CHANGED,`${this.name}:${r}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let r=this.namespace.chains[0];if(!r)throw Error("ChainId not found");return r.split(":")[1]}getAccounts(){let r=this.namespace.accounts;return r?[...new Set(r.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){let r={};return this.namespace.chains.forEach(i=>{var c;let u=dist_index_es_Ct(i);r[u]=this.createHttpProvider(u,null==(c=this.namespace.rpcMap)?void 0:c[i])}),r}getHttpProvider(){let r=`${this.name}:${this.chainId}`,i=this.httpProviders[r];if(typeof i>"u")throw Error(`JSON-RPC provider for ${r} not found`);return i}setHttpProvider(r,i){let c=this.createHttpProvider(r,i);c&&(this.httpProviders[r]=c)}createHttpProvider(r,i){let c=i||dist_index_es_ft(r,this.namespace,this.client.core.projectId);if(!c)throw Error(`No RPC url provided for chainId: ${r}`);return new JsonRpcProvider(new HttpConnection(c,universal_provider_dist_index_es_z("disableProviderPing")))}};let iv=class iv{constructor(r){this.name="multiversx",this.namespace=r.namespace,this.events=universal_provider_dist_index_es_z("events"),this.client=universal_provider_dist_index_es_z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,i){this.httpProviders[r]||this.setHttpProvider(r,i),this.chainId=r,this.events.emit(nP.DEFAULT_CHAIN_CHANGED,`${this.name}:${r}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let r=this.namespace.chains[0];if(!r)throw Error("ChainId not found");return r.split(":")[1]}getAccounts(){let r=this.namespace.accounts;return r?[...new Set(r.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){let r={};return this.namespace.chains.forEach(i=>{var c;let u=dist_index_es_Ct(i);r[u]=this.createHttpProvider(u,null==(c=this.namespace.rpcMap)?void 0:c[i])}),r}getHttpProvider(){let r=`${this.name}:${this.chainId}`,i=this.httpProviders[r];if(typeof i>"u")throw Error(`JSON-RPC provider for ${r} not found`);return i}setHttpProvider(r,i){let c=this.createHttpProvider(r,i);c&&(this.httpProviders[r]=c)}createHttpProvider(r,i){let c=i||dist_index_es_ft(r,this.namespace,this.client.core.projectId);if(!c)throw Error(`No RPC url provided for chainId: ${r}`);return new JsonRpcProvider(new HttpConnection(c,universal_provider_dist_index_es_z("disableProviderPing")))}};let sv=class sv{constructor(r){this.name="near",this.namespace=r.namespace,this.events=universal_provider_dist_index_es_z("events"),this.client=universal_provider_dist_index_es_z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let r=this.namespace.chains[0];if(!r)throw Error("ChainId not found");return r.split(":")[1]}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,i){if(this.chainId=r,!this.httpProviders[r]){let c=i||dist_index_es_ft(`${this.name}:${r}`,this.namespace);if(!c)throw Error(`No RPC url provided for chainId: ${r}`);this.setHttpProvider(r,c)}this.events.emit(nP.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let r=this.namespace.accounts;return r&&r.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]}createHttpProviders(){let r={};return this.namespace.chains.forEach(i=>{var c;r[i]=this.createHttpProvider(i,null==(c=this.namespace.rpcMap)?void 0:c[i])}),r}getHttpProvider(){let r=`${this.name}:${this.chainId}`,i=this.httpProviders[r];if(typeof i>"u")throw Error(`JSON-RPC provider for ${r} not found`);return i}setHttpProvider(r,i){let c=this.createHttpProvider(r,i);c&&(this.httpProviders[r]=c)}createHttpProvider(r,i){let c=i||dist_index_es_ft(r,this.namespace);return typeof c>"u"?void 0:new JsonRpcProvider(new HttpConnection(c,universal_provider_dist_index_es_z("disableProviderPing")))}};var nM=Object.defineProperty,nq=Object.defineProperties,nz=Object.getOwnPropertyDescriptors,nH=Object.getOwnPropertySymbols,n$=Object.prototype.hasOwnProperty,nB=Object.prototype.propertyIsEnumerable,La=(r,i,c)=>i in r?nM(r,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):r[i]=c,index_es_hr=(r,i)=>{for(var c in i||(i={}))n$.call(i,c)&&La(r,c,i[c]);if(nH)for(var c of nH(i))nB.call(i,c)&&La(r,c,i[c]);return r},Mi=(r,i)=>nq(r,nz(i));let index_es_lr=class index_es_lr{constructor(r){this.events=new(X()),this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=r,this.logger="u">typeof r?.logger&&"string"!=typeof r?.logger?r.logger:tX()(logger_dist_index_es_k({level:r?.logger||nI})),this.disableProviderPing=r?.disableProviderPing||!1}static async init(r){let i=new index_es_lr(r);return await i.initialize(),i}async request(r,i,c){let[u,l]=this.validateChain(i);if(!this.session)throw Error("Please call connect() before request()");return await this.getProvider(u).request({request:index_es_hr({},r),chainId:`${u}:${l}`,topic:this.session.topic,expiry:c})}sendAsync(r,i,c,u){let l=new Date().getTime();this.request(r,c,u).then(r=>i(null,formatJsonRpcResult(l,r))).catch(r=>i(r,void 0))}async enable(){if(!this.client)throw Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var r;if(!this.session)throw Error("Please call connect() before enable()");await this.client.disconnect({topic:null==(r=this.session)?void 0:r.topic,reason:U("USER_DISCONNECTED")}),await this.cleanup()}async connect(r){if(!this.client)throw Error("Sign Client not initialized");if(this.setNamespaces(r),await this.cleanupPendingPairings(),!r.skipPairing)return await this.pair(r.pairingTopic)}on(r,i){this.events.on(r,i)}once(r,i){this.events.once(r,i)}removeListener(r,i){this.events.removeListener(r,i)}off(r,i){this.events.off(r,i)}get isWalletConnect(){return!0}async pair(r){this.shouldAbortPairingAttempt=!1;let i=0;do{if(this.shouldAbortPairingAttempt)throw Error("Pairing aborted");if(i>=this.maxPairingAttempts)throw Error("Max auto pairing attempts reached");let{uri:c,approval:u}=await this.client.connect({pairingTopic:r,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});c&&(this.uri=c,this.events.emit("display_uri",c)),await u().then(r=>{this.session=r;let i=Vg(r.namespaces);this.namespaces=Oa(this.namespaces,i),this.persist("namespaces",this.namespaces)}).catch(r=>{if(r.message!==ne)throw r;i++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(r,i){try{if(!this.session)return;let[c,u]=this.validateChain(r);this.getProvider(c).setDefaultChain(u,i)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(r={}){this.logger.info("Cleaning up inactive pairings...");let i=this.client.pairing.getAll();if(index_es_k(i)){for(let c of i)r.deletePairings?this.client.core.expirer.set(c.topic,0):await this.client.core.relayer.subscriber.unsubscribe(c.topic);this.logger.info(`Inactive pairings cleared: ${i.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){let r=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[r]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await dist_index_es_Q.init({logger:this.providerOpts.logger||nI,relayUrl:this.providerOpts.relayUrl||"wss://relay.walletconnect.com",projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw Error("Sign Client not initialized");if(!this.session)throw Error("Session not initialized. Please call connect() before enable()");let r=[...new Set(Object.keys(this.session.namespaces).map(r=>en(r)))];Fi("client",this.client),Fi("events",this.events),Fi("disableProviderPing",this.disableProviderPing),r.forEach(r=>{if(!this.session)return;let i=Xg(r,this.session),c=Sa(i),u=Oa(this.namespaces,this.optionalNamespaces),l=Mi(index_es_hr({},u[r]),{accounts:i,chains:c});switch(r){case"eip155":this.rpcProviders[r]=new jg({namespace:l});break;case"solana":this.rpcProviders[r]=new nv({namespace:l});break;case"cosmos":this.rpcProviders[r]=new tv({namespace:l});break;case"polkadot":this.rpcProviders[r]=new kg({namespace:l});break;case"cip34":this.rpcProviders[r]=new ev({namespace:l});break;case"elrond":this.rpcProviders[r]=new rv({namespace:l});break;case"multiversx":this.rpcProviders[r]=new iv({namespace:l});break;case"near":this.rpcProviders[r]=new sv({namespace:l})}})}registerEventListeners(){if(typeof this.client>"u")throw Error("Sign Client is not initialized");this.client.on("session_ping",r=>{this.events.emit("session_ping",r)}),this.client.on("session_event",r=>{let{params:i}=r,{event:c}=i;if("accountsChanged"===c.name){let r=c.data;r&&index_es_k(r)&&this.events.emit("accountsChanged",r.map(Qg))}else if("chainChanged"===c.name){let r=i.chainId,c=i.event.data,u=en(r),l=index_es_Wi(r)!==index_es_Wi(c)?`${u}:${index_es_Wi(c)}`:r;this.onChainChanged(l)}else this.events.emit(c.name,c.data);this.events.emit("session_event",r)}),this.client.on("session_update",({topic:r,params:i})=>{var c;let{namespaces:u}=i,l=null==(c=this.client)?void 0:c.session.get(r);this.session=Mi(index_es_hr({},l),{namespaces:u}),this.onSessionUpdate(),this.events.emit("session_update",{topic:r,params:i})}),this.client.on("session_delete",async r=>{await this.cleanup(),this.events.emit("session_delete",r),this.events.emit("disconnect",Mi(index_es_hr({},U("USER_DISCONNECTED")),{data:r.topic}))}),this.on(nP.DEFAULT_CHAIN_CHANGED,r=>{this.onChainChanged(r,!0)})}getProvider(r){if(!this.rpcProviders[r])throw Error(`Provider not found: ${r}`);return this.rpcProviders[r]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(r=>{var i;this.getProvider(r).updateNamespace(null==(i=this.session)?void 0:i.namespaces[r])})}setNamespaces(r){let{namespaces:i,optionalNamespaces:c,sessionProperties:u}=r;i&&Object.keys(i).length&&(this.namespaces=i),c&&Object.keys(c).length&&(this.optionalNamespaces=c),this.sessionProperties=u,this.persist("namespaces",i),this.persist("optionalNamespaces",c)}validateChain(r){let[i,c]=r?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[i,c];if(i&&!Object.keys(this.namespaces||{}).map(r=>en(r)).includes(i))throw Error(`Namespace '${i}' is not configured. Please call connect() first with namespace config.`);if(i&&c)return[i,c];let u=en(Object.keys(this.namespaces)[0]),l=this.rpcProviders[u].getDefaultChain();return[u,l]}async requestAccounts(){let[r]=this.validateChain();return await this.getProvider(r).requestAccounts()}onChainChanged(r,i=!1){if(!this.namespaces)return;let[c,u]=this.validateChain(r);u&&(i||this.getProvider(c).setDefaultChain(u),this.namespaces[c]?this.namespaces[c].defaultChain=u:this.namespaces[`${c}:${u}`]?this.namespaces[`${c}:${u}`].defaultChain=u:this.namespaces[`${c}:${u}`]={defaultChain:u},this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",u))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(r,i){this.client.core.storage.setItem(`${nO}/${r}`,i)}async getFromStore(r){return await this.client.core.storage.getItem(`${nO}/${r}`)}};let nF=["eth_sendTransaction","personal_sign"],nK=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],nV=["chainChanged","accountsChanged"],nW=["chainChanged","accountsChanged","message","disconnect","connect"];var nG=Object.defineProperty,nJ=Object.defineProperties,nY=Object.getOwnPropertyDescriptors,nQ=Object.getOwnPropertySymbols,nZ=Object.prototype.hasOwnProperty,nX=Object.prototype.propertyIsEnumerable,ethereum_provider_dist_index_es_O=(r,i,c)=>i in r?nG(r,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):r[i]=c,ethereum_provider_dist_index_es_p=(r,i)=>{for(var c in i||(i={}))nZ.call(i,c)&&ethereum_provider_dist_index_es_O(r,c,i[c]);if(nQ)for(var c of nQ(i))nX.call(i,c)&&ethereum_provider_dist_index_es_O(r,c,i[c]);return r},index_es_M=(r,i)=>nJ(r,nY(i));function ethereum_provider_dist_index_es_g(r){return Number(r[0].split(":")[1])}function ethereum_provider_dist_index_es_f(r){return`0x${r.toString(16)}`}function ethereum_provider_dist_index_es_L(r){let{chains:i,optionalChains:c,methods:u,optionalMethods:l,events:d,optionalEvents:p,rpcMap:g}=r;if(!index_es_k(i))throw Error("Invalid chains");let _={chains:i,methods:u||nF,events:d||nV,rpcMap:ethereum_provider_dist_index_es_p({},i.length?{[ethereum_provider_dist_index_es_g(i)]:g[ethereum_provider_dist_index_es_g(i)]}:{})},w=d?.filter(r=>!nV.includes(r)),S=u?.filter(r=>!nF.includes(r));if(!c&&!p&&!l&&!(null!=w&&w.length)&&!(null!=S&&S.length))return{required:i.length?_:void 0};let P=w?.length&&S?.length||!c,C={chains:[...new Set(P?_.chains.concat(c||[]):c)],methods:[...new Set(_.methods.concat(null!=l&&l.length?l:nK))],events:[...new Set(_.events.concat(null!=p&&p.length?p:nW))],rpcMap:g};return{required:i.length?_:void 0,optional:c.length?C:void 0}}let ethereum_provider_dist_index_es_v=class ethereum_provider_dist_index_es_v{constructor(){this.events=new Q.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY="wc@2:ethereum_provider:",this.on=(r,i)=>(this.events.on(r,i),this),this.once=(r,i)=>(this.events.once(r,i),this),this.removeListener=(r,i)=>(this.events.removeListener(r,i),this),this.off=(r,i)=>(this.events.off(r,i),this),this.parseAccount=r=>this.isCompatibleChainId(r)?this.parseAccountId(r).address:r,this.signer={},this.rpc={}}static async init(r){let i=new ethereum_provider_dist_index_es_v;return await i.initialize(r),i}async request(r,i){return await this.signer.request(r,this.formatChainId(this.chainId),i)}sendAsync(r,i,c){this.signer.sendAsync(r,i,this.formatChainId(this.chainId),c)}get connected(){return!!this.signer.client&&this.signer.client.core.relayer.connected}get connecting(){return!!this.signer.client&&this.signer.client.core.relayer.connecting}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(r){if(!this.signer.client)throw Error("Provider not initialized. Call init() first");this.loadConnectOpts(r);let{required:i,optional:c}=ethereum_provider_dist_index_es_L(this.rpc);try{let u=await new Promise(async(u,l)=>{var d;this.rpc.showQrModal&&(null==(d=this.modal)||d.subscribeModal(r=>{r.open||this.signer.session||(this.signer.abortPairingAttempt(),l(Error("Connection request reset. Please try again.")))})),await this.signer.connect(index_es_M(ethereum_provider_dist_index_es_p({namespaces:ethereum_provider_dist_index_es_p({},i&&{[this.namespace]:i})},c&&{optionalNamespaces:{[this.namespace]:c}}),{pairingTopic:r?.pairingTopic})).then(r=>{u(r)}).catch(r=>{l(Error(r.message))})});if(!u)return;let l=Un(u.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:l),this.setAccounts(l),this.events.emit("connect",{chainId:ethereum_provider_dist_index_es_f(this.chainId)})}catch(r){throw this.signer.logger.error(r),r}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",r=>{let{params:i}=r,{event:c}=i;"accountsChanged"===c.name?(this.accounts=this.parseAccounts(c.data),this.events.emit("accountsChanged",this.accounts)):"chainChanged"===c.name?this.setChainId(this.formatChainId(c.data)):this.events.emit(c.name,c.data),this.events.emit("session_event",r)}),this.signer.on("chainChanged",r=>{let i=parseInt(r);this.chainId=i,this.events.emit("chainChanged",ethereum_provider_dist_index_es_f(this.chainId)),this.persist()}),this.signer.on("session_update",r=>{this.events.emit("session_update",r)}),this.signer.on("session_delete",r=>{this.reset(),this.events.emit("session_delete",r),this.events.emit("disconnect",index_es_M(ethereum_provider_dist_index_es_p({},U("USER_DISCONNECTED")),{data:r.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",r=>{var i,c;this.rpc.showQrModal&&(null==(i=this.modal)||i.closeModal(),null==(c=this.modal)||c.openModal({uri:r})),this.events.emit("display_uri",r)})}switchEthereumChain(r){this.request({method:"wallet_switchEthereumChain",params:[{chainId:r.toString(16)}]})}isCompatibleChainId(r){return"string"==typeof r&&r.startsWith(`${this.namespace}:`)}formatChainId(r){return`${this.namespace}:${r}`}parseChainId(r){return Number(r.split(":")[1])}setChainIds(r){let i=r.filter(r=>this.isCompatibleChainId(r)).map(r=>this.parseChainId(r));i.length&&(this.chainId=i[0],this.events.emit("chainChanged",ethereum_provider_dist_index_es_f(this.chainId)),this.persist())}setChainId(r){if(this.isCompatibleChainId(r)){let i=this.parseChainId(r);this.chainId=i,this.switchEthereumChain(i)}}parseAccountId(r){let[i,c,u]=r.split(":");return{chainId:`${i}:${c}`,address:u}}setAccounts(r){this.accounts=r.filter(r=>this.parseChainId(this.parseAccountId(r).chainId)===this.chainId).map(r=>this.parseAccountId(r).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(r){var i,c;let u=null!=(i=r?.chains)?i:[],l=null!=(c=r?.optionalChains)?c:[],d=u.concat(l);if(!d.length)throw Error("No chains specified in either `chains` or `optionalChains`");let p=u.length?r?.methods||nF:[],g=u.length?r?.events||nV:[],_=r?.optionalMethods||[],w=r?.optionalEvents||[],S=r?.rpcMap||this.buildRpcMap(d,r.projectId),P=r?.qrModalOptions||void 0;return{chains:u?.map(r=>this.formatChainId(r)),optionalChains:l.map(r=>this.formatChainId(r)),methods:p,events:g,optionalMethods:_,optionalEvents:w,rpcMap:S,showQrModal:!!(null!=r&&r.showQrModal),qrModalOptions:P,projectId:r.projectId,metadata:r.metadata}}buildRpcMap(r,i){let c={};return r.forEach(r=>{c[r]=this.getRpcUrl(r,i)}),c}async initialize(r){if(this.rpc=this.getRpcConfig(r),this.chainId=this.rpc.chains.length?ethereum_provider_dist_index_es_g(this.rpc.chains):ethereum_provider_dist_index_es_g(this.rpc.optionalChains),this.signer=await index_es_lr.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:r.disableProviderPing,relayUrl:r.relayUrl,storageOptions:r.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let r;try{let{WalletConnectModal:i}=await c.e(8465).then(c.bind(c,78465));r=i}catch{throw Error("To use QR modal, please install @walletconnect/modal package")}if(r)try{this.modal=new r(ethereum_provider_dist_index_es_p({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(r){throw this.signer.logger.error(r),Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(r){if(!r)return;let{chains:i,optionalChains:c,rpcMap:u}=r;i&&index_es_k(i)&&(this.rpc.chains=i.map(r=>this.formatChainId(r)),i.forEach(r=>{this.rpc.rpcMap[r]=u?.[r]||this.getRpcUrl(r)})),c&&index_es_k(c)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=c?.map(r=>this.formatChainId(r)),c.forEach(r=>{this.rpc.rpcMap[r]=u?.[r]||this.getRpcUrl(r)}))}getRpcUrl(r,i){var c;return(null==(c=this.rpc.rpcMap)?void 0:c[r])||`https://rpc.walletconnect.com/v1/?chainId=eip155:${r}&projectId=${i||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;let r=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),i=this.session.namespaces[`${this.namespace}:${r}`]?this.session.namespaces[`${this.namespace}:${r}`]:this.session.namespaces[this.namespace];this.setChainIds(r?[this.formatChainId(r)]:i?.accounts),this.setAccounts(i?.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(r){return"string"==typeof r||r instanceof String?[this.parseAccount(r)]:r.map(r=>this.parseAccount(r))}};let n0=ethereum_provider_dist_index_es_v},95097:function(r,i,c){"use strict";c.d(i,{q:function(){return IEvents}});let IEvents=class IEvents{}},13923:function(r,i,c){"use strict";c.r(i),c.d(i,{IEvents:function(){return u.q}});var u=c(95097)},3768:function(r,i,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.HEARTBEAT_EVENTS=i.HEARTBEAT_INTERVAL=void 0;let u=c(58619);i.HEARTBEAT_INTERVAL=u.FIVE_SECONDS,i.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"}},7051:function(r,i,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0});let u=c(42182);u.__exportStar(c(3768),i)},74862:function(r,i,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.HeartBeat=void 0;let u=c(42182),l=c(512),d=c(58619),p=c(89219),g=c(7051);let HeartBeat=class HeartBeat extends p.IHeartBeat{constructor(r){super(r),this.events=new l.EventEmitter,this.interval=g.HEARTBEAT_INTERVAL,this.interval=(null==r?void 0:r.interval)||g.HEARTBEAT_INTERVAL}static init(r){return u.__awaiter(this,void 0,void 0,function*(){let i=new HeartBeat(r);return yield i.init(),i})}init(){return u.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(r,i){this.events.on(r,i)}once(r,i){this.events.once(r,i)}off(r,i){this.events.off(r,i)}removeListener(r,i){this.events.removeListener(r,i)}initialize(){return u.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),d.toMiliseconds(this.interval))})}pulse(){this.events.emit(g.HEARTBEAT_EVENTS.pulse)}};i.HeartBeat=HeartBeat},63943:function(r,i,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0});let u=c(42182);u.__exportStar(c(74862),i),u.__exportStar(c(89219),i),u.__exportStar(c(7051),i)},74684:function(r,i,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.IHeartBeat=void 0;let u=c(13923);let IHeartBeat=class IHeartBeat extends u.IEvents{constructor(r){super()}};i.IHeartBeat=IHeartBeat},89219:function(r,i,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0});let u=c(42182);u.__exportStar(c(74684),i)},42182:function(r,i,c){"use strict";c.r(i),c.d(i,{__assign:function(){return __assign},__asyncDelegator:function(){return __asyncDelegator},__asyncGenerator:function(){return __asyncGenerator},__asyncValues:function(){return __asyncValues},__await:function(){return __await},__awaiter:function(){return __awaiter},__classPrivateFieldGet:function(){return __classPrivateFieldGet},__classPrivateFieldSet:function(){return __classPrivateFieldSet},__createBinding:function(){return __createBinding},__decorate:function(){return __decorate},__exportStar:function(){return __exportStar},__extends:function(){return __extends},__generator:function(){return __generator},__importDefault:function(){return __importDefault},__importStar:function(){return __importStar},__makeTemplateObject:function(){return __makeTemplateObject},__metadata:function(){return __metadata},__param:function(){return __param},__read:function(){return __read},__rest:function(){return __rest},__spread:function(){return __spread},__spreadArrays:function(){return __spreadArrays},__values:function(){return __values}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(r,i){return(extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var c in i)i.hasOwnProperty(c)&&(r[c]=i[c])})(r,i)};function __extends(r,i){function __(){this.constructor=r}extendStatics(r,i),r.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function(r){for(var i,c=1,u=arguments.length;c<u;c++)for(var l in i=arguments[c])Object.prototype.hasOwnProperty.call(i,l)&&(r[l]=i[l]);return r}).apply(this,arguments)};function __rest(r,i){var c={};for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&0>i.indexOf(u)&&(c[u]=r[u]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,u=Object.getOwnPropertySymbols(r);l<u.length;l++)0>i.indexOf(u[l])&&Object.prototype.propertyIsEnumerable.call(r,u[l])&&(c[u[l]]=r[u[l]]);return c}function __decorate(r,i,c,u){var l,d=arguments.length,p=d<3?i:null===u?u=Object.getOwnPropertyDescriptor(i,c):u;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)p=Reflect.decorate(r,i,c,u);else for(var g=r.length-1;g>=0;g--)(l=r[g])&&(p=(d<3?l(p):d>3?l(i,c,p):l(i,c))||p);return d>3&&p&&Object.defineProperty(i,c,p),p}function __param(r,i){return function(c,u){i(c,u,r)}}function __metadata(r,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(r,i)}function __awaiter(r,i,c,u){function adopt(r){return r instanceof c?r:new c(function(i){i(r)})}return new(c||(c=Promise))(function(c,l){function fulfilled(r){try{step(u.next(r))}catch(r){l(r)}}function rejected(r){try{step(u.throw(r))}catch(r){l(r)}}function step(r){r.done?c(r.value):adopt(r.value).then(fulfilled,rejected)}step((u=u.apply(r,i||[])).next())})}function __generator(r,i){var c,u,l,d,p={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return d={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d;function verb(r){return function(i){return step([r,i])}}function step(d){if(c)throw TypeError("Generator is already executing.");for(;p;)try{if(c=1,u&&(l=2&d[0]?u.return:d[0]?u.throw||((l=u.return)&&l.call(u),0):u.next)&&!(l=l.call(u,d[1])).done)return l;switch(u=0,l&&(d=[2&d[0],l.value]),d[0]){case 0:case 1:l=d;break;case 4:return p.label++,{value:d[1],done:!1};case 5:p.label++,u=d[1],d=[0];continue;case 7:d=p.ops.pop(),p.trys.pop();continue;default:if(!(l=(l=p.trys).length>0&&l[l.length-1])&&(6===d[0]||2===d[0])){p=0;continue}if(3===d[0]&&(!l||d[1]>l[0]&&d[1]<l[3])){p.label=d[1];break}if(6===d[0]&&p.label<l[1]){p.label=l[1],l=d;break}if(l&&p.label<l[2]){p.label=l[2],p.ops.push(d);break}l[2]&&p.ops.pop(),p.trys.pop();continue}d=i.call(r,p)}catch(r){d=[6,r],u=0}finally{c=l=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function __createBinding(r,i,c,u){void 0===u&&(u=c),r[u]=i[c]}function __exportStar(r,i){for(var c in r)"default"===c||i.hasOwnProperty(c)||(i[c]=r[c])}function __values(r){var i="function"==typeof Symbol&&Symbol.iterator,c=i&&r[i],u=0;if(c)return c.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&u>=r.length&&(r=void 0),{value:r&&r[u++],done:!r}}};throw TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(r,i){var c="function"==typeof Symbol&&r[Symbol.iterator];if(!c)return r;var u,l,d=c.call(r),p=[];try{for(;(void 0===i||i-- >0)&&!(u=d.next()).done;)p.push(u.value)}catch(r){l={error:r}}finally{try{u&&!u.done&&(c=d.return)&&c.call(d)}finally{if(l)throw l.error}}return p}function __spread(){for(var r=[],i=0;i<arguments.length;i++)r=r.concat(__read(arguments[i]));return r}function __spreadArrays(){for(var r=0,i=0,c=arguments.length;i<c;i++)r+=arguments[i].length;for(var u=Array(r),l=0,i=0;i<c;i++)for(var d=arguments[i],p=0,g=d.length;p<g;p++,l++)u[l]=d[p];return u}function __await(r){return this instanceof __await?(this.v=r,this):new __await(r)}function __asyncGenerator(r,i,c){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var u,l=c.apply(r,i||[]),d=[];return u={},verb("next"),verb("throw"),verb("return"),u[Symbol.asyncIterator]=function(){return this},u;function verb(r){l[r]&&(u[r]=function(i){return new Promise(function(c,u){d.push([r,i,c,u])>1||resume(r,i)})})}function resume(r,i){try{step(l[r](i))}catch(r){settle(d[0][3],r)}}function step(r){r.value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):settle(d[0][2],r)}function fulfill(r){resume("next",r)}function reject(r){resume("throw",r)}function settle(r,i){r(i),d.shift(),d.length&&resume(d[0][0],d[0][1])}}function __asyncDelegator(r){var i,c;return i={},verb("next"),verb("throw",function(r){throw r}),verb("return"),i[Symbol.iterator]=function(){return this},i;function verb(u,l){i[u]=r[u]?function(i){return(c=!c)?{value:__await(r[u](i)),done:"return"===u}:l?l(i):i}:l}}function __asyncValues(r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,c=r[Symbol.asyncIterator];return c?c.call(r):(r=__values(r),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);function verb(c){i[c]=r[c]&&function(i){return new Promise(function(u,l){settle(u,l,(i=r[c](i)).done,i.value)})}}function settle(r,i,c,u){Promise.resolve(u).then(function(i){r({value:i,done:c})},i)}}function __makeTemplateObject(r,i){return Object.defineProperty?Object.defineProperty(r,"raw",{value:i}):r.raw=i,r}function __importStar(r){if(r&&r.__esModule)return r;var i={};if(null!=r)for(var c in r)Object.hasOwnProperty.call(r,c)&&(i[c]=r[c]);return i.default=r,i}function __importDefault(r){return r&&r.__esModule?r:{default:r}}function __classPrivateFieldGet(r,i){if(!i.has(r))throw TypeError("attempted to get private field on non-instance");return i.get(r)}function __classPrivateFieldSet(r,i,c){if(!i.has(r))throw TypeError("attempted to set private field on non-instance");return i.set(r,c),c}},69719:function(r,i){var c="undefined"!=typeof self?self:this,u=function(){function F(){this.fetch=!1,this.DOMException=c.DOMException}return F.prototype=c,new F}();(function(r){var i={searchParams:"URLSearchParams"in u,iterable:"Symbol"in u&&"iterator"in Symbol,blob:"FileReader"in u&&"Blob"in u&&function(){try{return new Blob,!0}catch(r){return!1}}(),formData:"FormData"in u,arrayBuffer:"ArrayBuffer"in u};function isDataView(r){return r&&DataView.prototype.isPrototypeOf(r)}if(i.arrayBuffer)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(r){return r&&c.indexOf(Object.prototype.toString.call(r))>-1};function normalizeName(r){if("string"!=typeof r&&(r=String(r)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(r))throw TypeError("Invalid character in header field name");return r.toLowerCase()}function normalizeValue(r){return"string"!=typeof r&&(r=String(r)),r}function iteratorFor(r){var c={next:function(){var i=r.shift();return{done:void 0===i,value:i}}};return i.iterable&&(c[Symbol.iterator]=function(){return c}),c}function Headers(r){this.map={},r instanceof Headers?r.forEach(function(r,i){this.append(i,r)},this):Array.isArray(r)?r.forEach(function(r){this.append(r[0],r[1])},this):r&&Object.getOwnPropertyNames(r).forEach(function(i){this.append(i,r[i])},this)}function consumed(r){if(r.bodyUsed)return Promise.reject(TypeError("Already read"));r.bodyUsed=!0}function fileReaderReady(r){return new Promise(function(i,c){r.onload=function(){i(r.result)},r.onerror=function(){c(r.error)}})}function readBlobAsArrayBuffer(r){var i=new FileReader,c=fileReaderReady(i);return i.readAsArrayBuffer(r),c}function readBlobAsText(r){var i=new FileReader,c=fileReaderReady(i);return i.readAsText(r),c}function readArrayBufferAsText(r){for(var i=new Uint8Array(r),c=Array(i.length),u=0;u<i.length;u++)c[u]=String.fromCharCode(i[u]);return c.join("")}function bufferClone(r){if(r.slice)return r.slice(0);var i=new Uint8Array(r.byteLength);return i.set(new Uint8Array(r)),i.buffer}function Body(){return this.bodyUsed=!1,this._initBody=function(r){this._bodyInit=r,r?"string"==typeof r?this._bodyText=r:i.blob&&Blob.prototype.isPrototypeOf(r)?this._bodyBlob=r:i.formData&&FormData.prototype.isPrototypeOf(r)?this._bodyFormData=r:i.searchParams&&URLSearchParams.prototype.isPrototypeOf(r)?this._bodyText=r.toString():i.arrayBuffer&&i.blob&&isDataView(r)?(this._bodyArrayBuffer=bufferClone(r.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):i.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(r)||l(r))?this._bodyArrayBuffer=bufferClone(r):this._bodyText=r=Object.prototype.toString.call(r):this._bodyText="",!this.headers.get("content-type")&&("string"==typeof r?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i.searchParams&&URLSearchParams.prototype.isPrototypeOf(r)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i.blob&&(this.blob=function(){var r=consumed(this);if(r)return r;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(!this._bodyFormData)return Promise.resolve(new Blob([this._bodyText]));throw Error("could not read FormData body as blob")},this.arrayBuffer=function(){return this._bodyArrayBuffer?consumed(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(readBlobAsArrayBuffer)}),this.text=function(){var r=consumed(this);if(r)return r;if(this._bodyBlob)return readBlobAsText(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer));if(!this._bodyFormData)return Promise.resolve(this._bodyText);throw Error("could not read FormData body as text")},i.formData&&(this.formData=function(){return this.text().then(decode)}),this.json=function(){return this.text().then(JSON.parse)},this}Headers.prototype.append=function(r,i){r=normalizeName(r),i=normalizeValue(i);var c=this.map[r];this.map[r]=c?c+", "+i:i},Headers.prototype.delete=function(r){delete this.map[normalizeName(r)]},Headers.prototype.get=function(r){return r=normalizeName(r),this.has(r)?this.map[r]:null},Headers.prototype.has=function(r){return this.map.hasOwnProperty(normalizeName(r))},Headers.prototype.set=function(r,i){this.map[normalizeName(r)]=normalizeValue(i)},Headers.prototype.forEach=function(r,i){for(var c in this.map)this.map.hasOwnProperty(c)&&r.call(i,this.map[c],c,this)},Headers.prototype.keys=function(){var r=[];return this.forEach(function(i,c){r.push(c)}),iteratorFor(r)},Headers.prototype.values=function(){var r=[];return this.forEach(function(i){r.push(i)}),iteratorFor(r)},Headers.prototype.entries=function(){var r=[];return this.forEach(function(i,c){r.push([c,i])}),iteratorFor(r)},i.iterable&&(Headers.prototype[Symbol.iterator]=Headers.prototype.entries);var d=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function normalizeMethod(r){var i=r.toUpperCase();return d.indexOf(i)>-1?i:r}function Request(r,i){var c=(i=i||{}).body;if(r instanceof Request){if(r.bodyUsed)throw TypeError("Already read");this.url=r.url,this.credentials=r.credentials,i.headers||(this.headers=new Headers(r.headers)),this.method=r.method,this.mode=r.mode,this.signal=r.signal,c||null==r._bodyInit||(c=r._bodyInit,r.bodyUsed=!0)}else this.url=String(r);if(this.credentials=i.credentials||this.credentials||"same-origin",(i.headers||!this.headers)&&(this.headers=new Headers(i.headers)),this.method=normalizeMethod(i.method||this.method||"GET"),this.mode=i.mode||this.mode||null,this.signal=i.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&c)throw TypeError("Body not allowed for GET or HEAD requests");this._initBody(c)}function decode(r){var i=new FormData;return r.trim().split("&").forEach(function(r){if(r){var c=r.split("="),u=c.shift().replace(/\+/g," "),l=c.join("=").replace(/\+/g," ");i.append(decodeURIComponent(u),decodeURIComponent(l))}}),i}function parseHeaders(r){var i=new Headers;return r.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(r){var c=r.split(":"),u=c.shift().trim();if(u){var l=c.join(":").trim();i.append(u,l)}}),i}function Response(r,i){i||(i={}),this.type="default",this.status=void 0===i.status?200:i.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in i?i.statusText:"OK",this.headers=new Headers(i.headers),this.url=i.url||"",this._initBody(r)}Request.prototype.clone=function(){return new Request(this,{body:this._bodyInit})},Body.call(Request.prototype),Body.call(Response.prototype),Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})},Response.error=function(){var r=new Response(null,{status:0,statusText:""});return r.type="error",r};var p=[301,302,303,307,308];Response.redirect=function(r,i){if(-1===p.indexOf(i))throw RangeError("Invalid status code");return new Response(null,{status:i,headers:{location:r}})},r.DOMException=u.DOMException;try{new r.DOMException}catch(i){r.DOMException=function(r,i){this.message=r,this.name=i;var c=Error(r);this.stack=c.stack},r.DOMException.prototype=Object.create(Error.prototype),r.DOMException.prototype.constructor=r.DOMException}function fetch(c,u){return new Promise(function(l,d){var p=new Request(c,u);if(p.signal&&p.signal.aborted)return d(new r.DOMException("Aborted","AbortError"));var g=new XMLHttpRequest;function abortXhr(){g.abort()}g.onload=function(){var r={status:g.status,statusText:g.statusText,headers:parseHeaders(g.getAllResponseHeaders()||"")};r.url="responseURL"in g?g.responseURL:r.headers.get("X-Request-URL"),l(new Response("response"in g?g.response:g.responseText,r))},g.onerror=function(){d(TypeError("Network request failed"))},g.ontimeout=function(){d(TypeError("Network request failed"))},g.onabort=function(){d(new r.DOMException("Aborted","AbortError"))},g.open(p.method,p.url,!0),"include"===p.credentials?g.withCredentials=!0:"omit"===p.credentials&&(g.withCredentials=!1),"responseType"in g&&i.blob&&(g.responseType="blob"),p.headers.forEach(function(r,i){g.setRequestHeader(i,r)}),p.signal&&(p.signal.addEventListener("abort",abortXhr),g.onreadystatechange=function(){4===g.readyState&&p.signal.removeEventListener("abort",abortXhr)}),g.send(void 0===p._bodyInit?null:p._bodyInit)})}fetch.polyfill=!0,u.fetch||(u.fetch=fetch,u.Headers=Headers,u.Request=Request,u.Response=Response),r.Headers=Headers,r.Request=Request,r.Response=Response,r.fetch=fetch,Object.defineProperty(r,"__esModule",{value:!0})})({}),u.fetch.ponyfill=!0,delete u.fetch.polyfill,(i=u.fetch).default=u.fetch,i.fetch=u.fetch,i.Headers=u.Headers,i.Request=u.Request,i.Response=u.Response,r.exports=i},44623:function(r){"use strict";r.exports=function(){throw Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},69859:function(){},72852:function(r,i,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0});let u=c(1812);u.__exportStar(c(53248),i),u.__exportStar(c(38520),i)},53248:function(r,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ONE_THOUSAND=i.ONE_HUNDRED=void 0,i.ONE_HUNDRED=100,i.ONE_THOUSAND=1e3},38520:function(r,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ONE_YEAR=i.FOUR_WEEKS=i.THREE_WEEKS=i.TWO_WEEKS=i.ONE_WEEK=i.THIRTY_DAYS=i.SEVEN_DAYS=i.FIVE_DAYS=i.THREE_DAYS=i.ONE_DAY=i.TWENTY_FOUR_HOURS=i.TWELVE_HOURS=i.SIX_HOURS=i.THREE_HOURS=i.ONE_HOUR=i.SIXTY_MINUTES=i.THIRTY_MINUTES=i.TEN_MINUTES=i.FIVE_MINUTES=i.ONE_MINUTE=i.SIXTY_SECONDS=i.THIRTY_SECONDS=i.TEN_SECONDS=i.FIVE_SECONDS=i.ONE_SECOND=void 0,i.ONE_SECOND=1,i.FIVE_SECONDS=5,i.TEN_SECONDS=10,i.THIRTY_SECONDS=30,i.SIXTY_SECONDS=60,i.ONE_MINUTE=i.SIXTY_SECONDS,i.FIVE_MINUTES=5*i.ONE_MINUTE,i.TEN_MINUTES=10*i.ONE_MINUTE,i.THIRTY_MINUTES=30*i.ONE_MINUTE,i.SIXTY_MINUTES=60*i.ONE_MINUTE,i.ONE_HOUR=i.SIXTY_MINUTES,i.THREE_HOURS=3*i.ONE_HOUR,i.SIX_HOURS=6*i.ONE_HOUR,i.TWELVE_HOURS=12*i.ONE_HOUR,i.TWENTY_FOUR_HOURS=24*i.ONE_HOUR,i.ONE_DAY=i.TWENTY_FOUR_HOURS,i.THREE_DAYS=3*i.ONE_DAY,i.FIVE_DAYS=5*i.ONE_DAY,i.SEVEN_DAYS=7*i.ONE_DAY,i.THIRTY_DAYS=30*i.ONE_DAY,i.ONE_WEEK=i.SEVEN_DAYS,i.TWO_WEEKS=2*i.ONE_WEEK,i.THREE_WEEKS=3*i.ONE_WEEK,i.FOUR_WEEKS=4*i.ONE_WEEK,i.ONE_YEAR=365*i.ONE_DAY},58619:function(r,i,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0});let u=c(1812);u.__exportStar(c(6954),i),u.__exportStar(c(91895),i),u.__exportStar(c(21087),i),u.__exportStar(c(72852),i)},21087:function(r,i,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0});let u=c(1812);u.__exportStar(c(36448),i)},36448:function(r,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.IWatch=void 0;let IWatch=class IWatch{};i.IWatch=IWatch},24810:function(r,i,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.fromMiliseconds=i.toMiliseconds=void 0;let u=c(72852);function toMiliseconds(r){return r*u.ONE_THOUSAND}function fromMiliseconds(r){return Math.floor(r/u.ONE_THOUSAND)}i.toMiliseconds=toMiliseconds,i.fromMiliseconds=fromMiliseconds},18995:function(r,i){"use strict";function delay(r){return new Promise(i=>{setTimeout(()=>{i(!0)},r)})}Object.defineProperty(i,"__esModule",{value:!0}),i.delay=void 0,i.delay=delay},6954:function(r,i,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0});let u=c(1812);u.__exportStar(c(18995),i),u.__exportStar(c(24810),i)},91895:function(r,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Watch=void 0;let Watch=class Watch{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){let i=this.get(r);if(void 0!==i.elapsed)throw Error(`Watch already stopped for label: ${r}`);let c=Date.now()-i.started;this.timestamps.set(r,{started:i.started,elapsed:c})}get(r){let i=this.timestamps.get(r);if(void 0===i)throw Error(`No timestamp found for label: ${r}`);return i}elapsed(r){let i=this.get(r),c=i.elapsed||Date.now()-i.started;return c}};i.Watch=Watch,i.default=Watch},1812:function(r,i,c){"use strict";c.r(i),c.d(i,{__assign:function(){return __assign},__asyncDelegator:function(){return __asyncDelegator},__asyncGenerator:function(){return __asyncGenerator},__asyncValues:function(){return __asyncValues},__await:function(){return __await},__awaiter:function(){return __awaiter},__classPrivateFieldGet:function(){return __classPrivateFieldGet},__classPrivateFieldSet:function(){return __classPrivateFieldSet},__createBinding:function(){return __createBinding},__decorate:function(){return __decorate},__exportStar:function(){return __exportStar},__extends:function(){return __extends},__generator:function(){return __generator},__importDefault:function(){return __importDefault},__importStar:function(){return __importStar},__makeTemplateObject:function(){return __makeTemplateObject},__metadata:function(){return __metadata},__param:function(){return __param},__read:function(){return __read},__rest:function(){return __rest},__spread:function(){return __spread},__spreadArrays:function(){return __spreadArrays},__values:function(){return __values}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(r,i){return(extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var c in i)i.hasOwnProperty(c)&&(r[c]=i[c])})(r,i)};function __extends(r,i){function __(){this.constructor=r}extendStatics(r,i),r.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function(r){for(var i,c=1,u=arguments.length;c<u;c++)for(var l in i=arguments[c])Object.prototype.hasOwnProperty.call(i,l)&&(r[l]=i[l]);return r}).apply(this,arguments)};function __rest(r,i){var c={};for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&0>i.indexOf(u)&&(c[u]=r[u]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,u=Object.getOwnPropertySymbols(r);l<u.length;l++)0>i.indexOf(u[l])&&Object.prototype.propertyIsEnumerable.call(r,u[l])&&(c[u[l]]=r[u[l]]);return c}function __decorate(r,i,c,u){var l,d=arguments.length,p=d<3?i:null===u?u=Object.getOwnPropertyDescriptor(i,c):u;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)p=Reflect.decorate(r,i,c,u);else for(var g=r.length-1;g>=0;g--)(l=r[g])&&(p=(d<3?l(p):d>3?l(i,c,p):l(i,c))||p);return d>3&&p&&Object.defineProperty(i,c,p),p}function __param(r,i){return function(c,u){i(c,u,r)}}function __metadata(r,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(r,i)}function __awaiter(r,i,c,u){function adopt(r){return r instanceof c?r:new c(function(i){i(r)})}return new(c||(c=Promise))(function(c,l){function fulfilled(r){try{step(u.next(r))}catch(r){l(r)}}function rejected(r){try{step(u.throw(r))}catch(r){l(r)}}function step(r){r.done?c(r.value):adopt(r.value).then(fulfilled,rejected)}step((u=u.apply(r,i||[])).next())})}function __generator(r,i){var c,u,l,d,p={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return d={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d;function verb(r){return function(i){return step([r,i])}}function step(d){if(c)throw TypeError("Generator is already executing.");for(;p;)try{if(c=1,u&&(l=2&d[0]?u.return:d[0]?u.throw||((l=u.return)&&l.call(u),0):u.next)&&!(l=l.call(u,d[1])).done)return l;switch(u=0,l&&(d=[2&d[0],l.value]),d[0]){case 0:case 1:l=d;break;case 4:return p.label++,{value:d[1],done:!1};case 5:p.label++,u=d[1],d=[0];continue;case 7:d=p.ops.pop(),p.trys.pop();continue;default:if(!(l=(l=p.trys).length>0&&l[l.length-1])&&(6===d[0]||2===d[0])){p=0;continue}if(3===d[0]&&(!l||d[1]>l[0]&&d[1]<l[3])){p.label=d[1];break}if(6===d[0]&&p.label<l[1]){p.label=l[1],l=d;break}if(l&&p.label<l[2]){p.label=l[2],p.ops.push(d);break}l[2]&&p.ops.pop(),p.trys.pop();continue}d=i.call(r,p)}catch(r){d=[6,r],u=0}finally{c=l=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function __createBinding(r,i,c,u){void 0===u&&(u=c),r[u]=i[c]}function __exportStar(r,i){for(var c in r)"default"===c||i.hasOwnProperty(c)||(i[c]=r[c])}function __values(r){var i="function"==typeof Symbol&&Symbol.iterator,c=i&&r[i],u=0;if(c)return c.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&u>=r.length&&(r=void 0),{value:r&&r[u++],done:!r}}};throw TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(r,i){var c="function"==typeof Symbol&&r[Symbol.iterator];if(!c)return r;var u,l,d=c.call(r),p=[];try{for(;(void 0===i||i-- >0)&&!(u=d.next()).done;)p.push(u.value)}catch(r){l={error:r}}finally{try{u&&!u.done&&(c=d.return)&&c.call(d)}finally{if(l)throw l.error}}return p}function __spread(){for(var r=[],i=0;i<arguments.length;i++)r=r.concat(__read(arguments[i]));return r}function __spreadArrays(){for(var r=0,i=0,c=arguments.length;i<c;i++)r+=arguments[i].length;for(var u=Array(r),l=0,i=0;i<c;i++)for(var d=arguments[i],p=0,g=d.length;p<g;p++,l++)u[l]=d[p];return u}function __await(r){return this instanceof __await?(this.v=r,this):new __await(r)}function __asyncGenerator(r,i,c){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var u,l=c.apply(r,i||[]),d=[];return u={},verb("next"),verb("throw"),verb("return"),u[Symbol.asyncIterator]=function(){return this},u;function verb(r){l[r]&&(u[r]=function(i){return new Promise(function(c,u){d.push([r,i,c,u])>1||resume(r,i)})})}function resume(r,i){try{step(l[r](i))}catch(r){settle(d[0][3],r)}}function step(r){r.value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):settle(d[0][2],r)}function fulfill(r){resume("next",r)}function reject(r){resume("throw",r)}function settle(r,i){r(i),d.shift(),d.length&&resume(d[0][0],d[0][1])}}function __asyncDelegator(r){var i,c;return i={},verb("next"),verb("throw",function(r){throw r}),verb("return"),i[Symbol.iterator]=function(){return this},i;function verb(u,l){i[u]=r[u]?function(i){return(c=!c)?{value:__await(r[u](i)),done:"return"===u}:l?l(i):i}:l}}function __asyncValues(r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,c=r[Symbol.asyncIterator];return c?c.call(r):(r=__values(r),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);function verb(c){i[c]=r[c]&&function(i){return new Promise(function(u,l){settle(u,l,(i=r[c](i)).done,i.value)})}}function settle(r,i,c,u){Promise.resolve(u).then(function(i){r({value:i,done:c})},i)}}function __makeTemplateObject(r,i){return Object.defineProperty?Object.defineProperty(r,"raw",{value:i}):r.raw=i,r}function __importStar(r){if(r&&r.__esModule)return r;var i={};if(null!=r)for(var c in r)Object.hasOwnProperty.call(r,c)&&(i[c]=r[c]);return i.default=r,i}function __importDefault(r){return r&&r.__esModule?r:{default:r}}function __classPrivateFieldGet(r,i){if(!i.has(r))throw TypeError("attempted to get private field on non-instance");return i.get(r)}function __classPrivateFieldSet(r,i,c){if(!i.has(r))throw TypeError("attempted to set private field on non-instance");return i.set(r,c),c}},849:function(r,i){"use strict";function getFromWindow(r){let i;return"undefined"!=typeof window&&void 0!==window[r]&&(i=window[r]),i}function getFromWindowOrThrow(r){let i=getFromWindow(r);if(!i)throw Error(`${r} is not defined in Window`);return i}function getDocumentOrThrow(){return getFromWindowOrThrow("document")}function getDocument(){return getFromWindow("document")}function getNavigatorOrThrow(){return getFromWindowOrThrow("navigator")}function getNavigator(){return getFromWindow("navigator")}function getLocationOrThrow(){return getFromWindowOrThrow("location")}function getLocation(){return getFromWindow("location")}function getCryptoOrThrow(){return getFromWindowOrThrow("crypto")}function getCrypto(){return getFromWindow("crypto")}function getLocalStorageOrThrow(){return getFromWindowOrThrow("localStorage")}function getLocalStorage(){return getFromWindow("localStorage")}Object.defineProperty(i,"__esModule",{value:!0}),i.getLocalStorage=i.getLocalStorageOrThrow=i.getCrypto=i.getCryptoOrThrow=i.getLocation=i.getLocationOrThrow=i.getNavigator=i.getNavigatorOrThrow=i.getDocument=i.getDocumentOrThrow=i.getFromWindowOrThrow=i.getFromWindow=void 0,i.getFromWindow=getFromWindow,i.getFromWindowOrThrow=getFromWindowOrThrow,i.getDocumentOrThrow=getDocumentOrThrow,i.getDocument=getDocument,i.getNavigatorOrThrow=getNavigatorOrThrow,i.getNavigator=getNavigator,i.getLocationOrThrow=getLocationOrThrow,i.getLocation=getLocation,i.getCryptoOrThrow=getCryptoOrThrow,i.getCrypto=getCrypto,i.getLocalStorageOrThrow=getLocalStorageOrThrow,i.getLocalStorage=getLocalStorage},36073:function(r,i,c){"use strict";i.D=void 0;let u=c(849);function getWindowMetadata(){let r,i;try{r=u.getDocumentOrThrow(),i=u.getLocationOrThrow()}catch(r){return null}function getIcons(){let c=r.getElementsByTagName("link"),u=[];for(let r=0;r<c.length;r++){let l=c[r],d=l.getAttribute("rel");if(d&&d.toLowerCase().indexOf("icon")>-1){let r=l.getAttribute("href");if(r){if(-1===r.toLowerCase().indexOf("https:")&&-1===r.toLowerCase().indexOf("http:")&&0!==r.indexOf("//")){let c=i.protocol+"//"+i.host;if(0===r.indexOf("/"))c+=r;else{let u=i.pathname.split("/");u.pop();let l=u.join("/");c+=l+"/"+r}u.push(c)}else if(0===r.indexOf("//")){let c=i.protocol+r;u.push(c)}else u.push(r)}}}return u}function getWindowMetadataOfAny(...i){let c=r.getElementsByTagName("meta");for(let r=0;r<c.length;r++){let u=c[r],l=["itemprop","property","name"].map(r=>u.getAttribute(r)).filter(r=>!!r&&i.includes(r));if(l.length&&l){let r=u.getAttribute("content");if(r)return r}}return""}function getName(){let i=getWindowMetadataOfAny("name","og:site_name","og:title","twitter:title");return i||(i=r.title),i}function getDescription(){let r=getWindowMetadataOfAny("description","og:description","twitter:description","keywords");return r}let c=getName(),l=getDescription(),d=i.origin,p=getIcons();return{description:l,url:d,icons:p,name:c}}i.D=getWindowMetadata},58005:function(r){"use strict";var i="%[a-f0-9]{2}",c=RegExp("("+i+")|([^%]+?)","gi"),u=RegExp("("+i+")+","gi");function decodeComponents(r,i){try{return[decodeURIComponent(r.join(""))]}catch(r){}if(1===r.length)return r;i=i||1;var c=r.slice(0,i),u=r.slice(i);return Array.prototype.concat.call([],decodeComponents(c),decodeComponents(u))}function decode(r){try{return decodeURIComponent(r)}catch(l){for(var i=r.match(c)||[],u=1;u<i.length;u++)i=(r=decodeComponents(i,u).join("")).match(c)||[];return r}}function customDecodeURIComponent(r){for(var i={"%FE%FF":"��","%FF%FE":"��"},c=u.exec(r);c;){try{i[c[0]]=decodeURIComponent(c[0])}catch(r){var l=decode(c[0]);l!==c[0]&&(i[c[0]]=l)}c=u.exec(r)}i["%C2"]="�";for(var d=Object.keys(i),p=0;p<d.length;p++){var g=d[p];r=r.replace(RegExp(g,"g"),i[g])}return r}r.exports=function(r){if("string"!=typeof r)throw TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof r+"`");try{return r=r.replace(/\+/g," "),decodeURIComponent(r)}catch(i){return customDecodeURIComponent(r)}}},512:function(r){"use strict";var i,c="object"==typeof Reflect?Reflect:null,u=c&&"function"==typeof c.apply?c.apply:function(r,i,c){return Function.prototype.apply.call(r,i,c)};function ProcessEmitWarning(r){console&&console.warn&&console.warn(r)}i=c&&"function"==typeof c.ownKeys?c.ownKeys:Object.getOwnPropertySymbols?function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:function(r){return Object.getOwnPropertyNames(r)};var l=Number.isNaN||function(r){return r!=r};function EventEmitter(){EventEmitter.init.call(this)}r.exports=EventEmitter,r.exports.once=once,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._eventsCount=0,EventEmitter.prototype._maxListeners=void 0;var d=10;function checkListener(r){if("function"!=typeof r)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}function _getMaxListeners(r){return void 0===r._maxListeners?EventEmitter.defaultMaxListeners:r._maxListeners}function _addListener(r,i,c,u){if(checkListener(c),void 0===(d=r._events)?(d=r._events=Object.create(null),r._eventsCount=0):(void 0!==d.newListener&&(r.emit("newListener",i,c.listener?c.listener:c),d=r._events),p=d[i]),void 0===p)p=d[i]=c,++r._eventsCount;else if("function"==typeof p?p=d[i]=u?[c,p]:[p,c]:u?p.unshift(c):p.push(c),(l=_getMaxListeners(r))>0&&p.length>l&&!p.warned){p.warned=!0;var l,d,p,g=Error("Possible EventEmitter memory leak detected. "+p.length+" "+String(i)+" listeners added. Use emitter.setMaxListeners() to increase limit");g.name="MaxListenersExceededWarning",g.emitter=r,g.type=i,g.count=p.length,ProcessEmitWarning(g)}return r}function onceWrapper(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(r,i,c){var u={fired:!1,wrapFn:void 0,target:r,type:i,listener:c},l=onceWrapper.bind(u);return l.listener=c,u.wrapFn=l,l}function _listeners(r,i,c){var u=r._events;if(void 0===u)return[];var l=u[i];return void 0===l?[]:"function"==typeof l?c?[l.listener||l]:[l]:c?unwrapListeners(l):arrayClone(l,l.length)}function listenerCount(r){var i=this._events;if(void 0!==i){var c=i[r];if("function"==typeof c)return 1;if(void 0!==c)return c.length}return 0}function arrayClone(r,i){for(var c=Array(i),u=0;u<i;++u)c[u]=r[u];return c}function spliceOne(r,i){for(;i+1<r.length;i++)r[i]=r[i+1];r.pop()}function unwrapListeners(r){for(var i=Array(r.length),c=0;c<i.length;++c)i[c]=r[c].listener||r[c];return i}function once(r,i){return new Promise(function(c,u){function errorListener(c){r.removeListener(i,resolver),u(c)}function resolver(){"function"==typeof r.removeListener&&r.removeListener("error",errorListener),c([].slice.call(arguments))}eventTargetAgnosticAddListener(r,i,resolver,{once:!0}),"error"!==i&&addErrorHandlerIfEventEmitter(r,errorListener,{once:!0})})}function addErrorHandlerIfEventEmitter(r,i,c){"function"==typeof r.on&&eventTargetAgnosticAddListener(r,"error",i,c)}function eventTargetAgnosticAddListener(r,i,c,u){if("function"==typeof r.on)u.once?r.once(i,c):r.on(i,c);else if("function"==typeof r.addEventListener)r.addEventListener(i,function wrapListener(l){u.once&&r.removeEventListener(i,wrapListener),c(l)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return d},set:function(r){if("number"!=typeof r||r<0||l(r))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");d=r}}),EventEmitter.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},EventEmitter.prototype.setMaxListeners=function(r){if("number"!=typeof r||r<0||l(r))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+r+".");return this._maxListeners=r,this},EventEmitter.prototype.getMaxListeners=function(){return _getMaxListeners(this)},EventEmitter.prototype.emit=function(r){for(var i=[],c=1;c<arguments.length;c++)i.push(arguments[c]);var l="error"===r,d=this._events;if(void 0!==d)l=l&&void 0===d.error;else if(!l)return!1;if(l){if(i.length>0&&(p=i[0]),p instanceof Error)throw p;var p,g=Error("Unhandled error."+(p?" ("+p.message+")":""));throw g.context=p,g}var _=d[r];if(void 0===_)return!1;if("function"==typeof _)u(_,this,i);else for(var w=_.length,S=arrayClone(_,w),c=0;c<w;++c)u(S[c],this,i);return!0},EventEmitter.prototype.addListener=function(r,i){return _addListener(this,r,i,!1)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.prependListener=function(r,i){return _addListener(this,r,i,!0)},EventEmitter.prototype.once=function(r,i){return checkListener(i),this.on(r,_onceWrap(this,r,i)),this},EventEmitter.prototype.prependOnceListener=function(r,i){return checkListener(i),this.prependListener(r,_onceWrap(this,r,i)),this},EventEmitter.prototype.removeListener=function(r,i){var c,u,l,d,p;if(checkListener(i),void 0===(u=this._events)||void 0===(c=u[r]))return this;if(c===i||c.listener===i)0==--this._eventsCount?this._events=Object.create(null):(delete u[r],u.removeListener&&this.emit("removeListener",r,c.listener||i));else if("function"!=typeof c){for(l=-1,d=c.length-1;d>=0;d--)if(c[d]===i||c[d].listener===i){p=c[d].listener,l=d;break}if(l<0)return this;0===l?c.shift():spliceOne(c,l),1===c.length&&(u[r]=c[0]),void 0!==u.removeListener&&this.emit("removeListener",r,p||i)}return this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.removeAllListeners=function(r){var i,c,u;if(void 0===(c=this._events))return this;if(void 0===c.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==c[r]&&(0==--this._eventsCount?this._events=Object.create(null):delete c[r]),this;if(0==arguments.length){var l,d=Object.keys(c);for(u=0;u<d.length;++u)"removeListener"!==(l=d[u])&&this.removeAllListeners(l);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(i=c[r]))this.removeListener(r,i);else if(void 0!==i)for(u=i.length-1;u>=0;u--)this.removeListener(r,i[u]);return this},EventEmitter.prototype.listeners=function(r){return _listeners(this,r,!0)},EventEmitter.prototype.rawListeners=function(r){return _listeners(this,r,!1)},EventEmitter.listenerCount=function(r,i){return"function"==typeof r.listenerCount?r.listenerCount(i):listenerCount.call(r,i)},EventEmitter.prototype.listenerCount=listenerCount,EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},61820:function(r){"use strict";r.exports=function(r,i){for(var c={},u=Object.keys(r),l=Array.isArray(i),d=0;d<u.length;d++){var p=u[d],g=r[p];(l?-1!==i.indexOf(p):i(p,g,r))&&(c[p]=g)}return c}},99780:function(r,i,c){r=c.nmd(r);var u,l="__lodash_hash_undefined__",d="[object Arguments]",p="[object Array]",g="[object Boolean]",_="[object Date]",w="[object Error]",S="[object Function]",P="[object Map]",C="[object Number]",L="[object Object]",k="[object Promise]",q="[object RegExp]",z="[object Set]",J="[object String]",Q="[object WeakMap]",X="[object ArrayBuffer]",et="[object DataView]",eo=/^\[object .+?Constructor\]$/,ep=/^(?:0|[1-9]\d*)$/,e_={};e_["[object Float32Array]"]=e_["[object Float64Array]"]=e_["[object Int8Array]"]=e_["[object Int16Array]"]=e_["[object Int32Array]"]=e_["[object Uint8Array]"]=e_["[object Uint8ClampedArray]"]=e_["[object Uint16Array]"]=e_["[object Uint32Array]"]=!0,e_[d]=e_[p]=e_[X]=e_[g]=e_[et]=e_[_]=e_[w]=e_[S]=e_[P]=e_[C]=e_[L]=e_[q]=e_[z]=e_[J]=e_[Q]=!1;var ey="object"==typeof c.g&&c.g&&c.g.Object===Object&&c.g,em="object"==typeof self&&self&&self.Object===Object&&self,eb=ey||em||Function("return this")(),ew=i&&!i.nodeType&&i,eE=ew&&r&&!r.nodeType&&r,ex=eE&&eE.exports===ew,eS=ex&&ey.process,eD=function(){try{return eS&&eS.binding&&eS.binding("util")}catch(r){}}(),eI=eD&&eD.isTypedArray;function arrayFilter(r,i){for(var c=-1,u=null==r?0:r.length,l=0,d=[];++c<u;){var p=r[c];i(p,c,r)&&(d[l++]=p)}return d}function arrayPush(r,i){for(var c=-1,u=i.length,l=r.length;++c<u;)r[l+c]=i[c];return r}function arraySome(r,i){for(var c=-1,u=null==r?0:r.length;++c<u;)if(i(r[c],c,r))return!0;return!1}function baseTimes(r,i){for(var c=-1,u=Array(r);++c<r;)u[c]=i(c);return u}function baseUnary(r){return function(i){return r(i)}}function cacheHas(r,i){return r.has(i)}function getValue(r,i){return null==r?void 0:r[i]}function mapToArray(r){var i=-1,c=Array(r.size);return r.forEach(function(r,u){c[++i]=[u,r]}),c}function overArg(r,i){return function(c){return r(i(c))}}function setToArray(r){var i=-1,c=Array(r.size);return r.forEach(function(r){c[++i]=r}),c}var eO=Array.prototype,eP=Function.prototype,eC=Object.prototype,eA=eb["__core-js_shared__"],eR=eP.toString,eN=eC.hasOwnProperty,eT=(u=/[^.]+$/.exec(eA&&eA.keys&&eA.keys.IE_PROTO||""))?"Symbol(src)_1."+u:"",ej=eC.toString,eU=RegExp("^"+eR.call(eN).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),eL=ex?eb.Buffer:void 0,ek=eb.Symbol,eM=eb.Uint8Array,ez=eC.propertyIsEnumerable,eH=eO.splice,e$=ek?ek.toStringTag:void 0,eB=Object.getOwnPropertySymbols,eF=eL?eL.isBuffer:void 0,eK=overArg(Object.keys,Object),eV=getNative(eb,"DataView"),eW=getNative(eb,"Map"),eG=getNative(eb,"Promise"),eJ=getNative(eb,"Set"),eY=getNative(eb,"WeakMap"),eQ=getNative(Object,"create"),eZ=toSource(eV),eX=toSource(eW),e0=toSource(eG),e1=toSource(eJ),e5=toSource(eY),e3=ek?ek.prototype:void 0,e2=e3?e3.valueOf:void 0;function Hash(r){var i=-1,c=null==r?0:r.length;for(this.clear();++i<c;){var u=r[i];this.set(u[0],u[1])}}function hashClear(){this.__data__=eQ?eQ(null):{},this.size=0}function hashDelete(r){var i=this.has(r)&&delete this.__data__[r];return this.size-=i?1:0,i}function hashGet(r){var i=this.__data__;if(eQ){var c=i[r];return c===l?void 0:c}return eN.call(i,r)?i[r]:void 0}function hashHas(r){var i=this.__data__;return eQ?void 0!==i[r]:eN.call(i,r)}function hashSet(r,i){var c=this.__data__;return this.size+=this.has(r)?0:1,c[r]=eQ&&void 0===i?l:i,this}function ListCache(r){var i=-1,c=null==r?0:r.length;for(this.clear();++i<c;){var u=r[i];this.set(u[0],u[1])}}function listCacheClear(){this.__data__=[],this.size=0}function listCacheDelete(r){var i=this.__data__,c=assocIndexOf(i,r);return!(c<0)&&(c==i.length-1?i.pop():eH.call(i,c,1),--this.size,!0)}function listCacheGet(r){var i=this.__data__,c=assocIndexOf(i,r);return c<0?void 0:i[c][1]}function listCacheHas(r){return assocIndexOf(this.__data__,r)>-1}function listCacheSet(r,i){var c=this.__data__,u=assocIndexOf(c,r);return u<0?(++this.size,c.push([r,i])):c[u][1]=i,this}function MapCache(r){var i=-1,c=null==r?0:r.length;for(this.clear();++i<c;){var u=r[i];this.set(u[0],u[1])}}function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(eW||ListCache),string:new Hash}}function mapCacheDelete(r){var i=getMapData(this,r).delete(r);return this.size-=i?1:0,i}function mapCacheGet(r){return getMapData(this,r).get(r)}function mapCacheHas(r){return getMapData(this,r).has(r)}function mapCacheSet(r,i){var c=getMapData(this,r),u=c.size;return c.set(r,i),this.size+=c.size==u?0:1,this}function SetCache(r){var i=-1,c=null==r?0:r.length;for(this.__data__=new MapCache;++i<c;)this.add(r[i])}function setCacheAdd(r){return this.__data__.set(r,l),this}function setCacheHas(r){return this.__data__.has(r)}function Stack(r){var i=this.__data__=new ListCache(r);this.size=i.size}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(r){var i=this.__data__,c=i.delete(r);return this.size=i.size,c}function stackGet(r){return this.__data__.get(r)}function stackHas(r){return this.__data__.has(r)}function stackSet(r,i){var c=this.__data__;if(c instanceof ListCache){var u=c.__data__;if(!eW||u.length<199)return u.push([r,i]),this.size=++c.size,this;c=this.__data__=new MapCache(u)}return c.set(r,i),this.size=c.size,this}function arrayLikeKeys(r,i){var c=e9(r),u=!c&&e4(r),l=!c&&!u&&e7(r),d=!c&&!u&&!l&&tn(r),p=c||u||l||d,g=p?baseTimes(r.length,String):[],_=g.length;for(var w in r)(i||eN.call(r,w))&&!(p&&("length"==w||l&&("offset"==w||"parent"==w)||d&&("buffer"==w||"byteLength"==w||"byteOffset"==w)||isIndex(w,_)))&&g.push(w);return g}function assocIndexOf(r,i){for(var c=r.length;c--;)if(eq(r[c][0],i))return c;return -1}function baseGetAllKeys(r,i,c){var u=i(r);return e9(r)?u:arrayPush(u,c(r))}function baseGetTag(r){return null==r?void 0===r?"[object Undefined]":"[object Null]":e$&&e$ in Object(r)?getRawTag(r):objectToString(r)}function baseIsArguments(r){return isObjectLike(r)&&baseGetTag(r)==d}function baseIsEqual(r,i,c,u,l){return r===i||(null!=r&&null!=i&&(isObjectLike(r)||isObjectLike(i))?baseIsEqualDeep(r,i,c,u,baseIsEqual,l):r!=r&&i!=i)}function baseIsEqualDeep(r,i,c,u,l,g){var _=e9(r),w=e9(i),S=_?p:e8(r),P=w?p:e8(i);S=S==d?L:S,P=P==d?L:P;var C=S==L,k=P==L,q=S==P;if(q&&e7(r)){if(!e7(i))return!1;_=!0,C=!1}if(q&&!C)return g||(g=new Stack),_||tn(r)?equalArrays(r,i,c,u,l,g):equalByTag(r,i,S,c,u,l,g);if(!(1&c)){var z=C&&eN.call(r,"__wrapped__"),J=k&&eN.call(i,"__wrapped__");if(z||J){var Q=z?r.value():r,X=J?i.value():i;return g||(g=new Stack),l(Q,X,c,u,g)}}return!!q&&(g||(g=new Stack),equalObjects(r,i,c,u,l,g))}function baseIsNative(r){return!(!isObject(r)||isMasked(r))&&(isFunction(r)?eU:eo).test(toSource(r))}function baseIsTypedArray(r){return isObjectLike(r)&&isLength(r.length)&&!!e_[baseGetTag(r)]}function baseKeys(r){if(!isPrototype(r))return eK(r);var i=[];for(var c in Object(r))eN.call(r,c)&&"constructor"!=c&&i.push(c);return i}function equalArrays(r,i,c,u,l,d){var p=1&c,g=r.length,_=i.length;if(g!=_&&!(p&&_>g))return!1;var w=d.get(r);if(w&&d.get(i))return w==i;var S=-1,P=!0,C=2&c?new SetCache:void 0;for(d.set(r,i),d.set(i,r);++S<g;){var L=r[S],k=i[S];if(u)var q=p?u(k,L,S,i,r,d):u(L,k,S,r,i,d);if(void 0!==q){if(q)continue;P=!1;break}if(C){if(!arraySome(i,function(r,i){if(!cacheHas(C,i)&&(L===r||l(L,r,c,u,d)))return C.push(i)})){P=!1;break}}else if(!(L===k||l(L,k,c,u,d))){P=!1;break}}return d.delete(r),d.delete(i),P}function equalByTag(r,i,c,u,l,d,p){switch(c){case et:if(r.byteLength!=i.byteLength||r.byteOffset!=i.byteOffset)break;r=r.buffer,i=i.buffer;case X:if(r.byteLength!=i.byteLength||!d(new eM(r),new eM(i)))break;return!0;case g:case _:case C:return eq(+r,+i);case w:return r.name==i.name&&r.message==i.message;case q:case J:return r==i+"";case P:var S=mapToArray;case z:var L=1&u;if(S||(S=setToArray),r.size!=i.size&&!L)break;var k=p.get(r);if(k)return k==i;u|=2,p.set(r,i);var Q=equalArrays(S(r),S(i),u,l,d,p);return p.delete(r),Q;case"[object Symbol]":if(e2)return e2.call(r)==e2.call(i)}return!1}function equalObjects(r,i,c,u,l,d){var p=1&c,g=baseGetAllKeys(r,keys,e6),_=g.length;if(_!=baseGetAllKeys(i,keys,e6).length&&!p)return!1;for(var w=_;w--;){var S=g[w];if(!(p?S in i:eN.call(i,S)))return!1}var P=d.get(r);if(P&&d.get(i))return P==i;var C=!0;d.set(r,i),d.set(i,r);for(var L=p;++w<_;){var k=r[S=g[w]],q=i[S];if(u)var z=p?u(q,k,S,i,r,d):u(k,q,S,r,i,d);if(!(void 0===z?k===q||l(k,q,c,u,d):z)){C=!1;break}L||(L="constructor"==S)}if(C&&!L){var J=r.constructor,Q=i.constructor;J!=Q&&"constructor"in r&&"constructor"in i&&!("function"==typeof J&&J instanceof J&&"function"==typeof Q&&Q instanceof Q)&&(C=!1)}return d.delete(r),d.delete(i),C}function getMapData(r,i){var c=r.__data__;return isKeyable(i)?c["string"==typeof i?"string":"hash"]:c.map}function getNative(r,i){var c=getValue(r,i);return baseIsNative(c)?c:void 0}function getRawTag(r){var i=eN.call(r,e$),c=r[e$];try{r[e$]=void 0;var u=!0}catch(r){}var l=ej.call(r);return u&&(i?r[e$]=c:delete r[e$]),l}Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet,SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas,Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet;var e6=eB?function(r){return null==r?[]:arrayFilter(eB(r=Object(r)),function(i){return ez.call(r,i)})}:stubArray,e8=baseGetTag;function isIndex(r,i){return!!(i=null==i?9007199254740991:i)&&("number"==typeof r||ep.test(r))&&r>-1&&r%1==0&&r<i}function isKeyable(r){var i=typeof r;return"string"==i||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==r:null===r}function isMasked(r){return!!eT&&eT in r}function isPrototype(r){var i=r&&r.constructor;return r===("function"==typeof i&&i.prototype||eC)}function objectToString(r){return ej.call(r)}function toSource(r){if(null!=r){try{return eR.call(r)}catch(r){}try{return r+""}catch(r){}}return""}function eq(r,i){return r===i||r!=r&&i!=i}(eV&&e8(new eV(new ArrayBuffer(1)))!=et||eW&&e8(new eW)!=P||eG&&e8(eG.resolve())!=k||eJ&&e8(new eJ)!=z||eY&&e8(new eY)!=Q)&&(e8=function(r){var i=baseGetTag(r),c=i==L?r.constructor:void 0,u=c?toSource(c):"";if(u)switch(u){case eZ:return et;case eX:return P;case e0:return k;case e1:return z;case e5:return Q}return i});var e4=baseIsArguments(function(){return arguments}())?baseIsArguments:function(r){return isObjectLike(r)&&eN.call(r,"callee")&&!ez.call(r,"callee")},e9=Array.isArray;function isArrayLike(r){return null!=r&&isLength(r.length)&&!isFunction(r)}var e7=eF||stubFalse;function isEqual(r,i){return baseIsEqual(r,i)}function isFunction(r){if(!isObject(r))return!1;var i=baseGetTag(r);return i==S||"[object GeneratorFunction]"==i||"[object AsyncFunction]"==i||"[object Proxy]"==i}function isLength(r){return"number"==typeof r&&r>-1&&r%1==0&&r<=9007199254740991}function isObject(r){var i=typeof r;return null!=r&&("object"==i||"function"==i)}function isObjectLike(r){return null!=r&&"object"==typeof r}var tn=eI?baseUnary(eI):baseIsTypedArray;function keys(r){return isArrayLike(r)?arrayLikeKeys(r):baseKeys(r)}function stubArray(){return[]}function stubFalse(){return!1}r.exports=isEqual},31935:function(r){"use strict";let i=self.fetch.bind(self);r.exports=i,r.exports.default=r.exports},89291:function(r,i,c){"use strict";let u=c(67116),l=c(58005),d=c(34470),p=c(61820),isNullOrUndefined=r=>null==r,g=Symbol("encodeFragmentIdentifier");function encoderForArrayFormat(r){switch(r.arrayFormat){case"index":return i=>(c,u)=>{let l=c.length;return void 0===u||r.skipNull&&null===u||r.skipEmptyString&&""===u?c:null===u?[...c,[encode(i,r),"[",l,"]"].join("")]:[...c,[encode(i,r),"[",encode(l,r),"]=",encode(u,r)].join("")]};case"bracket":return i=>(c,u)=>void 0===u||r.skipNull&&null===u||r.skipEmptyString&&""===u?c:null===u?[...c,[encode(i,r),"[]"].join("")]:[...c,[encode(i,r),"[]=",encode(u,r)].join("")];case"colon-list-separator":return i=>(c,u)=>void 0===u||r.skipNull&&null===u||r.skipEmptyString&&""===u?c:null===u?[...c,[encode(i,r),":list="].join("")]:[...c,[encode(i,r),":list=",encode(u,r)].join("")];case"comma":case"separator":case"bracket-separator":{let i="bracket-separator"===r.arrayFormat?"[]=":"=";return c=>(u,l)=>void 0===l||r.skipNull&&null===l||r.skipEmptyString&&""===l?u:(l=null===l?"":l,0===u.length)?[[encode(c,r),i,encode(l,r)].join("")]:[[u,encode(l,r)].join(r.arrayFormatSeparator)]}default:return i=>(c,u)=>void 0===u||r.skipNull&&null===u||r.skipEmptyString&&""===u?c:null===u?[...c,encode(i,r)]:[...c,[encode(i,r),"=",encode(u,r)].join("")]}}function parserForArrayFormat(r){let i;switch(r.arrayFormat){case"index":return(r,c,u)=>{if(i=/\[(\d*)\]$/.exec(r),r=r.replace(/\[\d*\]$/,""),!i){u[r]=c;return}void 0===u[r]&&(u[r]={}),u[r][i[1]]=c};case"bracket":return(r,c,u)=>{if(i=/(\[\])$/.exec(r),r=r.replace(/\[\]$/,""),!i){u[r]=c;return}if(void 0===u[r]){u[r]=[c];return}u[r]=[].concat(u[r],c)};case"colon-list-separator":return(r,c,u)=>{if(i=/(:list)$/.exec(r),r=r.replace(/:list$/,""),!i){u[r]=c;return}if(void 0===u[r]){u[r]=[c];return}u[r]=[].concat(u[r],c)};case"comma":case"separator":return(i,c,u)=>{let l="string"==typeof c&&c.includes(r.arrayFormatSeparator),d="string"==typeof c&&!l&&decode(c,r).includes(r.arrayFormatSeparator);c=d?decode(c,r):c;let p=l||d?c.split(r.arrayFormatSeparator).map(i=>decode(i,r)):null===c?c:decode(c,r);u[i]=p};case"bracket-separator":return(i,c,u)=>{let l=/(\[\])$/.test(i);if(i=i.replace(/\[\]$/,""),!l){u[i]=c?decode(c,r):c;return}let d=null===c?[]:c.split(r.arrayFormatSeparator).map(i=>decode(i,r));if(void 0===u[i]){u[i]=d;return}u[i]=[].concat(u[i],d)};default:return(r,i,c)=>{if(void 0===c[r]){c[r]=i;return}c[r]=[].concat(c[r],i)}}}function validateArrayFormatSeparator(r){if("string"!=typeof r||1!==r.length)throw TypeError("arrayFormatSeparator must be single character string")}function encode(r,i){return i.encode?i.strict?u(r):encodeURIComponent(r):r}function decode(r,i){return i.decode?l(r):r}function keysSorter(r){return Array.isArray(r)?r.sort():"object"==typeof r?keysSorter(Object.keys(r)).sort((r,i)=>Number(r)-Number(i)).map(i=>r[i]):r}function removeHash(r){let i=r.indexOf("#");return -1!==i&&(r=r.slice(0,i)),r}function getHash(r){let i="",c=r.indexOf("#");return -1!==c&&(i=r.slice(c)),i}function extract(r){r=removeHash(r);let i=r.indexOf("?");return -1===i?"":r.slice(i+1)}function parseValue(r,i){return i.parseNumbers&&!Number.isNaN(Number(r))&&"string"==typeof r&&""!==r.trim()?r=Number(r):i.parseBooleans&&null!==r&&("true"===r.toLowerCase()||"false"===r.toLowerCase())&&(r="true"===r.toLowerCase()),r}function parse(r,i){validateArrayFormatSeparator((i=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},i)).arrayFormatSeparator);let c=parserForArrayFormat(i),u=Object.create(null);if("string"!=typeof r||!(r=r.trim().replace(/^[?#&]/,"")))return u;for(let l of r.split("&")){if(""===l)continue;let[r,p]=d(i.decode?l.replace(/\+/g," "):l,"=");p=void 0===p?null:["comma","separator","bracket-separator"].includes(i.arrayFormat)?p:decode(p,i),c(decode(r,i),p,u)}for(let r of Object.keys(u)){let c=u[r];if("object"==typeof c&&null!==c)for(let r of Object.keys(c))c[r]=parseValue(c[r],i);else u[r]=parseValue(c,i)}return!1===i.sort?u:(!0===i.sort?Object.keys(u).sort():Object.keys(u).sort(i.sort)).reduce((r,i)=>{let c=u[i];return c&&"object"==typeof c&&!Array.isArray(c)?r[i]=keysSorter(c):r[i]=c,r},Object.create(null))}i.extract=extract,i.parse=parse,i.stringify=(r,i)=>{if(!r)return"";validateArrayFormatSeparator((i=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},i)).arrayFormatSeparator);let shouldFilter=c=>i.skipNull&&isNullOrUndefined(r[c])||i.skipEmptyString&&""===r[c],c=encoderForArrayFormat(i),u={};for(let i of Object.keys(r))shouldFilter(i)||(u[i]=r[i]);let l=Object.keys(u);return!1!==i.sort&&l.sort(i.sort),l.map(u=>{let l=r[u];return void 0===l?"":null===l?encode(u,i):Array.isArray(l)?0===l.length&&"bracket-separator"===i.arrayFormat?encode(u,i)+"[]":l.reduce(c(u),[]).join("&"):encode(u,i)+"="+encode(l,i)}).filter(r=>r.length>0).join("&")},i.parseUrl=(r,i)=>{i=Object.assign({decode:!0},i);let[c,u]=d(r,"#");return Object.assign({url:c.split("?")[0]||"",query:parse(extract(r),i)},i&&i.parseFragmentIdentifier&&u?{fragmentIdentifier:decode(u,i)}:{})},i.stringifyUrl=(r,c)=>{c=Object.assign({encode:!0,strict:!0,[g]:!0},c);let u=removeHash(r.url).split("?")[0]||"",l=i.extract(r.url),d=i.parse(l,{sort:!1}),p=Object.assign(d,r.query),_=i.stringify(p,c);_&&(_=`?${_}`);let w=getHash(r.url);return r.fragmentIdentifier&&(w=`#${c[g]?encode(r.fragmentIdentifier,c):r.fragmentIdentifier}`),`${u}${_}${w}`},i.pick=(r,c,u)=>{u=Object.assign({parseFragmentIdentifier:!0,[g]:!1},u);let{url:l,query:d,fragmentIdentifier:_}=i.parseUrl(r,u);return i.stringifyUrl({url:l,query:p(d,c),fragmentIdentifier:_},u)},i.exclude=(r,c,u)=>{let l=Array.isArray(c)?r=>!c.includes(r):(r,i)=>!c(r,i);return i.pick(r,l,u)}},45503:function(r){"use strict";function tryStringify(r){try{return JSON.stringify(r)}catch(r){return'"[Circular]"'}}function format(r,i,c){var u=c&&c.stringify||tryStringify;if("object"==typeof r&&null!==r){var l=i.length+1;if(1===l)return r;var d=Array(l);d[0]=u(r);for(var p=1;p<l;p++)d[p]=u(i[p]);return d.join(" ")}if("string"!=typeof r)return r;var g=i.length;if(0===g)return r;for(var _="",w=0,S=-1,P=r&&r.length||0,C=0;C<P;){if(37===r.charCodeAt(C)&&C+1<P){switch(S=S>-1?S:0,r.charCodeAt(C+1)){case 100:case 102:if(w>=g||null==i[w])break;S<C&&(_+=r.slice(S,C)),_+=Number(i[w]),S=C+2,C++;break;case 105:if(w>=g||null==i[w])break;S<C&&(_+=r.slice(S,C)),_+=Math.floor(Number(i[w])),S=C+2,C++;break;case 79:case 111:case 106:if(w>=g||void 0===i[w])break;S<C&&(_+=r.slice(S,C));var L=typeof i[w];if("string"===L){_+="'"+i[w]+"'",S=C+2,C++;break}if("function"===L){_+=i[w].name||"<anonymous>",S=C+2,C++;break}_+=u(i[w]),S=C+2,C++;break;case 115:if(w>=g)break;S<C&&(_+=r.slice(S,C)),_+=String(i[w]),S=C+2,C++;break;case 37:S<C&&(_+=r.slice(S,C)),_+="%",S=C+2,C++,w--}++w}++C}return -1===S?r:(S<P&&(_+=r.slice(S)),_)}r.exports=format},34470:function(r){"use strict";r.exports=(r,i)=>{if(!("string"==typeof r&&"string"==typeof i))throw TypeError("Expected the arguments to be of type `string`");if(""===i)return[r];let c=r.indexOf(i);return -1===c?[r]:[r.slice(0,c),r.slice(c+i.length)]}},67116:function(r){"use strict";r.exports=r=>encodeURIComponent(r).replace(/[!'()*]/g,r=>`%${r.charCodeAt(0).toString(16).toUpperCase()}`)},90440:function(r,i,c){"use strict";let u=c(45503);r.exports=pino;let l=pfGlobalThisOrFallback().console||{};function shouldSerialize(r,i){if(Array.isArray(r)){let i=r.filter(function(r){return"!stdSerializers.err"!==r});return i}return!0===r&&Object.keys(i)}function pino(r){(r=r||{}).browser=r.browser||{};let i=r.browser.transmit;if(i&&"function"!=typeof i.send)throw Error("pino: transmit option must have a send function");let c=r.browser.write||l;r.browser.write&&(r.browser.asObject=!0);let u=r.serializers||{},d=shouldSerialize(r.browser.serialize,u),p=r.browser.serialize;Array.isArray(r.browser.serialize)&&r.browser.serialize.indexOf("!stdSerializers.err")>-1&&(p=!1),"function"==typeof c&&(c.error=c.fatal=c.warn=c.info=c.debug=c.trace=c),!1===r.enabled&&(r.level="silent");let g=r.level||"info",_=Object.create(c);_.log||(_.log=noop),Object.defineProperty(_,"levelVal",{get:getLevelVal}),Object.defineProperty(_,"level",{get:getLevel,set:setLevel});let w={transmit:i,serialize:d,asObject:r.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:getTimeFunction(r)};function getLevelVal(){return"silent"===this.level?1/0:this.levels.values[this.level]}function getLevel(){return this._level}function setLevel(r){if("silent"!==r&&!this.levels.values[r])throw Error("unknown level "+r);this._level=r,set(w,_,"error","log"),set(w,_,"fatal","error"),set(w,_,"warn","error"),set(w,_,"info","log"),set(w,_,"debug","log"),set(w,_,"trace","log")}function child(c,l){if(!c)throw Error("missing bindings for child Pino");l=l||{},d&&c.serializers&&(l.serializers=c.serializers);let p=l.serializers;if(d&&p){var g=Object.assign({},u,p),_=!0===r.browser.serialize?Object.keys(g):d;delete c.serializers,applySerializers([c],_,g,this._stdErrSerialize)}function Child(r){this._childLevel=(0|r._childLevel)+1,this.error=bind(r,c,"error"),this.fatal=bind(r,c,"fatal"),this.warn=bind(r,c,"warn"),this.info=bind(r,c,"info"),this.debug=bind(r,c,"debug"),this.trace=bind(r,c,"trace"),g&&(this.serializers=g,this._serialize=_),i&&(this._logEvent=createLogEventShape([].concat(r._logEvent.bindings,c)))}return Child.prototype=this,new Child(this)}return _.levels=pino.levels,_.level=g,_.setMaxListeners=_.getMaxListeners=_.emit=_.addListener=_.on=_.prependListener=_.once=_.prependOnceListener=_.removeListener=_.removeAllListeners=_.listeners=_.listenerCount=_.eventNames=_.write=_.flush=noop,_.serializers=u,_._serialize=d,_._stdErrSerialize=p,_.child=child,i&&(_._logEvent=createLogEventShape()),_}function set(r,i,c,u){let d=Object.getPrototypeOf(i);i[c]=i.levelVal>i.levels.values[c]?noop:d[c]?d[c]:l[c]||l[u]||noop,wrap(r,i,c)}function wrap(r,i,c){if(r.transmit||i[c]!==noop){var u;i[c]=(u=i[c],function(){let d=r.timestamp(),p=Array(arguments.length),g=Object.getPrototypeOf&&Object.getPrototypeOf(this)===l?l:this;for(var _=0;_<p.length;_++)p[_]=arguments[_];if(r.serialize&&!r.asObject&&applySerializers(p,this._serialize,this.serializers,this._stdErrSerialize),r.asObject?u.call(g,asObject(this,c,p,d)):u.apply(g,p),r.transmit){let u=r.transmit.level||i.level,l=pino.levels.values[u],g=pino.levels.values[c];if(g<l)return;transmit(this,{ts:d,methodLevel:c,methodValue:g,transmitLevel:u,transmitValue:pino.levels.values[r.transmit.level||i.level],send:r.transmit.send,val:i.levelVal},p)}})}}function asObject(r,i,c,l){r._serialize&&applySerializers(c,r._serialize,r.serializers,r._stdErrSerialize);let d=c.slice(),p=d[0],g={};l&&(g.time=l),g.level=pino.levels.values[i];let _=(0|r._childLevel)+1;if(_<1&&(_=1),null!==p&&"object"==typeof p){for(;_--&&"object"==typeof d[0];)Object.assign(g,d.shift());p=d.length?u(d.shift(),d):void 0}else"string"==typeof p&&(p=u(d.shift(),d));return void 0!==p&&(g.msg=p),g}function applySerializers(r,i,c,u){for(let l in r)if(u&&r[l]instanceof Error)r[l]=pino.stdSerializers.err(r[l]);else if("object"==typeof r[l]&&!Array.isArray(r[l]))for(let u in r[l])i&&i.indexOf(u)>-1&&u in c&&(r[l][u]=c[u](r[l][u]))}function bind(r,i,c){return function(){let u=Array(1+arguments.length);u[0]=i;for(var l=1;l<u.length;l++)u[l]=arguments[l-1];return r[c].apply(this,u)}}function transmit(r,i,c){let u=i.send,l=i.ts,d=i.methodLevel,p=i.methodValue,g=i.val,_=r._logEvent.bindings;applySerializers(c,r._serialize||Object.keys(r.serializers),r.serializers,void 0===r._stdErrSerialize||r._stdErrSerialize),r._logEvent.ts=l,r._logEvent.messages=c.filter(function(r){return -1===_.indexOf(r)}),r._logEvent.level.label=d,r._logEvent.level.value=p,u(d,r._logEvent,g),r._logEvent=createLogEventShape(_)}function createLogEventShape(r){return{ts:0,messages:[],bindings:r||[],level:{label:"",value:0}}}function asErrValue(r){let i={type:r.constructor.name,msg:r.message,stack:r.stack};for(let c in r)void 0===i[c]&&(i[c]=r[c]);return i}function getTimeFunction(r){return"function"==typeof r.timestamp?r.timestamp:!1===r.timestamp?nullTime:epochTime}function mock(){return{}}function passthrough(r){return r}function noop(){}function nullTime(){return!1}function epochTime(){return Date.now()}function unixTime(){return Math.round(Date.now()/1e3)}function isoTime(){return new Date(Date.now()).toISOString()}function pfGlobalThisOrFallback(){function defd(r){return void 0!==r&&r}try{if("undefined"!=typeof globalThis)return globalThis;return Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(r){return defd(self)||defd(window)||defd(this)||{}}}pino.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},pino.stdSerializers={mapHttpRequest:mock,mapHttpResponse:mock,wrapRequestSerializer:passthrough,wrapResponseSerializer:passthrough,wrapErrorSerializer:passthrough,req:mock,res:mock,err:asErrValue},pino.stdTimeFunctions=Object.assign({},{nullTime,epochTime,unixTime,isoTime})}}]);